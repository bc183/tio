{"ast":null,"code":"import _get from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './media/scrollbars.css';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose as _dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { getZoomFactor } from '../../browser.js';\nvar HIDE_TIMEOUT = 500;\nvar SCROLL_WHEEL_SENSITIVITY = 50;\nvar SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\n\nvar MouseWheelClassifierItem = function MouseWheelClassifierItem(timestamp, deltaX, deltaY) {\n  _classCallCheck(this, MouseWheelClassifierItem);\n\n  this.timestamp = timestamp;\n  this.deltaX = deltaX;\n  this.deltaY = deltaY;\n  this.score = 0;\n};\n\nexport var MouseWheelClassifier = /*#__PURE__*/function () {\n  function MouseWheelClassifier() {\n    _classCallCheck(this, MouseWheelClassifier);\n\n    this._capacity = 5;\n    this._memory = [];\n    this._front = -1;\n    this._rear = -1;\n  }\n\n  _createClass(MouseWheelClassifier, [{\n    key: \"isPhysicalMouseWheel\",\n    value: function isPhysicalMouseWheel() {\n      if (this._front === -1 && this._rear === -1) {\n        // no elements\n        return false;\n      } // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n\n\n      var remainingInfluence = 1;\n      var score = 0;\n      var iteration = 1;\n      var index = this._rear;\n\n      do {\n        var influence = index === this._front ? remainingInfluence : Math.pow(2, -iteration);\n        remainingInfluence -= influence;\n        score += this._memory[index].score * influence;\n\n        if (index === this._front) {\n          break;\n        }\n\n        index = (this._capacity + index - 1) % this._capacity;\n        iteration++;\n      } while (true);\n\n      return score <= 0.5;\n    }\n  }, {\n    key: \"accept\",\n    value: function accept(timestamp, deltaX, deltaY) {\n      var item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n      item.score = this._computeScore(item);\n\n      if (this._front === -1 && this._rear === -1) {\n        this._memory[0] = item;\n        this._front = 0;\n        this._rear = 0;\n      } else {\n        this._rear = (this._rear + 1) % this._capacity;\n\n        if (this._rear === this._front) {\n          // Drop oldest\n          this._front = (this._front + 1) % this._capacity;\n        }\n\n        this._memory[this._rear] = item;\n      }\n    }\n    /**\r\n     * A score between 0 and 1 for `item`.\r\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\r\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\r\n     */\n\n  }, {\n    key: \"_computeScore\",\n    value: function _computeScore(item) {\n      if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n        // both axes exercised => definitely not a physical mouse wheel\n        return 1;\n      }\n\n      var score = 0.5;\n      var prev = this._front === -1 && this._rear === -1 ? null : this._memory[this._rear];\n\n      if (prev) {// const deltaT = item.timestamp - prev.timestamp;\n        // if (deltaT < 1000 / 30) {\n        // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n        // \tscore += 0.25;\n        // }\n        // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n        // \t// equal amplitude => indicator that this is a physical mouse wheel\n        // \tscore -= 0.25;\n        // }\n      }\n\n      if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n        // non-integer deltas => indicator that this is not a physical mouse wheel\n        score += 0.25;\n      }\n\n      return Math.min(Math.max(score, 0), 1);\n    }\n  }, {\n    key: \"_isAlmostInt\",\n    value: function _isAlmostInt(value) {\n      var delta = Math.abs(Math.round(value) - value);\n      return delta < 0.01;\n    }\n  }]);\n\n  return MouseWheelClassifier;\n}();\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\nexport var AbstractScrollableElement = /*#__PURE__*/function (_Widget) {\n  _inherits(AbstractScrollableElement, _Widget);\n\n  var _super = _createSuper(AbstractScrollableElement);\n\n  function AbstractScrollableElement(element, options, scrollable) {\n    var _this;\n\n    _classCallCheck(this, AbstractScrollableElement);\n\n    _this = _super.call(this);\n    _this._onScroll = _this._register(new Emitter());\n    _this.onScroll = _this._onScroll.event;\n    _this._onWillScroll = _this._register(new Emitter());\n    element.style.overflow = 'hidden';\n    _this._options = resolveOptions(options);\n    _this._scrollable = scrollable;\n\n    _this._register(_this._scrollable.onScroll(function (e) {\n      _this._onWillScroll.fire(e);\n\n      _this._onDidScroll(e);\n\n      _this._onScroll.fire(e);\n    }));\n\n    var scrollbarHost = {\n      onMouseWheel: function onMouseWheel(mouseWheelEvent) {\n        return _this._onMouseWheel(mouseWheelEvent);\n      },\n      onDragStart: function onDragStart() {\n        return _this._onDragStart();\n      },\n      onDragEnd: function onDragEnd() {\n        return _this._onDragEnd();\n      }\n    };\n    _this._verticalScrollbar = _this._register(new VerticalScrollbar(_this._scrollable, _this._options, scrollbarHost));\n    _this._horizontalScrollbar = _this._register(new HorizontalScrollbar(_this._scrollable, _this._options, scrollbarHost));\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-scrollable-element ' + _this._options.className;\n\n    _this._domNode.setAttribute('role', 'presentation');\n\n    _this._domNode.style.position = 'relative';\n    _this._domNode.style.overflow = 'hidden';\n\n    _this._domNode.appendChild(element);\n\n    _this._domNode.appendChild(_this._horizontalScrollbar.domNode.domNode);\n\n    _this._domNode.appendChild(_this._verticalScrollbar.domNode.domNode);\n\n    if (_this._options.useShadows) {\n      _this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._leftShadowDomNode.setClassName('shadow');\n\n      _this._domNode.appendChild(_this._leftShadowDomNode.domNode);\n\n      _this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._topShadowDomNode.setClassName('shadow');\n\n      _this._domNode.appendChild(_this._topShadowDomNode.domNode);\n\n      _this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._topLeftShadowDomNode.setClassName('shadow top-left-corner');\n\n      _this._domNode.appendChild(_this._topLeftShadowDomNode.domNode);\n    } else {\n      _this._leftShadowDomNode = null;\n      _this._topShadowDomNode = null;\n      _this._topLeftShadowDomNode = null;\n    }\n\n    _this._listenOnDomNode = _this._options.listenOnDomNode || _this._domNode;\n    _this._mouseWheelToDispose = [];\n\n    _this._setListeningToMouseWheel(_this._options.handleMouseWheel);\n\n    _this.onmouseover(_this._listenOnDomNode, function (e) {\n      return _this._onMouseOver(e);\n    });\n\n    _this.onnonbubblingmouseout(_this._listenOnDomNode, function (e) {\n      return _this._onMouseOut(e);\n    });\n\n    _this._hideTimeout = _this._register(new TimeoutTimer());\n    _this._isDragging = false;\n    _this._mouseIsOver = false;\n    _this._shouldRender = true;\n    _this._revealOnScroll = true;\n    return _this;\n  }\n\n  _createClass(AbstractScrollableElement, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._mouseWheelToDispose = _dispose(this._mouseWheelToDispose);\n\n      _get(_getPrototypeOf(AbstractScrollableElement.prototype), \"dispose\", this).call(this);\n    }\n    /**\r\n     * Get the generated 'scrollable' dom node\r\n     */\n\n  }, {\n    key: \"getDomNode\",\n    value: function getDomNode() {\n      return this._domNode;\n    }\n  }, {\n    key: \"getOverviewRulerLayoutInfo\",\n    value: function getOverviewRulerLayoutInfo() {\n      return {\n        parent: this._domNode,\n        insertBefore: this._verticalScrollbar.domNode.domNode\n      };\n    }\n    /**\r\n     * Delegate a mouse down event to the vertical scrollbar.\r\n     * This is to help with clicking somewhere else and having the scrollbar react.\r\n     */\n\n  }, {\n    key: \"delegateVerticalScrollbarMouseDown\",\n    value: function delegateVerticalScrollbarMouseDown(browserEvent) {\n      this._verticalScrollbar.delegateMouseDown(browserEvent);\n    }\n  }, {\n    key: \"getScrollDimensions\",\n    value: function getScrollDimensions() {\n      return this._scrollable.getScrollDimensions();\n    }\n  }, {\n    key: \"setScrollDimensions\",\n    value: function setScrollDimensions(dimensions) {\n      this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\r\n     * Update the class name of the scrollable element.\r\n     */\n\n  }, {\n    key: \"updateClassName\",\n    value: function updateClassName(newClassName) {\n      this._options.className = newClassName; // Defaults are different on Macs\n\n      if (platform.isMacintosh) {\n        this._options.className += ' mac';\n      }\n\n      this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\r\n     * Update configuration options for the scrollbar.\r\n     * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\r\n     * depend on Editor.\r\n     */\n\n  }, {\n    key: \"updateOptions\",\n    value: function updateOptions(newOptions) {\n      if (typeof newOptions.handleMouseWheel !== 'undefined') {\n        this._options.handleMouseWheel = newOptions.handleMouseWheel;\n\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n      }\n\n      if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n        this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n      }\n\n      if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n        this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n      }\n\n      if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n        this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n      }\n\n      if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n        this._horizontalScrollbar.updateScrollbarSize(newOptions.horizontalScrollbarSize);\n      }\n\n      if (!this._options.lazyRender) {\n        this._render();\n      }\n    } // -------------------- mouse wheel scrolling --------------------\n\n  }, {\n    key: \"_setListeningToMouseWheel\",\n    value: function _setListeningToMouseWheel(shouldListen) {\n      var _this2 = this;\n\n      var isListening = this._mouseWheelToDispose.length > 0;\n\n      if (isListening === shouldListen) {\n        // No change\n        return;\n      } // Stop listening (if necessary)\n\n\n      this._mouseWheelToDispose = _dispose(this._mouseWheelToDispose); // Start listening (if necessary)\n\n      if (shouldListen) {\n        var onMouseWheel = function onMouseWheel(browserEvent) {\n          _this2._onMouseWheel(new StandardWheelEvent(browserEvent));\n        };\n\n        this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, {\n          passive: false\n        }));\n      }\n    }\n  }, {\n    key: \"_onMouseWheel\",\n    value: function _onMouseWheel(e) {\n      var classifier = MouseWheelClassifier.INSTANCE;\n\n      if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n        var osZoomFactor = window.devicePixelRatio / getZoomFactor();\n\n        if (platform.isWindows || platform.isLinux) {\n          // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n          // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n          classifier.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n        } else {\n          classifier.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n      } // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n\n\n      var didScroll = false;\n\n      if (e.deltaY || e.deltaX) {\n        var deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n        var deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n\n        if (this._options.scrollPredominantAxis) {\n          if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n            deltaX = 0;\n          } else {\n            deltaY = 0;\n          }\n        }\n\n        if (this._options.flipAxes) {\n          var _ref = [deltaX, deltaY];\n          deltaY = _ref[0];\n          deltaX = _ref[1];\n        } // Convert vertical scrolling to horizontal if shift is held, this\n        // is handled at a higher level on Mac\n\n\n        var shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n\n        if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n          deltaX = deltaY;\n          deltaY = 0;\n        }\n\n        if (e.browserEvent && e.browserEvent.altKey) {\n          // fastScrolling\n          deltaX = deltaX * this._options.fastScrollSensitivity;\n          deltaY = deltaY * this._options.fastScrollSensitivity;\n        }\n\n        var futureScrollPosition = this._scrollable.getFutureScrollPosition();\n\n        var desiredScrollPosition = {};\n\n        if (deltaY) {\n          var desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\n\n          this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n        }\n\n        if (deltaX) {\n          var desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\n\n          this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n        } // Check that we are scrolling towards a location which is valid\n\n\n        desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n\n        if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n          var canPerformSmoothScroll = SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED && this._options.mouseWheelSmoothScroll && classifier.isPhysicalMouseWheel();\n\n          if (canPerformSmoothScroll) {\n            this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n          } else {\n            this._scrollable.setScrollPositionNow(desiredScrollPosition);\n          }\n\n          didScroll = true;\n        }\n      }\n\n      var consumeMouseWheel = didScroll;\n\n      if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n        consumeMouseWheel = true;\n      }\n\n      if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n        consumeMouseWheel = true;\n      }\n\n      if (consumeMouseWheel) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  }, {\n    key: \"_onDidScroll\",\n    value: function _onDidScroll(e) {\n      this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n      this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n\n      if (this._options.useShadows) {\n        this._shouldRender = true;\n      }\n\n      if (this._revealOnScroll) {\n        this._reveal();\n      }\n\n      if (!this._options.lazyRender) {\n        this._render();\n      }\n    }\n    /**\r\n     * Render / mutate the DOM now.\r\n     * Should be used together with the ctor option `lazyRender`.\r\n     */\n\n  }, {\n    key: \"renderNow\",\n    value: function renderNow() {\n      if (!this._options.lazyRender) {\n        throw new Error('Please use `lazyRender` together with `renderNow`!');\n      }\n\n      this._render();\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      if (!this._shouldRender) {\n        return;\n      }\n\n      this._shouldRender = false;\n\n      this._horizontalScrollbar.render();\n\n      this._verticalScrollbar.render();\n\n      if (this._options.useShadows) {\n        var scrollState = this._scrollable.getCurrentScrollPosition();\n\n        var enableTop = scrollState.scrollTop > 0;\n        var enableLeft = scrollState.scrollLeft > 0;\n\n        this._leftShadowDomNode.setClassName('shadow' + (enableLeft ? ' left' : ''));\n\n        this._topShadowDomNode.setClassName('shadow' + (enableTop ? ' top' : ''));\n\n        this._topLeftShadowDomNode.setClassName('shadow top-left-corner' + (enableTop ? ' top' : '') + (enableLeft ? ' left' : ''));\n      }\n    } // -------------------- fade in / fade out --------------------\n\n  }, {\n    key: \"_onDragStart\",\n    value: function _onDragStart() {\n      this._isDragging = true;\n\n      this._reveal();\n    }\n  }, {\n    key: \"_onDragEnd\",\n    value: function _onDragEnd() {\n      this._isDragging = false;\n\n      this._hide();\n    }\n  }, {\n    key: \"_onMouseOut\",\n    value: function _onMouseOut(e) {\n      this._mouseIsOver = false;\n\n      this._hide();\n    }\n  }, {\n    key: \"_onMouseOver\",\n    value: function _onMouseOver(e) {\n      this._mouseIsOver = true;\n\n      this._reveal();\n    }\n  }, {\n    key: \"_reveal\",\n    value: function _reveal() {\n      this._verticalScrollbar.beginReveal();\n\n      this._horizontalScrollbar.beginReveal();\n\n      this._scheduleHide();\n    }\n  }, {\n    key: \"_hide\",\n    value: function _hide() {\n      if (!this._mouseIsOver && !this._isDragging) {\n        this._verticalScrollbar.beginHide();\n\n        this._horizontalScrollbar.beginHide();\n      }\n    }\n  }, {\n    key: \"_scheduleHide\",\n    value: function _scheduleHide() {\n      var _this3 = this;\n\n      if (!this._mouseIsOver && !this._isDragging) {\n        this._hideTimeout.cancelAndSet(function () {\n          return _this3._hide();\n        }, HIDE_TIMEOUT);\n      }\n    }\n  }]);\n\n  return AbstractScrollableElement;\n}(Widget);\nexport var ScrollableElement = /*#__PURE__*/function (_AbstractScrollableEl) {\n  _inherits(ScrollableElement, _AbstractScrollableEl);\n\n  var _super2 = _createSuper(ScrollableElement);\n\n  function ScrollableElement(element, options) {\n    var _this4;\n\n    _classCallCheck(this, ScrollableElement);\n\n    options = options || {};\n    options.mouseWheelSmoothScroll = false;\n    var scrollable = new Scrollable(0, function (callback) {\n      return dom.scheduleAtNextAnimationFrame(callback);\n    });\n    _this4 = _super2.call(this, element, options, scrollable);\n\n    _this4._register(scrollable);\n\n    return _this4;\n  }\n\n  _createClass(ScrollableElement, [{\n    key: \"setScrollPosition\",\n    value: function setScrollPosition(update) {\n      this._scrollable.setScrollPositionNow(update);\n    }\n  }]);\n\n  return ScrollableElement;\n}(AbstractScrollableElement);\nexport var SmoothScrollableElement = /*#__PURE__*/function (_AbstractScrollableEl2) {\n  _inherits(SmoothScrollableElement, _AbstractScrollableEl2);\n\n  var _super3 = _createSuper(SmoothScrollableElement);\n\n  function SmoothScrollableElement(element, options, scrollable) {\n    _classCallCheck(this, SmoothScrollableElement);\n\n    return _super3.call(this, element, options, scrollable);\n  }\n\n  _createClass(SmoothScrollableElement, [{\n    key: \"setScrollPosition\",\n    value: function setScrollPosition(update) {\n      if (update.reuseAnimation) {\n        this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n      } else {\n        this._scrollable.setScrollPositionNow(update);\n      }\n    }\n  }, {\n    key: \"getScrollPosition\",\n    value: function getScrollPosition() {\n      return this._scrollable.getCurrentScrollPosition();\n    }\n  }]);\n\n  return SmoothScrollableElement;\n}(AbstractScrollableElement);\nexport var DomScrollableElement = /*#__PURE__*/function (_ScrollableElement) {\n  _inherits(DomScrollableElement, _ScrollableElement);\n\n  var _super4 = _createSuper(DomScrollableElement);\n\n  function DomScrollableElement(element, options) {\n    var _this5;\n\n    _classCallCheck(this, DomScrollableElement);\n\n    _this5 = _super4.call(this, element, options);\n    _this5._element = element;\n\n    _this5.onScroll(function (e) {\n      if (e.scrollTopChanged) {\n        _this5._element.scrollTop = e.scrollTop;\n      }\n\n      if (e.scrollLeftChanged) {\n        _this5._element.scrollLeft = e.scrollLeft;\n      }\n    });\n\n    _this5.scanDomNode();\n\n    return _this5;\n  }\n\n  _createClass(DomScrollableElement, [{\n    key: \"scanDomNode\",\n    value: function scanDomNode() {\n      // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n      this.setScrollDimensions({\n        width: this._element.clientWidth,\n        scrollWidth: this._element.scrollWidth,\n        height: this._element.clientHeight,\n        scrollHeight: this._element.scrollHeight\n      });\n      this.setScrollPosition({\n        scrollLeft: this._element.scrollLeft,\n        scrollTop: this._element.scrollTop\n      });\n    }\n  }]);\n\n  return DomScrollableElement;\n}(ScrollableElement);\n\nfunction resolveOptions(opts) {\n  var result = {\n    lazyRender: typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false,\n    className: typeof opts.className !== 'undefined' ? opts.className : '',\n    useShadows: typeof opts.useShadows !== 'undefined' ? opts.useShadows : true,\n    handleMouseWheel: typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true,\n    flipAxes: typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false,\n    consumeMouseWheelIfScrollbarIsNeeded: typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false,\n    alwaysConsumeMouseWheel: typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false,\n    scrollYToX: typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false,\n    mouseWheelScrollSensitivity: typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1,\n    fastScrollSensitivity: typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5,\n    scrollPredominantAxis: typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true,\n    mouseWheelSmoothScroll: typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true,\n    arrowSize: typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11,\n    listenOnDomNode: typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null,\n    horizontal: typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1\n    /* Auto */\n    ,\n    horizontalScrollbarSize: typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10,\n    horizontalSliderSize: typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0,\n    horizontalHasArrows: typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false,\n    vertical: typeof opts.vertical !== 'undefined' ? opts.vertical : 1\n    /* Auto */\n    ,\n    verticalScrollbarSize: typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10,\n    verticalHasArrows: typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false,\n    verticalSliderSize: typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0,\n    scrollByPage: typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false\n  };\n  result.horizontalSliderSize = typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize;\n  result.verticalSliderSize = typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize; // Defaults are different on Macs\n\n  if (platform.isMacintosh) {\n    result.className += ' mac';\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js"],"names":["dom","createFastDomNode","StandardWheelEvent","HorizontalScrollbar","VerticalScrollbar","Widget","TimeoutTimer","Emitter","dispose","platform","Scrollable","getZoomFactor","HIDE_TIMEOUT","SCROLL_WHEEL_SENSITIVITY","SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED","MouseWheelClassifierItem","timestamp","deltaX","deltaY","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","remainingInfluence","iteration","index","influence","Math","pow","item","_computeScore","abs","prev","_isAlmostInt","min","max","value","delta","round","INSTANCE","AbstractScrollableElement","element","options","scrollable","_onScroll","_register","onScroll","event","_onWillScroll","style","overflow","_options","resolveOptions","_scrollable","e","fire","_onDidScroll","scrollbarHost","onMouseWheel","mouseWheelEvent","_onMouseWheel","onDragStart","_onDragStart","onDragEnd","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_domNode","document","createElement","className","setAttribute","position","appendChild","domNode","useShadows","_leftShadowDomNode","setClassName","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","handleMouseWheel","onmouseover","_onMouseOver","onnonbubblingmouseout","_onMouseOut","_hideTimeout","_isDragging","_mouseIsOver","_shouldRender","_revealOnScroll","parent","insertBefore","browserEvent","delegateMouseDown","getScrollDimensions","dimensions","setScrollDimensions","newClassName","isMacintosh","newOptions","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollPredominantAxis","horizontalScrollbarSize","updateScrollbarSize","lazyRender","_render","shouldListen","isListening","length","push","addDisposableListener","EventType","MOUSE_WHEEL","passive","classifier","osZoomFactor","window","devicePixelRatio","isWindows","isLinux","accept","Date","now","didScroll","flipAxes","shiftConvert","shiftKey","scrollYToX","altKey","futureScrollPosition","getFutureScrollPosition","desiredScrollPosition","desiredScrollTop","scrollTop","writeScrollPosition","desiredScrollLeft","scrollLeft","validateScrollPosition","canPerformSmoothScroll","mouseWheelSmoothScroll","isPhysicalMouseWheel","setScrollPositionSmooth","setScrollPositionNow","consumeMouseWheel","alwaysConsumeMouseWheel","consumeMouseWheelIfScrollbarIsNeeded","isNeeded","preventDefault","stopPropagation","onDidScroll","_reveal","Error","render","scrollState","getCurrentScrollPosition","enableTop","enableLeft","_hide","beginReveal","_scheduleHide","beginHide","cancelAndSet","ScrollableElement","callback","scheduleAtNextAnimationFrame","update","SmoothScrollableElement","reuseAnimation","DomScrollableElement","_element","scrollTopChanged","scrollLeftChanged","scanDomNode","width","clientWidth","scrollWidth","height","clientHeight","scrollHeight","setScrollPosition","opts","result","arrowSize","horizontal","horizontalSliderSize","horizontalHasArrows","vertical","verticalScrollbarSize","verticalHasArrows","verticalSliderSize","scrollByPage"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './media/scrollbars.css';\r\nimport * as dom from '../../dom.js';\r\nimport { createFastDomNode } from '../../fastDomNode.js';\r\nimport { StandardWheelEvent } from '../../mouseEvent.js';\r\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\r\nimport { VerticalScrollbar } from './verticalScrollbar.js';\r\nimport { Widget } from '../widget.js';\r\nimport { TimeoutTimer } from '../../../common/async.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { dispose } from '../../../common/lifecycle.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Scrollable } from '../../../common/scrollable.js';\r\nimport { getZoomFactor } from '../../browser.js';\r\nconst HIDE_TIMEOUT = 500;\r\nconst SCROLL_WHEEL_SENSITIVITY = 50;\r\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\r\nclass MouseWheelClassifierItem {\r\n    constructor(timestamp, deltaX, deltaY) {\r\n        this.timestamp = timestamp;\r\n        this.deltaX = deltaX;\r\n        this.deltaY = deltaY;\r\n        this.score = 0;\r\n    }\r\n}\r\nexport class MouseWheelClassifier {\r\n    constructor() {\r\n        this._capacity = 5;\r\n        this._memory = [];\r\n        this._front = -1;\r\n        this._rear = -1;\r\n    }\r\n    isPhysicalMouseWheel() {\r\n        if (this._front === -1 && this._rear === -1) {\r\n            // no elements\r\n            return false;\r\n        }\r\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\r\n        let remainingInfluence = 1;\r\n        let score = 0;\r\n        let iteration = 1;\r\n        let index = this._rear;\r\n        do {\r\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\r\n            remainingInfluence -= influence;\r\n            score += this._memory[index].score * influence;\r\n            if (index === this._front) {\r\n                break;\r\n            }\r\n            index = (this._capacity + index - 1) % this._capacity;\r\n            iteration++;\r\n        } while (true);\r\n        return (score <= 0.5);\r\n    }\r\n    accept(timestamp, deltaX, deltaY) {\r\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\r\n        item.score = this._computeScore(item);\r\n        if (this._front === -1 && this._rear === -1) {\r\n            this._memory[0] = item;\r\n            this._front = 0;\r\n            this._rear = 0;\r\n        }\r\n        else {\r\n            this._rear = (this._rear + 1) % this._capacity;\r\n            if (this._rear === this._front) {\r\n                // Drop oldest\r\n                this._front = (this._front + 1) % this._capacity;\r\n            }\r\n            this._memory[this._rear] = item;\r\n        }\r\n    }\r\n    /**\r\n     * A score between 0 and 1 for `item`.\r\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\r\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\r\n     */\r\n    _computeScore(item) {\r\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\r\n            // both axes exercised => definitely not a physical mouse wheel\r\n            return 1;\r\n        }\r\n        let score = 0.5;\r\n        const prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\r\n        if (prev) {\r\n            // const deltaT = item.timestamp - prev.timestamp;\r\n            // if (deltaT < 1000 / 30) {\r\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\r\n            // \tscore += 0.25;\r\n            // }\r\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\r\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\r\n            // \tscore -= 0.25;\r\n            // }\r\n        }\r\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\r\n            // non-integer deltas => indicator that this is not a physical mouse wheel\r\n            score += 0.25;\r\n        }\r\n        return Math.min(Math.max(score, 0), 1);\r\n    }\r\n    _isAlmostInt(value) {\r\n        const delta = Math.abs(Math.round(value) - value);\r\n        return (delta < 0.01);\r\n    }\r\n}\r\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\r\nexport class AbstractScrollableElement extends Widget {\r\n    constructor(element, options, scrollable) {\r\n        super();\r\n        this._onScroll = this._register(new Emitter());\r\n        this.onScroll = this._onScroll.event;\r\n        this._onWillScroll = this._register(new Emitter());\r\n        element.style.overflow = 'hidden';\r\n        this._options = resolveOptions(options);\r\n        this._scrollable = scrollable;\r\n        this._register(this._scrollable.onScroll((e) => {\r\n            this._onWillScroll.fire(e);\r\n            this._onDidScroll(e);\r\n            this._onScroll.fire(e);\r\n        }));\r\n        const scrollbarHost = {\r\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\r\n            onDragStart: () => this._onDragStart(),\r\n            onDragEnd: () => this._onDragEnd(),\r\n        };\r\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\r\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\r\n        this._domNode.setAttribute('role', 'presentation');\r\n        this._domNode.style.position = 'relative';\r\n        this._domNode.style.overflow = 'hidden';\r\n        this._domNode.appendChild(element);\r\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\r\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\r\n        if (this._options.useShadows) {\r\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            this._leftShadowDomNode.setClassName('shadow');\r\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\r\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            this._topShadowDomNode.setClassName('shadow');\r\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\r\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            this._topLeftShadowDomNode.setClassName('shadow top-left-corner');\r\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\r\n        }\r\n        else {\r\n            this._leftShadowDomNode = null;\r\n            this._topShadowDomNode = null;\r\n            this._topLeftShadowDomNode = null;\r\n        }\r\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\r\n        this._mouseWheelToDispose = [];\r\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\r\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\r\n        this.onnonbubblingmouseout(this._listenOnDomNode, (e) => this._onMouseOut(e));\r\n        this._hideTimeout = this._register(new TimeoutTimer());\r\n        this._isDragging = false;\r\n        this._mouseIsOver = false;\r\n        this._shouldRender = true;\r\n        this._revealOnScroll = true;\r\n    }\r\n    dispose() {\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Get the generated 'scrollable' dom node\r\n     */\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getOverviewRulerLayoutInfo() {\r\n        return {\r\n            parent: this._domNode,\r\n            insertBefore: this._verticalScrollbar.domNode.domNode,\r\n        };\r\n    }\r\n    /**\r\n     * Delegate a mouse down event to the vertical scrollbar.\r\n     * This is to help with clicking somewhere else and having the scrollbar react.\r\n     */\r\n    delegateVerticalScrollbarMouseDown(browserEvent) {\r\n        this._verticalScrollbar.delegateMouseDown(browserEvent);\r\n    }\r\n    getScrollDimensions() {\r\n        return this._scrollable.getScrollDimensions();\r\n    }\r\n    setScrollDimensions(dimensions) {\r\n        this._scrollable.setScrollDimensions(dimensions, false);\r\n    }\r\n    /**\r\n     * Update the class name of the scrollable element.\r\n     */\r\n    updateClassName(newClassName) {\r\n        this._options.className = newClassName;\r\n        // Defaults are different on Macs\r\n        if (platform.isMacintosh) {\r\n            this._options.className += ' mac';\r\n        }\r\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\r\n    }\r\n    /**\r\n     * Update configuration options for the scrollbar.\r\n     * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\r\n     * depend on Editor.\r\n     */\r\n    updateOptions(newOptions) {\r\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\r\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\r\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\r\n        }\r\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\r\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\r\n        }\r\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\r\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\r\n        }\r\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\r\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\r\n        }\r\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\r\n            this._horizontalScrollbar.updateScrollbarSize(newOptions.horizontalScrollbarSize);\r\n        }\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    }\r\n    // -------------------- mouse wheel scrolling --------------------\r\n    _setListeningToMouseWheel(shouldListen) {\r\n        const isListening = (this._mouseWheelToDispose.length > 0);\r\n        if (isListening === shouldListen) {\r\n            // No change\r\n            return;\r\n        }\r\n        // Stop listening (if necessary)\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        // Start listening (if necessary)\r\n        if (shouldListen) {\r\n            const onMouseWheel = (browserEvent) => {\r\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\r\n            };\r\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\r\n        }\r\n    }\r\n    _onMouseWheel(e) {\r\n        const classifier = MouseWheelClassifier.INSTANCE;\r\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\r\n            const osZoomFactor = window.devicePixelRatio / getZoomFactor();\r\n            if (platform.isWindows || platform.isLinux) {\r\n                // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\r\n                // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\r\n                classifier.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\r\n            }\r\n            else {\r\n                classifier.accept(Date.now(), e.deltaX, e.deltaY);\r\n            }\r\n        }\r\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\r\n        let didScroll = false;\r\n        if (e.deltaY || e.deltaX) {\r\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\r\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\r\n            if (this._options.scrollPredominantAxis) {\r\n                if (Math.abs(deltaY) >= Math.abs(deltaX)) {\r\n                    deltaX = 0;\r\n                }\r\n                else {\r\n                    deltaY = 0;\r\n                }\r\n            }\r\n            if (this._options.flipAxes) {\r\n                [deltaY, deltaX] = [deltaX, deltaY];\r\n            }\r\n            // Convert vertical scrolling to horizontal if shift is held, this\r\n            // is handled at a higher level on Mac\r\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\r\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\r\n                deltaX = deltaY;\r\n                deltaY = 0;\r\n            }\r\n            if (e.browserEvent && e.browserEvent.altKey) {\r\n                // fastScrolling\r\n                deltaX = deltaX * this._options.fastScrollSensitivity;\r\n                deltaY = deltaY * this._options.fastScrollSensitivity;\r\n            }\r\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\r\n            let desiredScrollPosition = {};\r\n            if (deltaY) {\r\n                const desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\r\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\r\n            }\r\n            if (deltaX) {\r\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\r\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\r\n            }\r\n            // Check that we are scrolling towards a location which is valid\r\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\r\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\r\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\r\n                    && this._options.mouseWheelSmoothScroll\r\n                    && classifier.isPhysicalMouseWheel());\r\n                if (canPerformSmoothScroll) {\r\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\r\n                }\r\n                else {\r\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\r\n                }\r\n                didScroll = true;\r\n            }\r\n        }\r\n        let consumeMouseWheel = didScroll;\r\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\r\n            consumeMouseWheel = true;\r\n        }\r\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\r\n            consumeMouseWheel = true;\r\n        }\r\n        if (consumeMouseWheel) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    }\r\n    _onDidScroll(e) {\r\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        if (this._options.useShadows) {\r\n            this._shouldRender = true;\r\n        }\r\n        if (this._revealOnScroll) {\r\n            this._reveal();\r\n        }\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    }\r\n    /**\r\n     * Render / mutate the DOM now.\r\n     * Should be used together with the ctor option `lazyRender`.\r\n     */\r\n    renderNow() {\r\n        if (!this._options.lazyRender) {\r\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\r\n        }\r\n        this._render();\r\n    }\r\n    _render() {\r\n        if (!this._shouldRender) {\r\n            return;\r\n        }\r\n        this._shouldRender = false;\r\n        this._horizontalScrollbar.render();\r\n        this._verticalScrollbar.render();\r\n        if (this._options.useShadows) {\r\n            const scrollState = this._scrollable.getCurrentScrollPosition();\r\n            const enableTop = scrollState.scrollTop > 0;\r\n            const enableLeft = scrollState.scrollLeft > 0;\r\n            this._leftShadowDomNode.setClassName('shadow' + (enableLeft ? ' left' : ''));\r\n            this._topShadowDomNode.setClassName('shadow' + (enableTop ? ' top' : ''));\r\n            this._topLeftShadowDomNode.setClassName('shadow top-left-corner' + (enableTop ? ' top' : '') + (enableLeft ? ' left' : ''));\r\n        }\r\n    }\r\n    // -------------------- fade in / fade out --------------------\r\n    _onDragStart() {\r\n        this._isDragging = true;\r\n        this._reveal();\r\n    }\r\n    _onDragEnd() {\r\n        this._isDragging = false;\r\n        this._hide();\r\n    }\r\n    _onMouseOut(e) {\r\n        this._mouseIsOver = false;\r\n        this._hide();\r\n    }\r\n    _onMouseOver(e) {\r\n        this._mouseIsOver = true;\r\n        this._reveal();\r\n    }\r\n    _reveal() {\r\n        this._verticalScrollbar.beginReveal();\r\n        this._horizontalScrollbar.beginReveal();\r\n        this._scheduleHide();\r\n    }\r\n    _hide() {\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._verticalScrollbar.beginHide();\r\n            this._horizontalScrollbar.beginHide();\r\n        }\r\n    }\r\n    _scheduleHide() {\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\r\n        }\r\n    }\r\n}\r\nexport class ScrollableElement extends AbstractScrollableElement {\r\n    constructor(element, options) {\r\n        options = options || {};\r\n        options.mouseWheelSmoothScroll = false;\r\n        const scrollable = new Scrollable(0, (callback) => dom.scheduleAtNextAnimationFrame(callback));\r\n        super(element, options, scrollable);\r\n        this._register(scrollable);\r\n    }\r\n    setScrollPosition(update) {\r\n        this._scrollable.setScrollPositionNow(update);\r\n    }\r\n}\r\nexport class SmoothScrollableElement extends AbstractScrollableElement {\r\n    constructor(element, options, scrollable) {\r\n        super(element, options, scrollable);\r\n    }\r\n    setScrollPosition(update) {\r\n        if (update.reuseAnimation) {\r\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\r\n        }\r\n        else {\r\n            this._scrollable.setScrollPositionNow(update);\r\n        }\r\n    }\r\n    getScrollPosition() {\r\n        return this._scrollable.getCurrentScrollPosition();\r\n    }\r\n}\r\nexport class DomScrollableElement extends ScrollableElement {\r\n    constructor(element, options) {\r\n        super(element, options);\r\n        this._element = element;\r\n        this.onScroll((e) => {\r\n            if (e.scrollTopChanged) {\r\n                this._element.scrollTop = e.scrollTop;\r\n            }\r\n            if (e.scrollLeftChanged) {\r\n                this._element.scrollLeft = e.scrollLeft;\r\n            }\r\n        });\r\n        this.scanDomNode();\r\n    }\r\n    scanDomNode() {\r\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\r\n        this.setScrollDimensions({\r\n            width: this._element.clientWidth,\r\n            scrollWidth: this._element.scrollWidth,\r\n            height: this._element.clientHeight,\r\n            scrollHeight: this._element.scrollHeight\r\n        });\r\n        this.setScrollPosition({\r\n            scrollLeft: this._element.scrollLeft,\r\n            scrollTop: this._element.scrollTop,\r\n        });\r\n    }\r\n}\r\nfunction resolveOptions(opts) {\r\n    const result = {\r\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\r\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\r\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\r\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\r\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\r\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\r\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\r\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\r\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\r\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\r\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\r\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\r\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\r\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\r\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* Auto */),\r\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\r\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\r\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\r\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* Auto */),\r\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\r\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\r\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\r\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\r\n    };\r\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\r\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\r\n    // Defaults are different on Macs\r\n    if (platform.isMacintosh) {\r\n        result.className += ' mac';\r\n    }\r\n    return result;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}