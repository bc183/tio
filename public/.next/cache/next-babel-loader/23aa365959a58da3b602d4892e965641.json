{"ast":null,"code":"import _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './inputBox.css';\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../dom.js';\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\nimport * as aria from '../aria/aria.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { Event, Emitter } from '../../../common/event.js';\nimport { Widget } from '../widget.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { HistoryNavigator } from '../../../common/history.js';\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { domEvent } from '../../event.js';\nvar $ = dom.$;\nvar defaultOpts = {\n  inputBackground: Color.fromHex('#3C3C3C'),\n  inputForeground: Color.fromHex('#CCCCCC'),\n  inputValidationInfoBorder: Color.fromHex('#55AAFF'),\n  inputValidationInfoBackground: Color.fromHex('#063B49'),\n  inputValidationWarningBorder: Color.fromHex('#B89500'),\n  inputValidationWarningBackground: Color.fromHex('#352A05'),\n  inputValidationErrorBorder: Color.fromHex('#BE1100'),\n  inputValidationErrorBackground: Color.fromHex('#5A1D1D')\n};\nexport var InputBox = /*#__PURE__*/function (_Widget) {\n  _inherits(InputBox, _Widget);\n\n  var _super = _createSuper(InputBox);\n\n  function InputBox(container, contextViewProvider, options) {\n    var _this;\n\n    _classCallCheck(this, InputBox);\n\n    _this = _super.call(this);\n    _this.state = 'idle';\n    _this.maxHeight = Number.POSITIVE_INFINITY;\n    _this._onDidChange = _this._register(new Emitter());\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onDidHeightChange = _this._register(new Emitter());\n    _this.onDidHeightChange = _this._onDidHeightChange.event;\n    _this.contextViewProvider = contextViewProvider;\n    _this.options = options || Object.create(null);\n    mixin(_this.options, defaultOpts, false);\n    _this.message = null;\n    _this.placeholder = _this.options.placeholder || '';\n    _this.ariaLabel = _this.options.ariaLabel || '';\n    _this.inputBackground = _this.options.inputBackground;\n    _this.inputForeground = _this.options.inputForeground;\n    _this.inputBorder = _this.options.inputBorder;\n    _this.inputValidationInfoBorder = _this.options.inputValidationInfoBorder;\n    _this.inputValidationInfoBackground = _this.options.inputValidationInfoBackground;\n    _this.inputValidationInfoForeground = _this.options.inputValidationInfoForeground;\n    _this.inputValidationWarningBorder = _this.options.inputValidationWarningBorder;\n    _this.inputValidationWarningBackground = _this.options.inputValidationWarningBackground;\n    _this.inputValidationWarningForeground = _this.options.inputValidationWarningForeground;\n    _this.inputValidationErrorBorder = _this.options.inputValidationErrorBorder;\n    _this.inputValidationErrorBackground = _this.options.inputValidationErrorBackground;\n    _this.inputValidationErrorForeground = _this.options.inputValidationErrorForeground;\n\n    if (_this.options.validationOptions) {\n      _this.validation = _this.options.validationOptions.validation;\n    }\n\n    _this.element = dom.append(container, $('.monaco-inputbox.idle'));\n    var tagName = _this.options.flexibleHeight ? 'textarea' : 'input';\n    var wrapper = dom.append(_this.element, $('.ibwrapper'));\n    _this.input = dom.append(wrapper, $(tagName + '.input.empty'));\n\n    _this.input.setAttribute('autocorrect', 'off');\n\n    _this.input.setAttribute('autocapitalize', 'off');\n\n    _this.input.setAttribute('spellcheck', 'false');\n\n    _this.onfocus(_this.input, function () {\n      return _this.element.classList.add('synthetic-focus');\n    });\n\n    _this.onblur(_this.input, function () {\n      return _this.element.classList.remove('synthetic-focus');\n    });\n\n    if (_this.options.flexibleHeight) {\n      _this.maxHeight = typeof _this.options.flexibleMaxHeight === 'number' ? _this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\n      _this.mirror = dom.append(wrapper, $('div.mirror'));\n      _this.mirror.innerText = \"\\xA0\";\n      _this.scrollableElement = new ScrollableElement(_this.element, {\n        vertical: 1\n        /* Auto */\n\n      });\n\n      if (_this.options.flexibleWidth) {\n        _this.input.setAttribute('wrap', 'off');\n\n        _this.mirror.style.whiteSpace = 'pre';\n        _this.mirror.style.wordWrap = 'initial';\n      }\n\n      dom.append(container, _this.scrollableElement.getDomNode());\n\n      _this._register(_this.scrollableElement); // from ScrollableElement to DOM\n\n\n      _this._register(_this.scrollableElement.onScroll(function (e) {\n        return _this.input.scrollTop = e.scrollTop;\n      }));\n\n      var onSelectionChange = Event.filter(domEvent(document, 'selectionchange'), function () {\n        var selection = document.getSelection();\n        return (selection === null || selection === void 0 ? void 0 : selection.anchorNode) === wrapper;\n      }); // from DOM to ScrollableElement\n\n      _this._register(onSelectionChange(_this.updateScrollDimensions, _assertThisInitialized(_this)));\n\n      _this._register(_this.onDidHeightChange(_this.updateScrollDimensions, _assertThisInitialized(_this)));\n    } else {\n      _this.input.type = _this.options.type || 'text';\n\n      _this.input.setAttribute('wrap', 'off');\n    }\n\n    if (_this.ariaLabel) {\n      _this.input.setAttribute('aria-label', _this.ariaLabel);\n    }\n\n    if (_this.placeholder) {\n      _this.setPlaceHolder(_this.placeholder);\n    }\n\n    _this.oninput(_this.input, function () {\n      return _this.onValueChange();\n    });\n\n    _this.onblur(_this.input, function () {\n      return _this.onBlur();\n    });\n\n    _this.onfocus(_this.input, function () {\n      return _this.onFocus();\n    });\n\n    _this.ignoreGesture(_this.input);\n\n    setTimeout(function () {\n      return _this.updateMirror();\n    }, 0); // Support actions\n\n    if (_this.options.actions) {\n      _this.actionbar = _this._register(new ActionBar(_this.element));\n\n      _this.actionbar.push(_this.options.actions, {\n        icon: true,\n        label: false\n      });\n    }\n\n    _this.applyStyles();\n\n    return _this;\n  }\n\n  _createClass(InputBox, [{\n    key: \"onBlur\",\n    value: function onBlur() {\n      this._hideMessage();\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      this._showMessage();\n    }\n  }, {\n    key: \"setPlaceHolder\",\n    value: function setPlaceHolder(placeHolder) {\n      this.placeholder = placeHolder;\n      this.input.setAttribute('placeholder', placeHolder);\n      this.input.title = placeHolder;\n    }\n  }, {\n    key: \"setAriaLabel\",\n    value: function setAriaLabel(label) {\n      this.ariaLabel = label;\n\n      if (label) {\n        this.input.setAttribute('aria-label', this.ariaLabel);\n      } else {\n        this.input.removeAttribute('aria-label');\n      }\n    }\n  }, {\n    key: \"getAriaLabel\",\n    value: function getAriaLabel() {\n      return this.ariaLabel;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.input.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.input.blur();\n    }\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      return document.activeElement === this.input;\n    }\n  }, {\n    key: \"select\",\n    value: function select() {\n      var range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      this.input.select();\n\n      if (range) {\n        this.input.setSelectionRange(range.start, range.end);\n      }\n    }\n  }, {\n    key: \"isSelectionAtEnd\",\n    value: function isSelectionAtEnd() {\n      return this.input.selectionEnd === this.input.value.length && this.input.selectionStart === this.input.selectionEnd;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.input.removeAttribute('disabled');\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.blur();\n      this.input.disabled = true;\n\n      this._hideMessage();\n    }\n  }, {\n    key: \"updateScrollDimensions\",\n    value: function updateScrollDimensions() {\n      if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\n        return;\n      }\n\n      var scrollHeight = this.cachedContentHeight;\n      var height = this.cachedHeight;\n      var scrollTop = this.input.scrollTop;\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: scrollHeight,\n        height: height\n      });\n      this.scrollableElement.setScrollPosition({\n        scrollTop: scrollTop\n      });\n    }\n  }, {\n    key: \"showMessage\",\n    value: function showMessage(message, force) {\n      this.message = message;\n      this.element.classList.remove('idle');\n      this.element.classList.remove('info');\n      this.element.classList.remove('warning');\n      this.element.classList.remove('error');\n      this.element.classList.add(this.classForType(message.type));\n      var styles = this.stylesForType(this.message.type);\n      this.element.style.border = styles.border ? \"1px solid \".concat(styles.border) : '';\n\n      if (this.hasFocus() || force) {\n        this._showMessage();\n      }\n    }\n  }, {\n    key: \"hideMessage\",\n    value: function hideMessage() {\n      this.message = null;\n      this.element.classList.remove('info');\n      this.element.classList.remove('warning');\n      this.element.classList.remove('error');\n      this.element.classList.add('idle');\n\n      this._hideMessage();\n\n      this.applyStyles();\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var errorMsg = null;\n\n      if (this.validation) {\n        errorMsg = this.validation(this.value);\n\n        if (errorMsg) {\n          this.inputElement.setAttribute('aria-invalid', 'true');\n          this.showMessage(errorMsg);\n        } else if (this.inputElement.hasAttribute('aria-invalid')) {\n          this.inputElement.removeAttribute('aria-invalid');\n          this.hideMessage();\n        }\n      }\n\n      return errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.type;\n    }\n  }, {\n    key: \"stylesForType\",\n    value: function stylesForType(type) {\n      switch (type) {\n        case 1\n        /* INFO */\n        :\n          return {\n            border: this.inputValidationInfoBorder,\n            background: this.inputValidationInfoBackground,\n            foreground: this.inputValidationInfoForeground\n          };\n\n        case 2\n        /* WARNING */\n        :\n          return {\n            border: this.inputValidationWarningBorder,\n            background: this.inputValidationWarningBackground,\n            foreground: this.inputValidationWarningForeground\n          };\n\n        default:\n          return {\n            border: this.inputValidationErrorBorder,\n            background: this.inputValidationErrorBackground,\n            foreground: this.inputValidationErrorForeground\n          };\n      }\n    }\n  }, {\n    key: \"classForType\",\n    value: function classForType(type) {\n      switch (type) {\n        case 1\n        /* INFO */\n        :\n          return 'info';\n\n        case 2\n        /* WARNING */\n        :\n          return 'warning';\n\n        default:\n          return 'error';\n      }\n    }\n  }, {\n    key: \"_showMessage\",\n    value: function _showMessage() {\n      var _this2 = this;\n\n      if (!this.contextViewProvider || !this.message) {\n        return;\n      }\n\n      var div;\n\n      var layout = function layout() {\n        return div.style.width = dom.getTotalWidth(_this2.element) + 'px';\n      };\n\n      this.contextViewProvider.showContextView({\n        getAnchor: function getAnchor() {\n          return _this2.element;\n        },\n        anchorAlignment: 1\n        /* RIGHT */\n        ,\n        render: function render(container) {\n          if (!_this2.message) {\n            return null;\n          }\n\n          div = dom.append(container, $('.monaco-inputbox-container'));\n          layout();\n          var renderOptions = {\n            inline: true,\n            className: 'monaco-inputbox-message'\n          };\n          var spanElement = _this2.message.formatContent ? renderFormattedText(_this2.message.content, renderOptions) : renderText(_this2.message.content, renderOptions);\n          spanElement.classList.add(_this2.classForType(_this2.message.type));\n\n          var styles = _this2.stylesForType(_this2.message.type);\n\n          spanElement.style.backgroundColor = styles.background ? styles.background.toString() : '';\n          spanElement.style.color = styles.foreground ? styles.foreground.toString() : '';\n          spanElement.style.border = styles.border ? \"1px solid \".concat(styles.border) : '';\n          dom.append(div, spanElement);\n          return null;\n        },\n        onHide: function onHide() {\n          _this2.state = 'closed';\n        },\n        layout: layout\n      }); // ARIA Support\n\n      var alertText;\n\n      if (this.message.type === 3\n      /* ERROR */\n      ) {\n          alertText = nls.localize('alertErrorMessage', \"Error: {0}\", this.message.content);\n        } else if (this.message.type === 2\n      /* WARNING */\n      ) {\n          alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", this.message.content);\n        } else {\n        alertText = nls.localize('alertInfoMessage', \"Info: {0}\", this.message.content);\n      }\n\n      aria.alert(alertText);\n      this.state = 'open';\n    }\n  }, {\n    key: \"_hideMessage\",\n    value: function _hideMessage() {\n      if (!this.contextViewProvider) {\n        return;\n      }\n\n      if (this.state === 'open') {\n        this.contextViewProvider.hideContextView();\n      }\n\n      this.state = 'idle';\n    }\n  }, {\n    key: \"onValueChange\",\n    value: function onValueChange() {\n      this._onDidChange.fire(this.value);\n\n      this.validate();\n      this.updateMirror();\n      this.input.classList.toggle('empty', !this.value);\n\n      if (this.state === 'open' && this.contextViewProvider) {\n        this.contextViewProvider.layout();\n      }\n    }\n  }, {\n    key: \"updateMirror\",\n    value: function updateMirror() {\n      if (!this.mirror) {\n        return;\n      }\n\n      var value = this.value;\n      var lastCharCode = value.charCodeAt(value.length - 1);\n      var suffix = lastCharCode === 10 ? ' ' : '';\n      var mirrorTextContent = value + suffix;\n\n      if (mirrorTextContent) {\n        this.mirror.textContent = value + suffix;\n      } else {\n        this.mirror.innerText = \"\\xA0\";\n      }\n\n      this.layout();\n    }\n  }, {\n    key: \"style\",\n    value: function style(styles) {\n      this.inputBackground = styles.inputBackground;\n      this.inputForeground = styles.inputForeground;\n      this.inputBorder = styles.inputBorder;\n      this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n      this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n      this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n      this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n      this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n      this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n      this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n      this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n      this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n      this.applyStyles();\n    }\n  }, {\n    key: \"applyStyles\",\n    value: function applyStyles() {\n      var background = this.inputBackground ? this.inputBackground.toString() : '';\n      var foreground = this.inputForeground ? this.inputForeground.toString() : '';\n      var border = this.inputBorder ? this.inputBorder.toString() : '';\n      this.element.style.backgroundColor = background;\n      this.element.style.color = foreground;\n      this.input.style.backgroundColor = 'inherit';\n      this.input.style.color = foreground;\n      this.element.style.borderWidth = border ? '1px' : '';\n      this.element.style.borderStyle = border ? 'solid' : '';\n      this.element.style.borderColor = border;\n    }\n  }, {\n    key: \"layout\",\n    value: function layout() {\n      if (!this.mirror) {\n        return;\n      }\n\n      var previousHeight = this.cachedContentHeight;\n      this.cachedContentHeight = dom.getTotalHeight(this.mirror);\n\n      if (previousHeight !== this.cachedContentHeight) {\n        this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\n        this.input.style.height = this.cachedHeight + 'px';\n\n        this._onDidHeightChange.fire(this.cachedContentHeight);\n      }\n    }\n  }, {\n    key: \"insertAtCursor\",\n    value: function insertAtCursor(text) {\n      var inputElement = this.inputElement;\n      var start = inputElement.selectionStart;\n      var end = inputElement.selectionEnd;\n      var content = inputElement.value;\n\n      if (start !== null && end !== null) {\n        this.value = content.substr(0, start) + text + content.substr(end);\n        inputElement.setSelectionRange(start + 1, start + 1);\n        this.layout();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._hideMessage();\n\n      this.message = null;\n\n      if (this.actionbar) {\n        this.actionbar.dispose();\n      }\n\n      _get(_getPrototypeOf(InputBox.prototype), \"dispose\", this).call(this);\n    }\n  }, {\n    key: \"inputElement\",\n    get: function get() {\n      return this.input;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.input.value;\n    },\n    set: function set(newValue) {\n      if (this.input.value !== newValue) {\n        this.input.value = newValue;\n        this.onValueChange();\n      }\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return dom.getTotalWidth(this.input);\n    },\n    set: function set(width) {\n      if (this.options.flexibleHeight && this.options.flexibleWidth) {\n        // textarea with horizontal scrolling\n        var horizontalPadding = 0;\n\n        if (this.mirror) {\n          var paddingLeft = parseFloat(this.mirror.style.paddingLeft || '') || 0;\n          var paddingRight = parseFloat(this.mirror.style.paddingRight || '') || 0;\n          horizontalPadding = paddingLeft + paddingRight;\n        }\n\n        this.input.style.width = width - horizontalPadding + 'px';\n      } else {\n        this.input.style.width = width + 'px';\n      }\n\n      if (this.mirror) {\n        this.mirror.style.width = width + 'px';\n      }\n    }\n  }, {\n    key: \"paddingRight\",\n    set: function set(paddingRight) {\n      if (this.options.flexibleHeight && this.options.flexibleWidth) {\n        this.input.style.width = \"calc(100% - \".concat(paddingRight, \"px)\");\n      } else {\n        this.input.style.paddingRight = paddingRight + 'px';\n      }\n\n      if (this.mirror) {\n        this.mirror.style.paddingRight = paddingRight + 'px';\n      }\n    }\n  }]);\n\n  return InputBox;\n}(Widget);\nexport var HistoryInputBox = /*#__PURE__*/function (_InputBox) {\n  _inherits(HistoryInputBox, _InputBox);\n\n  var _super2 = _createSuper(HistoryInputBox);\n\n  function HistoryInputBox(container, contextViewProvider, options) {\n    var _this3;\n\n    _classCallCheck(this, HistoryInputBox);\n\n    _this3 = _super2.call(this, container, contextViewProvider, options);\n    _this3.history = new HistoryNavigator(options.history, 100);\n    return _this3;\n  }\n\n  _createClass(HistoryInputBox, [{\n    key: \"addToHistory\",\n    value: function addToHistory() {\n      if (this.value && this.value !== this.getCurrentValue()) {\n        this.history.add(this.value);\n      }\n    }\n  }, {\n    key: \"showNextValue\",\n    value: function showNextValue() {\n      if (!this.history.has(this.value)) {\n        this.addToHistory();\n      }\n\n      var next = this.getNextValue();\n\n      if (next) {\n        next = next === this.value ? this.getNextValue() : next;\n      }\n\n      if (next) {\n        this.value = next;\n        aria.status(this.value);\n      }\n    }\n  }, {\n    key: \"showPreviousValue\",\n    value: function showPreviousValue() {\n      if (!this.history.has(this.value)) {\n        this.addToHistory();\n      }\n\n      var previous = this.getPreviousValue();\n\n      if (previous) {\n        previous = previous === this.value ? this.getPreviousValue() : previous;\n      }\n\n      if (previous) {\n        this.value = previous;\n        aria.status(this.value);\n      }\n    }\n  }, {\n    key: \"getCurrentValue\",\n    value: function getCurrentValue() {\n      var currentValue = this.history.current();\n\n      if (!currentValue) {\n        currentValue = this.history.last();\n        this.history.next();\n      }\n\n      return currentValue;\n    }\n  }, {\n    key: \"getPreviousValue\",\n    value: function getPreviousValue() {\n      return this.history.previous() || this.history.first();\n    }\n  }, {\n    key: \"getNextValue\",\n    value: function getNextValue() {\n      return this.history.next() || this.history.last();\n    }\n  }]);\n\n  return HistoryInputBox;\n}(InputBox);","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js"],"names":["nls","dom","renderFormattedText","renderText","aria","ActionBar","Event","Emitter","Widget","Color","mixin","HistoryNavigator","ScrollableElement","domEvent","$","defaultOpts","inputBackground","fromHex","inputForeground","inputValidationInfoBorder","inputValidationInfoBackground","inputValidationWarningBorder","inputValidationWarningBackground","inputValidationErrorBorder","inputValidationErrorBackground","InputBox","container","contextViewProvider","options","state","maxHeight","Number","POSITIVE_INFINITY","_onDidChange","_register","onDidChange","event","_onDidHeightChange","onDidHeightChange","Object","create","message","placeholder","ariaLabel","inputBorder","inputValidationInfoForeground","inputValidationWarningForeground","inputValidationErrorForeground","validationOptions","validation","element","append","tagName","flexibleHeight","wrapper","input","setAttribute","onfocus","classList","add","onblur","remove","flexibleMaxHeight","mirror","innerText","scrollableElement","vertical","flexibleWidth","style","whiteSpace","wordWrap","getDomNode","onScroll","e","scrollTop","onSelectionChange","filter","document","selection","getSelection","anchorNode","updateScrollDimensions","type","setPlaceHolder","oninput","onValueChange","onBlur","onFocus","ignoreGesture","setTimeout","updateMirror","actions","actionbar","push","icon","label","applyStyles","_hideMessage","_showMessage","placeHolder","title","removeAttribute","focus","blur","activeElement","range","select","setSelectionRange","start","end","selectionEnd","value","length","selectionStart","disabled","cachedContentHeight","cachedHeight","scrollHeight","height","setScrollDimensions","setScrollPosition","force","classForType","styles","stylesForType","border","hasFocus","errorMsg","inputElement","showMessage","hasAttribute","hideMessage","background","foreground","div","layout","width","getTotalWidth","showContextView","getAnchor","anchorAlignment","render","renderOptions","inline","className","spanElement","formatContent","content","backgroundColor","toString","color","onHide","alertText","localize","alert","hideContextView","fire","validate","toggle","lastCharCode","charCodeAt","suffix","mirrorTextContent","textContent","borderWidth","borderStyle","borderColor","previousHeight","getTotalHeight","Math","min","text","substr","dispose","newValue","horizontalPadding","paddingLeft","parseFloat","paddingRight","HistoryInputBox","history","getCurrentValue","has","addToHistory","next","getNextValue","status","previous","getPreviousValue","currentValue","current","last","first"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './inputBox.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as dom from '../../dom.js';\r\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\r\nimport * as aria from '../aria/aria.js';\r\nimport { ActionBar } from '../actionbar/actionbar.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nimport { HistoryNavigator } from '../../../common/history.js';\r\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { domEvent } from '../../event.js';\r\nconst $ = dom.$;\r\nconst defaultOpts = {\r\n    inputBackground: Color.fromHex('#3C3C3C'),\r\n    inputForeground: Color.fromHex('#CCCCCC'),\r\n    inputValidationInfoBorder: Color.fromHex('#55AAFF'),\r\n    inputValidationInfoBackground: Color.fromHex('#063B49'),\r\n    inputValidationWarningBorder: Color.fromHex('#B89500'),\r\n    inputValidationWarningBackground: Color.fromHex('#352A05'),\r\n    inputValidationErrorBorder: Color.fromHex('#BE1100'),\r\n    inputValidationErrorBackground: Color.fromHex('#5A1D1D')\r\n};\r\nexport class InputBox extends Widget {\r\n    constructor(container, contextViewProvider, options) {\r\n        super();\r\n        this.state = 'idle';\r\n        this.maxHeight = Number.POSITIVE_INFINITY;\r\n        this._onDidChange = this._register(new Emitter());\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._onDidHeightChange = this._register(new Emitter());\r\n        this.onDidHeightChange = this._onDidHeightChange.event;\r\n        this.contextViewProvider = contextViewProvider;\r\n        this.options = options || Object.create(null);\r\n        mixin(this.options, defaultOpts, false);\r\n        this.message = null;\r\n        this.placeholder = this.options.placeholder || '';\r\n        this.ariaLabel = this.options.ariaLabel || '';\r\n        this.inputBackground = this.options.inputBackground;\r\n        this.inputForeground = this.options.inputForeground;\r\n        this.inputBorder = this.options.inputBorder;\r\n        this.inputValidationInfoBorder = this.options.inputValidationInfoBorder;\r\n        this.inputValidationInfoBackground = this.options.inputValidationInfoBackground;\r\n        this.inputValidationInfoForeground = this.options.inputValidationInfoForeground;\r\n        this.inputValidationWarningBorder = this.options.inputValidationWarningBorder;\r\n        this.inputValidationWarningBackground = this.options.inputValidationWarningBackground;\r\n        this.inputValidationWarningForeground = this.options.inputValidationWarningForeground;\r\n        this.inputValidationErrorBorder = this.options.inputValidationErrorBorder;\r\n        this.inputValidationErrorBackground = this.options.inputValidationErrorBackground;\r\n        this.inputValidationErrorForeground = this.options.inputValidationErrorForeground;\r\n        if (this.options.validationOptions) {\r\n            this.validation = this.options.validationOptions.validation;\r\n        }\r\n        this.element = dom.append(container, $('.monaco-inputbox.idle'));\r\n        let tagName = this.options.flexibleHeight ? 'textarea' : 'input';\r\n        let wrapper = dom.append(this.element, $('.ibwrapper'));\r\n        this.input = dom.append(wrapper, $(tagName + '.input.empty'));\r\n        this.input.setAttribute('autocorrect', 'off');\r\n        this.input.setAttribute('autocapitalize', 'off');\r\n        this.input.setAttribute('spellcheck', 'false');\r\n        this.onfocus(this.input, () => this.element.classList.add('synthetic-focus'));\r\n        this.onblur(this.input, () => this.element.classList.remove('synthetic-focus'));\r\n        if (this.options.flexibleHeight) {\r\n            this.maxHeight = typeof this.options.flexibleMaxHeight === 'number' ? this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\r\n            this.mirror = dom.append(wrapper, $('div.mirror'));\r\n            this.mirror.innerText = '\\u00a0';\r\n            this.scrollableElement = new ScrollableElement(this.element, { vertical: 1 /* Auto */ });\r\n            if (this.options.flexibleWidth) {\r\n                this.input.setAttribute('wrap', 'off');\r\n                this.mirror.style.whiteSpace = 'pre';\r\n                this.mirror.style.wordWrap = 'initial';\r\n            }\r\n            dom.append(container, this.scrollableElement.getDomNode());\r\n            this._register(this.scrollableElement);\r\n            // from ScrollableElement to DOM\r\n            this._register(this.scrollableElement.onScroll(e => this.input.scrollTop = e.scrollTop));\r\n            const onSelectionChange = Event.filter(domEvent(document, 'selectionchange'), () => {\r\n                const selection = document.getSelection();\r\n                return (selection === null || selection === void 0 ? void 0 : selection.anchorNode) === wrapper;\r\n            });\r\n            // from DOM to ScrollableElement\r\n            this._register(onSelectionChange(this.updateScrollDimensions, this));\r\n            this._register(this.onDidHeightChange(this.updateScrollDimensions, this));\r\n        }\r\n        else {\r\n            this.input.type = this.options.type || 'text';\r\n            this.input.setAttribute('wrap', 'off');\r\n        }\r\n        if (this.ariaLabel) {\r\n            this.input.setAttribute('aria-label', this.ariaLabel);\r\n        }\r\n        if (this.placeholder) {\r\n            this.setPlaceHolder(this.placeholder);\r\n        }\r\n        this.oninput(this.input, () => this.onValueChange());\r\n        this.onblur(this.input, () => this.onBlur());\r\n        this.onfocus(this.input, () => this.onFocus());\r\n        this.ignoreGesture(this.input);\r\n        setTimeout(() => this.updateMirror(), 0);\r\n        // Support actions\r\n        if (this.options.actions) {\r\n            this.actionbar = this._register(new ActionBar(this.element));\r\n            this.actionbar.push(this.options.actions, { icon: true, label: false });\r\n        }\r\n        this.applyStyles();\r\n    }\r\n    onBlur() {\r\n        this._hideMessage();\r\n    }\r\n    onFocus() {\r\n        this._showMessage();\r\n    }\r\n    setPlaceHolder(placeHolder) {\r\n        this.placeholder = placeHolder;\r\n        this.input.setAttribute('placeholder', placeHolder);\r\n        this.input.title = placeHolder;\r\n    }\r\n    setAriaLabel(label) {\r\n        this.ariaLabel = label;\r\n        if (label) {\r\n            this.input.setAttribute('aria-label', this.ariaLabel);\r\n        }\r\n        else {\r\n            this.input.removeAttribute('aria-label');\r\n        }\r\n    }\r\n    getAriaLabel() {\r\n        return this.ariaLabel;\r\n    }\r\n    get inputElement() {\r\n        return this.input;\r\n    }\r\n    get value() {\r\n        return this.input.value;\r\n    }\r\n    set value(newValue) {\r\n        if (this.input.value !== newValue) {\r\n            this.input.value = newValue;\r\n            this.onValueChange();\r\n        }\r\n    }\r\n    get height() {\r\n        return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\r\n    }\r\n    focus() {\r\n        this.input.focus();\r\n    }\r\n    blur() {\r\n        this.input.blur();\r\n    }\r\n    hasFocus() {\r\n        return document.activeElement === this.input;\r\n    }\r\n    select(range = null) {\r\n        this.input.select();\r\n        if (range) {\r\n            this.input.setSelectionRange(range.start, range.end);\r\n        }\r\n    }\r\n    isSelectionAtEnd() {\r\n        return this.input.selectionEnd === this.input.value.length && this.input.selectionStart === this.input.selectionEnd;\r\n    }\r\n    enable() {\r\n        this.input.removeAttribute('disabled');\r\n    }\r\n    disable() {\r\n        this.blur();\r\n        this.input.disabled = true;\r\n        this._hideMessage();\r\n    }\r\n    get width() {\r\n        return dom.getTotalWidth(this.input);\r\n    }\r\n    set width(width) {\r\n        if (this.options.flexibleHeight && this.options.flexibleWidth) {\r\n            // textarea with horizontal scrolling\r\n            let horizontalPadding = 0;\r\n            if (this.mirror) {\r\n                const paddingLeft = parseFloat(this.mirror.style.paddingLeft || '') || 0;\r\n                const paddingRight = parseFloat(this.mirror.style.paddingRight || '') || 0;\r\n                horizontalPadding = paddingLeft + paddingRight;\r\n            }\r\n            this.input.style.width = (width - horizontalPadding) + 'px';\r\n        }\r\n        else {\r\n            this.input.style.width = width + 'px';\r\n        }\r\n        if (this.mirror) {\r\n            this.mirror.style.width = width + 'px';\r\n        }\r\n    }\r\n    set paddingRight(paddingRight) {\r\n        if (this.options.flexibleHeight && this.options.flexibleWidth) {\r\n            this.input.style.width = `calc(100% - ${paddingRight}px)`;\r\n        }\r\n        else {\r\n            this.input.style.paddingRight = paddingRight + 'px';\r\n        }\r\n        if (this.mirror) {\r\n            this.mirror.style.paddingRight = paddingRight + 'px';\r\n        }\r\n    }\r\n    updateScrollDimensions() {\r\n        if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\r\n            return;\r\n        }\r\n        const scrollHeight = this.cachedContentHeight;\r\n        const height = this.cachedHeight;\r\n        const scrollTop = this.input.scrollTop;\r\n        this.scrollableElement.setScrollDimensions({ scrollHeight, height });\r\n        this.scrollableElement.setScrollPosition({ scrollTop });\r\n    }\r\n    showMessage(message, force) {\r\n        this.message = message;\r\n        this.element.classList.remove('idle');\r\n        this.element.classList.remove('info');\r\n        this.element.classList.remove('warning');\r\n        this.element.classList.remove('error');\r\n        this.element.classList.add(this.classForType(message.type));\r\n        const styles = this.stylesForType(this.message.type);\r\n        this.element.style.border = styles.border ? `1px solid ${styles.border}` : '';\r\n        if (this.hasFocus() || force) {\r\n            this._showMessage();\r\n        }\r\n    }\r\n    hideMessage() {\r\n        this.message = null;\r\n        this.element.classList.remove('info');\r\n        this.element.classList.remove('warning');\r\n        this.element.classList.remove('error');\r\n        this.element.classList.add('idle');\r\n        this._hideMessage();\r\n        this.applyStyles();\r\n    }\r\n    validate() {\r\n        let errorMsg = null;\r\n        if (this.validation) {\r\n            errorMsg = this.validation(this.value);\r\n            if (errorMsg) {\r\n                this.inputElement.setAttribute('aria-invalid', 'true');\r\n                this.showMessage(errorMsg);\r\n            }\r\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\r\n                this.inputElement.removeAttribute('aria-invalid');\r\n                this.hideMessage();\r\n            }\r\n        }\r\n        return errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.type;\r\n    }\r\n    stylesForType(type) {\r\n        switch (type) {\r\n            case 1 /* INFO */: return { border: this.inputValidationInfoBorder, background: this.inputValidationInfoBackground, foreground: this.inputValidationInfoForeground };\r\n            case 2 /* WARNING */: return { border: this.inputValidationWarningBorder, background: this.inputValidationWarningBackground, foreground: this.inputValidationWarningForeground };\r\n            default: return { border: this.inputValidationErrorBorder, background: this.inputValidationErrorBackground, foreground: this.inputValidationErrorForeground };\r\n        }\r\n    }\r\n    classForType(type) {\r\n        switch (type) {\r\n            case 1 /* INFO */: return 'info';\r\n            case 2 /* WARNING */: return 'warning';\r\n            default: return 'error';\r\n        }\r\n    }\r\n    _showMessage() {\r\n        if (!this.contextViewProvider || !this.message) {\r\n            return;\r\n        }\r\n        let div;\r\n        let layout = () => div.style.width = dom.getTotalWidth(this.element) + 'px';\r\n        this.contextViewProvider.showContextView({\r\n            getAnchor: () => this.element,\r\n            anchorAlignment: 1 /* RIGHT */,\r\n            render: (container) => {\r\n                if (!this.message) {\r\n                    return null;\r\n                }\r\n                div = dom.append(container, $('.monaco-inputbox-container'));\r\n                layout();\r\n                const renderOptions = {\r\n                    inline: true,\r\n                    className: 'monaco-inputbox-message'\r\n                };\r\n                const spanElement = (this.message.formatContent\r\n                    ? renderFormattedText(this.message.content, renderOptions)\r\n                    : renderText(this.message.content, renderOptions));\r\n                spanElement.classList.add(this.classForType(this.message.type));\r\n                const styles = this.stylesForType(this.message.type);\r\n                spanElement.style.backgroundColor = styles.background ? styles.background.toString() : '';\r\n                spanElement.style.color = styles.foreground ? styles.foreground.toString() : '';\r\n                spanElement.style.border = styles.border ? `1px solid ${styles.border}` : '';\r\n                dom.append(div, spanElement);\r\n                return null;\r\n            },\r\n            onHide: () => {\r\n                this.state = 'closed';\r\n            },\r\n            layout: layout\r\n        });\r\n        // ARIA Support\r\n        let alertText;\r\n        if (this.message.type === 3 /* ERROR */) {\r\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", this.message.content);\r\n        }\r\n        else if (this.message.type === 2 /* WARNING */) {\r\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", this.message.content);\r\n        }\r\n        else {\r\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", this.message.content);\r\n        }\r\n        aria.alert(alertText);\r\n        this.state = 'open';\r\n    }\r\n    _hideMessage() {\r\n        if (!this.contextViewProvider) {\r\n            return;\r\n        }\r\n        if (this.state === 'open') {\r\n            this.contextViewProvider.hideContextView();\r\n        }\r\n        this.state = 'idle';\r\n    }\r\n    onValueChange() {\r\n        this._onDidChange.fire(this.value);\r\n        this.validate();\r\n        this.updateMirror();\r\n        this.input.classList.toggle('empty', !this.value);\r\n        if (this.state === 'open' && this.contextViewProvider) {\r\n            this.contextViewProvider.layout();\r\n        }\r\n    }\r\n    updateMirror() {\r\n        if (!this.mirror) {\r\n            return;\r\n        }\r\n        const value = this.value;\r\n        const lastCharCode = value.charCodeAt(value.length - 1);\r\n        const suffix = lastCharCode === 10 ? ' ' : '';\r\n        const mirrorTextContent = value + suffix;\r\n        if (mirrorTextContent) {\r\n            this.mirror.textContent = value + suffix;\r\n        }\r\n        else {\r\n            this.mirror.innerText = '\\u00a0';\r\n        }\r\n        this.layout();\r\n    }\r\n    style(styles) {\r\n        this.inputBackground = styles.inputBackground;\r\n        this.inputForeground = styles.inputForeground;\r\n        this.inputBorder = styles.inputBorder;\r\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\r\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\r\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\r\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\r\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\r\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\r\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\r\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\r\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\r\n        this.applyStyles();\r\n    }\r\n    applyStyles() {\r\n        const background = this.inputBackground ? this.inputBackground.toString() : '';\r\n        const foreground = this.inputForeground ? this.inputForeground.toString() : '';\r\n        const border = this.inputBorder ? this.inputBorder.toString() : '';\r\n        this.element.style.backgroundColor = background;\r\n        this.element.style.color = foreground;\r\n        this.input.style.backgroundColor = 'inherit';\r\n        this.input.style.color = foreground;\r\n        this.element.style.borderWidth = border ? '1px' : '';\r\n        this.element.style.borderStyle = border ? 'solid' : '';\r\n        this.element.style.borderColor = border;\r\n    }\r\n    layout() {\r\n        if (!this.mirror) {\r\n            return;\r\n        }\r\n        const previousHeight = this.cachedContentHeight;\r\n        this.cachedContentHeight = dom.getTotalHeight(this.mirror);\r\n        if (previousHeight !== this.cachedContentHeight) {\r\n            this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\r\n            this.input.style.height = this.cachedHeight + 'px';\r\n            this._onDidHeightChange.fire(this.cachedContentHeight);\r\n        }\r\n    }\r\n    insertAtCursor(text) {\r\n        const inputElement = this.inputElement;\r\n        const start = inputElement.selectionStart;\r\n        const end = inputElement.selectionEnd;\r\n        const content = inputElement.value;\r\n        if (start !== null && end !== null) {\r\n            this.value = content.substr(0, start) + text + content.substr(end);\r\n            inputElement.setSelectionRange(start + 1, start + 1);\r\n            this.layout();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._hideMessage();\r\n        this.message = null;\r\n        if (this.actionbar) {\r\n            this.actionbar.dispose();\r\n        }\r\n        super.dispose();\r\n    }\r\n}\r\nexport class HistoryInputBox extends InputBox {\r\n    constructor(container, contextViewProvider, options) {\r\n        super(container, contextViewProvider, options);\r\n        this.history = new HistoryNavigator(options.history, 100);\r\n    }\r\n    addToHistory() {\r\n        if (this.value && this.value !== this.getCurrentValue()) {\r\n            this.history.add(this.value);\r\n        }\r\n    }\r\n    showNextValue() {\r\n        if (!this.history.has(this.value)) {\r\n            this.addToHistory();\r\n        }\r\n        let next = this.getNextValue();\r\n        if (next) {\r\n            next = next === this.value ? this.getNextValue() : next;\r\n        }\r\n        if (next) {\r\n            this.value = next;\r\n            aria.status(this.value);\r\n        }\r\n    }\r\n    showPreviousValue() {\r\n        if (!this.history.has(this.value)) {\r\n            this.addToHistory();\r\n        }\r\n        let previous = this.getPreviousValue();\r\n        if (previous) {\r\n            previous = previous === this.value ? this.getPreviousValue() : previous;\r\n        }\r\n        if (previous) {\r\n            this.value = previous;\r\n            aria.status(this.value);\r\n        }\r\n    }\r\n    getCurrentValue() {\r\n        let currentValue = this.history.current();\r\n        if (!currentValue) {\r\n            currentValue = this.history.last();\r\n            this.history.next();\r\n        }\r\n        return currentValue;\r\n    }\r\n    getPreviousValue() {\r\n        return this.history.previous() || this.history.first();\r\n    }\r\n    getNextValue() {\r\n        return this.history.next() || this.history.last();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}