{"ast":null,"code":"import _toConsumableArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport './media/quickInput.css';\nimport { NO_KEY_MODS, ItemActivation } from '../common/quickInput.js';\nimport * as dom from '../../../browser/dom.js';\nimport { CancellationToken } from '../../../common/cancellation.js';\nimport { QuickInputList, QuickInputListFocus } from './quickInputList.js';\nimport { QuickInputBox } from './quickInputBox.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { localize } from '../../../../nls.js';\nimport { CountBadge } from '../../../browser/ui/countBadge/countBadge.js';\nimport { ProgressBar } from '../../../browser/ui/progressbar/progressbar.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Button } from '../../../browser/ui/button/button.js';\nimport { dispose, Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport Severity from '../../../common/severity.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../common/actions.js';\nimport { equals } from '../../../common/arrays.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { registerCodicon, Codicon } from '../../../common/codicons.js';\nimport { escape } from '../../../common/strings.js';\nimport { renderLabelWithIcons } from '../../../browser/ui/iconLabel/iconLabels.js';\nvar $ = dom.$;\nvar backButtonIcon = registerCodicon('quick-input-back', Codicon.arrowLeft);\nvar backButton = {\n  iconClass: backButtonIcon.classNames,\n  tooltip: localize('quickInput.back', \"Back\"),\n  handle: -1 // TODO\n\n};\n\nvar QuickInput = /*#__PURE__*/function (_Disposable) {\n  _inherits(QuickInput, _Disposable);\n\n  var _super = _createSuper(QuickInput);\n\n  function QuickInput(ui) {\n    var _this;\n\n    _classCallCheck(this, QuickInput);\n\n    _this = _super.call(this);\n    _this.ui = ui;\n    _this.visible = false;\n    _this._enabled = true;\n    _this._busy = false;\n    _this._ignoreFocusOut = false;\n    _this._buttons = [];\n    _this.buttonsUpdated = false;\n    _this.onDidTriggerButtonEmitter = _this._register(new Emitter());\n    _this.onDidHideEmitter = _this._register(new Emitter());\n    _this.onDisposeEmitter = _this._register(new Emitter());\n    _this.visibleDisposables = _this._register(new DisposableStore());\n    _this.onDidHide = _this.onDidHideEmitter.event;\n    return _this;\n  }\n\n  _createClass(QuickInput, [{\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      if (this.visible) {\n        return;\n      }\n\n      this.visibleDisposables.add(this.ui.onDidTriggerButton(function (button) {\n        if (_this2.buttons.indexOf(button) !== -1) {\n          _this2.onDidTriggerButtonEmitter.fire(button);\n        }\n      }));\n      this.ui.show(this);\n      this.visible = true;\n      this.update();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      if (!this.visible) {\n        return;\n      }\n\n      this.ui.hide();\n    }\n  }, {\n    key: \"didHide\",\n    value: function didHide() {\n      this.visible = false;\n      this.visibleDisposables.clear();\n      this.onDidHideEmitter.fire();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this3 = this;\n\n      if (!this.visible) {\n        return;\n      }\n\n      var title = this.getTitle();\n\n      if (title && this.ui.title.textContent !== title) {\n        this.ui.title.textContent = title;\n      } else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\n        this.ui.title.innerText = \"\\xA0;\";\n      }\n\n      var description = this.getDescription();\n\n      if (this.ui.description1.textContent !== description) {\n        this.ui.description1.textContent = description;\n      }\n\n      if (this.ui.description2.textContent !== description) {\n        this.ui.description2.textContent = description;\n      }\n\n      if (this.busy && !this.busyDelay) {\n        this.busyDelay = new TimeoutTimer();\n        this.busyDelay.setIfNotSet(function () {\n          if (_this3.visible) {\n            _this3.ui.progressBar.infinite();\n          }\n        }, 800);\n      }\n\n      if (!this.busy && this.busyDelay) {\n        this.ui.progressBar.stop();\n        this.busyDelay.cancel();\n        this.busyDelay = undefined;\n      }\n\n      if (this.buttonsUpdated) {\n        this.buttonsUpdated = false;\n        this.ui.leftActionBar.clear();\n        var leftButtons = this.buttons.filter(function (button) {\n          return button === backButton;\n        });\n        this.ui.leftActionBar.push(leftButtons.map(function (button, index) {\n          var action = new Action(\"id-\".concat(index), '', button.iconClass || getIconClass(button.iconPath), true, function () {\n            return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      this.onDidTriggerButtonEmitter.fire(button);\n\n                    case 1:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee, this);\n            }));\n          });\n          action.tooltip = button.tooltip || '';\n          return action;\n        }), {\n          icon: true,\n          label: false\n        });\n        this.ui.rightActionBar.clear();\n        var rightButtons = this.buttons.filter(function (button) {\n          return button !== backButton;\n        });\n        this.ui.rightActionBar.push(rightButtons.map(function (button, index) {\n          var action = new Action(\"id-\".concat(index), '', button.iconClass || getIconClass(button.iconPath), true, function () {\n            return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      this.onDidTriggerButtonEmitter.fire(button);\n\n                    case 1:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2, this);\n            }));\n          });\n          action.tooltip = button.tooltip || '';\n          return action;\n        }), {\n          icon: true,\n          label: false\n        });\n      }\n\n      this.ui.ignoreFocusOut = this.ignoreFocusOut;\n      this.ui.setEnabled(this.enabled);\n      this.ui.setContextKey(this.contextKey);\n    }\n  }, {\n    key: \"getTitle\",\n    value: function getTitle() {\n      if (this.title && this.step) {\n        return \"\".concat(this.title, \" (\").concat(this.getSteps(), \")\");\n      }\n\n      if (this.title) {\n        return this.title;\n      }\n\n      if (this.step) {\n        return this.getSteps();\n      }\n\n      return '';\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.description || '';\n    }\n  }, {\n    key: \"getSteps\",\n    value: function getSteps() {\n      if (this.step && this.totalSteps) {\n        return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n      }\n\n      if (this.step) {\n        return String(this.step);\n      }\n\n      return '';\n    }\n  }, {\n    key: \"showMessageDecoration\",\n    value: function showMessageDecoration(severity) {\n      this.ui.inputBox.showDecoration(severity);\n\n      if (severity === Severity.Error) {\n        var styles = this.ui.inputBox.stylesForType(severity);\n        this.ui.message.style.color = styles.foreground ? \"\".concat(styles.foreground) : '';\n        this.ui.message.style.backgroundColor = styles.background ? \"\".concat(styles.background) : '';\n        this.ui.message.style.border = styles.border ? \"1px solid \".concat(styles.border) : '';\n        this.ui.message.style.paddingBottom = '4px';\n      } else {\n        this.ui.message.style.color = '';\n        this.ui.message.style.backgroundColor = '';\n        this.ui.message.style.border = '';\n        this.ui.message.style.paddingBottom = '';\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.hide();\n      this.onDisposeEmitter.fire();\n\n      _get(_getPrototypeOf(QuickInput.prototype), \"dispose\", this).call(this);\n    }\n  }, {\n    key: \"title\",\n    get: function get() {\n      return this._title;\n    },\n    set: function set(title) {\n      this._title = title;\n      this.update();\n    }\n  }, {\n    key: \"description\",\n    get: function get() {\n      return this._description;\n    },\n    set: function set(description) {\n      this._description = description;\n      this.update();\n    }\n  }, {\n    key: \"step\",\n    get: function get() {\n      return this._steps;\n    },\n    set: function set(step) {\n      this._steps = step;\n      this.update();\n    }\n  }, {\n    key: \"totalSteps\",\n    get: function get() {\n      return this._totalSteps;\n    },\n    set: function set(totalSteps) {\n      this._totalSteps = totalSteps;\n      this.update();\n    }\n  }, {\n    key: \"enabled\",\n    get: function get() {\n      return this._enabled;\n    },\n    set: function set(enabled) {\n      this._enabled = enabled;\n      this.update();\n    }\n  }, {\n    key: \"contextKey\",\n    get: function get() {\n      return this._contextKey;\n    },\n    set: function set(contextKey) {\n      this._contextKey = contextKey;\n      this.update();\n    }\n  }, {\n    key: \"busy\",\n    get: function get() {\n      return this._busy;\n    },\n    set: function set(busy) {\n      this._busy = busy;\n      this.update();\n    }\n  }, {\n    key: \"ignoreFocusOut\",\n    get: function get() {\n      return this._ignoreFocusOut;\n    },\n    set: function set(ignoreFocusOut) {\n      this._ignoreFocusOut = ignoreFocusOut;\n      this.update();\n    }\n  }, {\n    key: \"buttons\",\n    get: function get() {\n      return this._buttons;\n    },\n    set: function set(buttons) {\n      this._buttons = buttons;\n      this.buttonsUpdated = true;\n      this.update();\n    }\n  }]);\n\n  return QuickInput;\n}(Disposable);\n\nvar QuickPick = /*#__PURE__*/function (_QuickInput) {\n  _inherits(QuickPick, _QuickInput);\n\n  var _super2 = _createSuper(QuickPick);\n\n  function QuickPick() {\n    var _this4;\n\n    _classCallCheck(this, QuickPick);\n\n    _this4 = _super2.apply(this, arguments);\n    _this4._value = '';\n    _this4.onDidChangeValueEmitter = _this4._register(new Emitter());\n    _this4.onDidAcceptEmitter = _this4._register(new Emitter());\n    _this4.onDidCustomEmitter = _this4._register(new Emitter());\n    _this4._items = [];\n    _this4.itemsUpdated = false;\n    _this4._canSelectMany = false;\n    _this4._canAcceptInBackground = false;\n    _this4._matchOnDescription = false;\n    _this4._matchOnDetail = false;\n    _this4._matchOnLabel = true;\n    _this4._sortByLabel = true;\n    _this4._autoFocusOnList = true;\n    _this4._itemActivation = _this4.ui.isScreenReaderOptimized() ? ItemActivation.NONE\n    /* https://github.com/microsoft/vscode/issues/57501 */\n    : ItemActivation.FIRST;\n    _this4._activeItems = [];\n    _this4.activeItemsUpdated = false;\n    _this4.activeItemsToConfirm = [];\n    _this4.onDidChangeActiveEmitter = _this4._register(new Emitter());\n    _this4._selectedItems = [];\n    _this4.selectedItemsUpdated = false;\n    _this4.selectedItemsToConfirm = [];\n    _this4.onDidChangeSelectionEmitter = _this4._register(new Emitter());\n    _this4.onDidTriggerItemButtonEmitter = _this4._register(new Emitter());\n    _this4.valueSelectionUpdated = true;\n    _this4._ok = 'default';\n    _this4._customButton = false;\n\n    _this4.filterValue = function (value) {\n      return value;\n    };\n\n    _this4.onDidChangeValue = _this4.onDidChangeValueEmitter.event;\n    _this4.onDidAccept = _this4.onDidAcceptEmitter.event;\n    _this4.onDidChangeActive = _this4.onDidChangeActiveEmitter.event;\n    _this4.onDidChangeSelection = _this4.onDidChangeSelectionEmitter.event;\n    _this4.onDidTriggerItemButton = _this4.onDidTriggerItemButtonEmitter.event;\n    return _this4;\n  }\n\n  _createClass(QuickPick, [{\n    key: \"trySelectFirst\",\n    value: function trySelectFirst() {\n      if (this.autoFocusOnList) {\n        if (!this.canSelectMany) {\n          this.ui.list.focus(QuickInputListFocus.First);\n        }\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this5 = this;\n\n      if (!this.visible) {\n        this.visibleDisposables.add(this.ui.inputBox.onDidChange(function (value) {\n          if (value === _this5.value) {\n            return;\n          }\n\n          _this5._value = value;\n\n          var didFilter = _this5.ui.list.filter(_this5.filterValue(_this5.ui.inputBox.value));\n\n          if (didFilter) {\n            _this5.trySelectFirst();\n          }\n\n          _this5.onDidChangeValueEmitter.fire(value);\n        }));\n        this.visibleDisposables.add(this.ui.inputBox.onMouseDown(function (event) {\n          if (!_this5.autoFocusOnList) {\n            _this5.ui.list.clearFocus();\n          }\n        }));\n        this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown(function (event) {\n          switch (event.keyCode) {\n            case 18\n            /* DownArrow */\n            :\n              _this5.ui.list.focus(QuickInputListFocus.Next);\n\n              if (_this5.canSelectMany) {\n                _this5.ui.list.domFocus();\n              }\n\n              dom.EventHelper.stop(event, true);\n              break;\n\n            case 16\n            /* UpArrow */\n            :\n              if (_this5.ui.list.getFocusedElements().length) {\n                _this5.ui.list.focus(QuickInputListFocus.Previous);\n              } else {\n                _this5.ui.list.focus(QuickInputListFocus.Last);\n              }\n\n              if (_this5.canSelectMany) {\n                _this5.ui.list.domFocus();\n              }\n\n              dom.EventHelper.stop(event, true);\n              break;\n\n            case 12\n            /* PageDown */\n            :\n              _this5.ui.list.focus(QuickInputListFocus.NextPage);\n\n              if (_this5.canSelectMany) {\n                _this5.ui.list.domFocus();\n              }\n\n              dom.EventHelper.stop(event, true);\n              break;\n\n            case 11\n            /* PageUp */\n            :\n              _this5.ui.list.focus(QuickInputListFocus.PreviousPage);\n\n              if (_this5.canSelectMany) {\n                _this5.ui.list.domFocus();\n              }\n\n              dom.EventHelper.stop(event, true);\n              break;\n\n            case 17\n            /* RightArrow */\n            :\n              if (!_this5._canAcceptInBackground) {\n                return; // needs to be enabled\n              }\n\n              if (!_this5.ui.inputBox.isSelectionAtEnd()) {\n                return; // ensure input box selection at end\n              }\n\n              if (_this5.activeItems[0]) {\n                _this5._selectedItems = [_this5.activeItems[0]];\n\n                _this5.onDidChangeSelectionEmitter.fire(_this5.selectedItems);\n\n                _this5.onDidAcceptEmitter.fire({\n                  inBackground: true\n                });\n              }\n\n              break;\n\n            case 14\n            /* Home */\n            :\n              if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                _this5.ui.list.focus(QuickInputListFocus.First);\n\n                dom.EventHelper.stop(event, true);\n              }\n\n              break;\n\n            case 13\n            /* End */\n            :\n              if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                _this5.ui.list.focus(QuickInputListFocus.Last);\n\n                dom.EventHelper.stop(event, true);\n              }\n\n              break;\n          }\n        }));\n        this.visibleDisposables.add(this.ui.onDidAccept(function () {\n          if (!_this5.canSelectMany && _this5.activeItems[0]) {\n            _this5._selectedItems = [_this5.activeItems[0]];\n\n            _this5.onDidChangeSelectionEmitter.fire(_this5.selectedItems);\n          }\n\n          _this5.onDidAcceptEmitter.fire({\n            inBackground: false\n          });\n        }));\n        this.visibleDisposables.add(this.ui.onDidCustom(function () {\n          _this5.onDidCustomEmitter.fire();\n        }));\n        this.visibleDisposables.add(this.ui.list.onDidChangeFocus(function (focusedItems) {\n          if (_this5.activeItemsUpdated) {\n            return; // Expect another event.\n          }\n\n          if (_this5.activeItemsToConfirm !== _this5._activeItems && equals(focusedItems, _this5._activeItems, function (a, b) {\n            return a === b;\n          })) {\n            return;\n          }\n\n          _this5._activeItems = focusedItems;\n\n          _this5.onDidChangeActiveEmitter.fire(focusedItems);\n        }));\n        this.visibleDisposables.add(this.ui.list.onDidChangeSelection(function (_ref) {\n          var selectedItems = _ref.items,\n              event = _ref.event;\n\n          if (_this5.canSelectMany) {\n            if (selectedItems.length) {\n              _this5.ui.list.setSelectedElements([]);\n            }\n\n            return;\n          }\n\n          if (_this5.selectedItemsToConfirm !== _this5._selectedItems && equals(selectedItems, _this5._selectedItems, function (a, b) {\n            return a === b;\n          })) {\n            return;\n          }\n\n          _this5._selectedItems = selectedItems;\n\n          _this5.onDidChangeSelectionEmitter.fire(selectedItems);\n\n          if (selectedItems.length) {\n            _this5.onDidAcceptEmitter.fire({\n              inBackground: event instanceof MouseEvent && event.button === 1\n              /* mouse middle click */\n\n            });\n          }\n        }));\n        this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(function (checkedItems) {\n          if (!_this5.canSelectMany) {\n            return;\n          }\n\n          if (_this5.selectedItemsToConfirm !== _this5._selectedItems && equals(checkedItems, _this5._selectedItems, function (a, b) {\n            return a === b;\n          })) {\n            return;\n          }\n\n          _this5._selectedItems = checkedItems;\n\n          _this5.onDidChangeSelectionEmitter.fire(checkedItems);\n        }));\n        this.visibleDisposables.add(this.ui.list.onButtonTriggered(function (event) {\n          return _this5.onDidTriggerItemButtonEmitter.fire(event);\n        }));\n        this.visibleDisposables.add(this.registerQuickNavigation());\n        this.valueSelectionUpdated = true;\n      }\n\n      _get(_getPrototypeOf(QuickPick.prototype), \"show\", this).call(this); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\n\n    }\n  }, {\n    key: \"registerQuickNavigation\",\n    value: function registerQuickNavigation() {\n      var _this6 = this;\n\n      return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, function (e) {\n        if (_this6.canSelectMany || !_this6._quickNavigate) {\n          return;\n        }\n\n        var keyboardEvent = new StandardKeyboardEvent(e);\n        var keyCode = keyboardEvent.keyCode; // Select element when keys are pressed that signal it\n\n        var quickNavKeys = _this6._quickNavigate.keybindings;\n        var wasTriggerKeyPressed = quickNavKeys.some(function (k) {\n          var _k$getParts = k.getParts(),\n              _k$getParts2 = _slicedToArray(_k$getParts, 2),\n              firstPart = _k$getParts2[0],\n              chordPart = _k$getParts2[1];\n\n          if (chordPart) {\n            return false;\n          }\n\n          if (firstPart.shiftKey && keyCode === 4\n          /* Shift */\n          ) {\n              if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n                return false; // this is an optimistic check for the shift key being used to navigate back in quick input\n              }\n\n              return true;\n            }\n\n          if (firstPart.altKey && keyCode === 6\n          /* Alt */\n          ) {\n              return true;\n            }\n\n          if (firstPart.ctrlKey && keyCode === 5\n          /* Ctrl */\n          ) {\n              return true;\n            }\n\n          if (firstPart.metaKey && keyCode === 57\n          /* Meta */\n          ) {\n              return true;\n            }\n\n          return false;\n        });\n\n        if (wasTriggerKeyPressed) {\n          if (_this6.activeItems[0]) {\n            _this6._selectedItems = [_this6.activeItems[0]];\n\n            _this6.onDidChangeSelectionEmitter.fire(_this6.selectedItems);\n\n            _this6.onDidAcceptEmitter.fire({\n              inBackground: false\n            });\n          } // Unset quick navigate after press. It is only valid once\n          // and should not result in any behaviour change afterwards\n          // if the picker remains open because there was no active item\n\n\n          _this6._quickNavigate = undefined;\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this.visible) {\n        return;\n      }\n\n      var hideInput = false;\n      var inputShownJustForScreenReader = false;\n\n      if (!!this._hideInput && this._items.length > 0) {\n        if (this.ui.isScreenReaderOptimized()) {\n          // Always show input if screen reader attached https://github.com/microsoft/vscode/issues/94360\n          inputShownJustForScreenReader = true;\n        } else {\n          hideInput = true;\n        }\n      }\n\n      this.ui.container.classList.toggle('hidden-input', hideInput && !this.description);\n      var visibilities = {\n        title: !!this.title || !!this.step || !!this.buttons.length,\n        description: !!this.description,\n        checkAll: this.canSelectMany && !this._hideCheckAll,\n        checkBox: this.canSelectMany,\n        inputBox: !hideInput,\n        progressBar: !hideInput,\n        visibleCount: true,\n        count: this.canSelectMany,\n        ok: this.ok === 'default' ? this.canSelectMany : this.ok,\n        list: true,\n        message: !!this.validationMessage,\n        customButton: this.customButton\n      };\n      this.ui.setVisibilities(visibilities);\n\n      _get(_getPrototypeOf(QuickPick.prototype), \"update\", this).call(this);\n\n      if (this.ui.inputBox.value !== this.value) {\n        this.ui.inputBox.value = this.value;\n      }\n\n      if (this.valueSelectionUpdated) {\n        this.valueSelectionUpdated = false;\n        this.ui.inputBox.select(this._valueSelection && {\n          start: this._valueSelection[0],\n          end: this._valueSelection[1]\n        });\n      }\n\n      if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n        this.ui.inputBox.placeholder = this.placeholder || '';\n      }\n\n      if (inputShownJustForScreenReader) {\n        this.ui.inputBox.ariaLabel = '';\n      } else {\n        var ariaLabel = this.ariaLabel || this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\n\n        if (this.ui.inputBox.ariaLabel !== ariaLabel) {\n          this.ui.inputBox.ariaLabel = ariaLabel;\n        }\n      }\n\n      this.ui.list.matchOnDescription = this.matchOnDescription;\n      this.ui.list.matchOnDetail = this.matchOnDetail;\n      this.ui.list.matchOnLabel = this.matchOnLabel;\n      this.ui.list.sortByLabel = this.sortByLabel;\n\n      if (this.itemsUpdated) {\n        this.itemsUpdated = false;\n        this.ui.list.setElements(this.items);\n        this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\n        this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n        this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n        this.ui.count.setCount(this.ui.list.getCheckedCount());\n\n        switch (this._itemActivation) {\n          case ItemActivation.NONE:\n            this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n\n            break;\n\n          case ItemActivation.SECOND:\n            this.ui.list.focus(QuickInputListFocus.Second);\n            this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n\n            break;\n\n          case ItemActivation.LAST:\n            this.ui.list.focus(QuickInputListFocus.Last);\n            this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n\n            break;\n\n          default:\n            this.trySelectFirst();\n            break;\n        }\n      }\n\n      if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n        if (this.canSelectMany) {\n          this.ui.list.clearFocus();\n        } else {\n          this.trySelectFirst();\n        }\n      }\n\n      if (this.activeItemsUpdated) {\n        this.activeItemsUpdated = false;\n        this.activeItemsToConfirm = this._activeItems;\n        this.ui.list.setFocusedElements(this.activeItems);\n\n        if (this.activeItemsToConfirm === this._activeItems) {\n          this.activeItemsToConfirm = null;\n        }\n      }\n\n      if (this.selectedItemsUpdated) {\n        this.selectedItemsUpdated = false;\n        this.selectedItemsToConfirm = this._selectedItems;\n\n        if (this.canSelectMany) {\n          this.ui.list.setCheckedElements(this.selectedItems);\n        } else {\n          this.ui.list.setSelectedElements(this.selectedItems);\n        }\n\n        if (this.selectedItemsToConfirm === this._selectedItems) {\n          this.selectedItemsToConfirm = null;\n        }\n      }\n\n      var validationMessage = this.validationMessage || '';\n\n      if (this._lastValidationMessage !== validationMessage) {\n        this._lastValidationMessage = validationMessage;\n        dom.reset.apply(dom, [this.ui.message].concat(_toConsumableArray(renderLabelWithIcons(escape(validationMessage)))));\n        this.showMessageDecoration(this.validationMessage ? Severity.Error : Severity.Ignore);\n      }\n\n      this.ui.customButton.label = this.customLabel || '';\n      this.ui.customButton.element.title = this.customHover || '';\n      this.ui.setComboboxAccessibility(true);\n\n      if (!visibilities.inputBox) {\n        // we need to move focus into the tree to detect keybindings\n        // properly when the input box is not visible (quick nav)\n        this.ui.list.domFocus(); // Focus the first element in the list if multiselect is enabled\n\n        if (this.canSelectMany) {\n          this.ui.list.focus(QuickInputListFocus.First);\n        }\n      }\n    }\n  }, {\n    key: \"quickNavigate\",\n    get: function get() {\n      return this._quickNavigate;\n    },\n    set: function set(quickNavigate) {\n      this._quickNavigate = quickNavigate;\n      this.update();\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    },\n    set: function set(value) {\n      this._value = value || '';\n      this.update();\n    }\n  }, {\n    key: \"ariaLabel\",\n    set: function set(ariaLabel) {\n      this._ariaLabel = ariaLabel;\n      this.update();\n    },\n    get: function get() {\n      return this._ariaLabel;\n    }\n  }, {\n    key: \"placeholder\",\n    get: function get() {\n      return this._placeholder;\n    },\n    set: function set(placeholder) {\n      this._placeholder = placeholder;\n      this.update();\n    }\n  }, {\n    key: \"items\",\n    get: function get() {\n      return this._items;\n    },\n    set: function set(items) {\n      this._items = items;\n      this.itemsUpdated = true;\n      this.update();\n    }\n  }, {\n    key: \"canSelectMany\",\n    get: function get() {\n      return this._canSelectMany;\n    },\n    set: function set(canSelectMany) {\n      this._canSelectMany = canSelectMany;\n      this.update();\n    }\n  }, {\n    key: \"canAcceptInBackground\",\n    get: function get() {\n      return this._canAcceptInBackground;\n    },\n    set: function set(canAcceptInBackground) {\n      this._canAcceptInBackground = canAcceptInBackground;\n    }\n  }, {\n    key: \"matchOnDescription\",\n    get: function get() {\n      return this._matchOnDescription;\n    },\n    set: function set(matchOnDescription) {\n      this._matchOnDescription = matchOnDescription;\n      this.update();\n    }\n  }, {\n    key: \"matchOnDetail\",\n    get: function get() {\n      return this._matchOnDetail;\n    },\n    set: function set(matchOnDetail) {\n      this._matchOnDetail = matchOnDetail;\n      this.update();\n    }\n  }, {\n    key: \"matchOnLabel\",\n    get: function get() {\n      return this._matchOnLabel;\n    },\n    set: function set(matchOnLabel) {\n      this._matchOnLabel = matchOnLabel;\n      this.update();\n    }\n  }, {\n    key: \"sortByLabel\",\n    get: function get() {\n      return this._sortByLabel;\n    },\n    set: function set(sortByLabel) {\n      this._sortByLabel = sortByLabel;\n      this.update();\n    }\n  }, {\n    key: \"autoFocusOnList\",\n    get: function get() {\n      return this._autoFocusOnList;\n    },\n    set: function set(autoFocusOnList) {\n      this._autoFocusOnList = autoFocusOnList;\n      this.update();\n    }\n  }, {\n    key: \"itemActivation\",\n    get: function get() {\n      return this._itemActivation;\n    },\n    set: function set(itemActivation) {\n      this._itemActivation = itemActivation;\n    }\n  }, {\n    key: \"activeItems\",\n    get: function get() {\n      return this._activeItems;\n    },\n    set: function set(activeItems) {\n      this._activeItems = activeItems;\n      this.activeItemsUpdated = true;\n      this.update();\n    }\n  }, {\n    key: \"selectedItems\",\n    get: function get() {\n      return this._selectedItems;\n    },\n    set: function set(selectedItems) {\n      this._selectedItems = selectedItems;\n      this.selectedItemsUpdated = true;\n      this.update();\n    }\n  }, {\n    key: \"keyMods\",\n    get: function get() {\n      if (this._quickNavigate) {\n        // Disable keyMods when quick navigate is enabled\n        // because in this model the interaction is purely\n        // keyboard driven and Ctrl/Alt are typically\n        // pressed and hold during this interaction.\n        return NO_KEY_MODS;\n      }\n\n      return this.ui.keyMods;\n    }\n  }, {\n    key: \"valueSelection\",\n    set: function set(valueSelection) {\n      this._valueSelection = valueSelection;\n      this.valueSelectionUpdated = true;\n      this.update();\n    }\n  }, {\n    key: \"validationMessage\",\n    get: function get() {\n      return this._validationMessage;\n    },\n    set: function set(validationMessage) {\n      this._validationMessage = validationMessage;\n      this.update();\n    }\n  }, {\n    key: \"customButton\",\n    get: function get() {\n      return this._customButton;\n    },\n    set: function set(showCustomButton) {\n      this._customButton = showCustomButton;\n      this.update();\n    }\n  }, {\n    key: \"customLabel\",\n    get: function get() {\n      return this._customButtonLabel;\n    },\n    set: function set(label) {\n      this._customButtonLabel = label;\n      this.update();\n    }\n  }, {\n    key: \"customHover\",\n    get: function get() {\n      return this._customButtonHover;\n    },\n    set: function set(hover) {\n      this._customButtonHover = hover;\n      this.update();\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    },\n    set: function set(showOkButton) {\n      this._ok = showOkButton;\n      this.update();\n    }\n  }, {\n    key: \"hideInput\",\n    get: function get() {\n      return !!this._hideInput;\n    },\n    set: function set(hideInput) {\n      this._hideInput = hideInput;\n      this.update();\n    }\n  }]);\n\n  return QuickPick;\n}(QuickInput);\n\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\nexport var QuickInputController = /*#__PURE__*/function (_Disposable2) {\n  _inherits(QuickInputController, _Disposable2);\n\n  var _super3 = _createSuper(QuickInputController);\n\n  function QuickInputController(options) {\n    var _this7;\n\n    _classCallCheck(this, QuickInputController);\n\n    _this7 = _super3.call(this);\n    _this7.options = options;\n    _this7.comboboxAccessibility = false;\n    _this7.enabled = true;\n    _this7.onDidAcceptEmitter = _this7._register(new Emitter());\n    _this7.onDidCustomEmitter = _this7._register(new Emitter());\n    _this7.onDidTriggerButtonEmitter = _this7._register(new Emitter());\n    _this7.keyMods = {\n      ctrlCmd: false,\n      alt: false\n    };\n    _this7.controller = null;\n    _this7.onShowEmitter = _this7._register(new Emitter());\n    _this7.onShow = _this7.onShowEmitter.event;\n    _this7.onHideEmitter = _this7._register(new Emitter());\n    _this7.onHide = _this7.onHideEmitter.event;\n    _this7.idPrefix = options.idPrefix;\n    _this7.parentElement = options.container;\n    _this7.styles = options.styles;\n\n    _this7.registerKeyModsListeners();\n\n    return _this7;\n  }\n\n  _createClass(QuickInputController, [{\n    key: \"registerKeyModsListeners\",\n    value: function registerKeyModsListeners() {\n      var _this8 = this;\n\n      var listener = function listener(e) {\n        _this8.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\n        _this8.keyMods.alt = e.altKey;\n      };\n\n      this._register(dom.addDisposableListener(window, dom.EventType.KEY_DOWN, listener, true));\n\n      this._register(dom.addDisposableListener(window, dom.EventType.KEY_UP, listener, true));\n\n      this._register(dom.addDisposableListener(window, dom.EventType.MOUSE_DOWN, listener, true));\n    }\n  }, {\n    key: \"getUI\",\n    value: function getUI() {\n      var _this9 = this;\n\n      if (this.ui) {\n        return this.ui;\n      }\n\n      var container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\n      container.tabIndex = -1;\n      container.style.display = 'none';\n      var styleSheet = dom.createStyleSheet(container);\n      var titleBar = dom.append(container, $('.quick-input-titlebar'));\n\n      var leftActionBar = this._register(new ActionBar(titleBar));\n\n      leftActionBar.domNode.classList.add('quick-input-left-action-bar');\n      var title = dom.append(titleBar, $('.quick-input-title'));\n\n      var rightActionBar = this._register(new ActionBar(titleBar));\n\n      rightActionBar.domNode.classList.add('quick-input-right-action-bar');\n      var description1 = dom.append(container, $('.quick-input-description'));\n      var headerContainer = dom.append(container, $('.quick-input-header'));\n      var checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\n      checkAll.type = 'checkbox';\n\n      this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, function (e) {\n        var checked = checkAll.checked;\n        list.setAllVisibleChecked(checked);\n      }));\n\n      this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, function (e) {\n        if (e.x || e.y) {\n          // Avoid 'click' triggered by 'space'...\n          inputBox.setFocus();\n        }\n      }));\n\n      var description2 = dom.append(headerContainer, $('.quick-input-description'));\n      var extraContainer = dom.append(headerContainer, $('.quick-input-and-message'));\n      var filterContainer = dom.append(extraContainer, $('.quick-input-filter'));\n\n      var inputBox = this._register(new QuickInputBox(filterContainer));\n\n      inputBox.setAttribute('aria-describedby', \"\".concat(this.idPrefix, \"message\"));\n      var visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\n      visibleCountContainer.setAttribute('aria-live', 'polite');\n      visibleCountContainer.setAttribute('aria-atomic', 'true');\n      var visibleCount = new CountBadge(visibleCountContainer, {\n        countFormat: localize({\n          key: 'quickInput.visibleCount',\n          comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.']\n        }, \"{0} Results\")\n      });\n      var countContainer = dom.append(filterContainer, $('.quick-input-count'));\n      countContainer.setAttribute('aria-live', 'polite');\n      var count = new CountBadge(countContainer, {\n        countFormat: localize({\n          key: 'quickInput.countSelected',\n          comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.']\n        }, \"{0} Selected\")\n      });\n      var okContainer = dom.append(headerContainer, $('.quick-input-action'));\n      var ok = new Button(okContainer);\n      ok.label = localize('ok', \"OK\");\n\n      this._register(ok.onDidClick(function (e) {\n        _this9.onDidAcceptEmitter.fire();\n      }));\n\n      var customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\n      var customButton = new Button(customButtonContainer);\n      customButton.label = localize('custom', \"Custom\");\n\n      this._register(customButton.onDidClick(function (e) {\n        _this9.onDidCustomEmitter.fire();\n      }));\n\n      var message = dom.append(extraContainer, $(\"#\".concat(this.idPrefix, \"message.quick-input-message\")));\n      var progressBar = new ProgressBar(container);\n      progressBar.getContainer().classList.add('quick-input-progress');\n\n      var list = this._register(new QuickInputList(container, this.idPrefix + 'list', this.options));\n\n      this._register(list.onChangedAllVisibleChecked(function (checked) {\n        checkAll.checked = checked;\n      }));\n\n      this._register(list.onChangedVisibleCount(function (c) {\n        visibleCount.setCount(c);\n      }));\n\n      this._register(list.onChangedCheckedCount(function (c) {\n        count.setCount(c);\n      }));\n\n      this._register(list.onLeave(function () {\n        // Defer to avoid the input field reacting to the triggering key.\n        setTimeout(function () {\n          inputBox.setFocus();\n\n          if (_this9.controller instanceof QuickPick && _this9.controller.canSelectMany) {\n            list.clearFocus();\n          }\n        }, 0);\n      }));\n\n      this._register(list.onDidChangeFocus(function () {\n        if (_this9.comboboxAccessibility) {\n          _this9.getUI().inputBox.setAttribute('aria-activedescendant', _this9.getUI().list.getActiveDescendant() || '');\n        }\n      }));\n\n      var focusTracker = dom.trackFocus(container);\n\n      this._register(focusTracker);\n\n      this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, function (e) {\n        _this9.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\n      }, true));\n\n      this._register(focusTracker.onDidBlur(function () {\n        if (!_this9.getUI().ignoreFocusOut && !_this9.options.ignoreFocusOut()) {\n          _this9.hide();\n        }\n\n        _this9.previousFocusElement = undefined;\n      }));\n\n      this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, function (e) {\n        inputBox.setFocus();\n      }));\n\n      this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, function (e) {\n        var event = new StandardKeyboardEvent(e);\n\n        switch (event.keyCode) {\n          case 3\n          /* Enter */\n          :\n            dom.EventHelper.stop(e, true);\n\n            _this9.onDidAcceptEmitter.fire();\n\n            break;\n\n          case 9\n          /* Escape */\n          :\n            dom.EventHelper.stop(e, true);\n\n            _this9.hide();\n\n            break;\n\n          case 2\n          /* Tab */\n          :\n            if (!event.altKey && !event.ctrlKey && !event.metaKey) {\n              var selectors = ['.action-label.codicon'];\n\n              if (container.classList.contains('show-checkboxes')) {\n                selectors.push('input');\n              } else {\n                selectors.push('input[type=text]');\n              }\n\n              if (_this9.getUI().list.isDisplayed()) {\n                selectors.push('.monaco-list');\n              }\n\n              var stops = container.querySelectorAll(selectors.join(', '));\n\n              if (event.shiftKey && event.target === stops[0]) {\n                dom.EventHelper.stop(e, true);\n                stops[stops.length - 1].focus();\n              } else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\n                dom.EventHelper.stop(e, true);\n                stops[0].focus();\n              }\n            }\n\n            break;\n        }\n      }));\n\n      this.ui = {\n        container: container,\n        styleSheet: styleSheet,\n        leftActionBar: leftActionBar,\n        titleBar: titleBar,\n        title: title,\n        description1: description1,\n        description2: description2,\n        rightActionBar: rightActionBar,\n        checkAll: checkAll,\n        filterContainer: filterContainer,\n        inputBox: inputBox,\n        visibleCountContainer: visibleCountContainer,\n        visibleCount: visibleCount,\n        countContainer: countContainer,\n        count: count,\n        okContainer: okContainer,\n        ok: ok,\n        message: message,\n        customButtonContainer: customButtonContainer,\n        customButton: customButton,\n        progressBar: progressBar,\n        list: list,\n        onDidAccept: this.onDidAcceptEmitter.event,\n        onDidCustom: this.onDidCustomEmitter.event,\n        onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n        ignoreFocusOut: false,\n        keyMods: this.keyMods,\n        isScreenReaderOptimized: function isScreenReaderOptimized() {\n          return _this9.options.isScreenReaderOptimized();\n        },\n        show: function show(controller) {\n          return _this9.show(controller);\n        },\n        hide: function hide() {\n          return _this9.hide();\n        },\n        setVisibilities: function setVisibilities(visibilities) {\n          return _this9.setVisibilities(visibilities);\n        },\n        setComboboxAccessibility: function setComboboxAccessibility(enabled) {\n          return _this9.setComboboxAccessibility(enabled);\n        },\n        setEnabled: function setEnabled(enabled) {\n          return _this9.setEnabled(enabled);\n        },\n        setContextKey: function setContextKey(contextKey) {\n          return _this9.options.setContextKey(contextKey);\n        }\n      };\n      this.updateStyles();\n      return this.ui;\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(picks) {\n      var _this10 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var token = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : CancellationToken.None;\n      return new Promise(function (doResolve, reject) {\n        var _resolve = function resolve(result) {\n          _resolve = doResolve;\n\n          if (options.onKeyMods) {\n            options.onKeyMods(input.keyMods);\n          }\n\n          doResolve(result);\n        };\n\n        if (token.isCancellationRequested) {\n          _resolve(undefined);\n\n          return;\n        }\n\n        var input = _this10.createQuickPick();\n\n        var activeItem;\n        var disposables = [input, input.onDidAccept(function () {\n          if (input.canSelectMany) {\n            _resolve(input.selectedItems.slice());\n\n            input.hide();\n          } else {\n            var result = input.activeItems[0];\n\n            if (result) {\n              _resolve(result);\n\n              input.hide();\n            }\n          }\n        }), input.onDidChangeActive(function (items) {\n          var focused = items[0];\n\n          if (focused && options.onDidFocus) {\n            options.onDidFocus(focused);\n          }\n        }), input.onDidChangeSelection(function (items) {\n          if (!input.canSelectMany) {\n            var result = items[0];\n\n            if (result) {\n              _resolve(result);\n\n              input.hide();\n            }\n          }\n        }), input.onDidTriggerItemButton(function (event) {\n          return options.onDidTriggerItemButton && options.onDidTriggerItemButton(Object.assign(Object.assign({}, event), {\n            removeItem: function removeItem() {\n              var index = input.items.indexOf(event.item);\n\n              if (index !== -1) {\n                var items = input.items.slice();\n                items.splice(index, 1);\n                input.items = items;\n              }\n            }\n          }));\n        }), input.onDidChangeValue(function (value) {\n          if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n            input.activeItems = [activeItem];\n          }\n        }), token.onCancellationRequested(function () {\n          input.hide();\n        }), input.onDidHide(function () {\n          dispose(disposables);\n\n          _resolve(undefined);\n        })];\n        input.canSelectMany = !!options.canPickMany;\n        input.placeholder = options.placeHolder;\n        input.ignoreFocusOut = !!options.ignoreFocusLost;\n        input.matchOnDescription = !!options.matchOnDescription;\n        input.matchOnDetail = !!options.matchOnDetail;\n        input.matchOnLabel = options.matchOnLabel === undefined || options.matchOnLabel; // default to true\n\n        input.autoFocusOnList = options.autoFocusOnList === undefined || options.autoFocusOnList; // default to true\n\n        input.quickNavigate = options.quickNavigate;\n        input.contextKey = options.contextKey;\n        input.busy = true;\n        Promise.all([picks, options.activeItem]).then(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              items = _ref3[0],\n              _activeItem = _ref3[1];\n\n          activeItem = _activeItem;\n          input.busy = false;\n          input.items = items;\n\n          if (input.canSelectMany) {\n            input.selectedItems = items.filter(function (item) {\n              return item.type !== 'separator' && item.picked;\n            });\n          }\n\n          if (activeItem) {\n            input.activeItems = [activeItem];\n          }\n        });\n        input.show();\n        Promise.resolve(picks).then(undefined, function (err) {\n          reject(err);\n          input.hide();\n        });\n      });\n    }\n  }, {\n    key: \"createQuickPick\",\n    value: function createQuickPick() {\n      var ui = this.getUI();\n      return new QuickPick(ui);\n    }\n  }, {\n    key: \"show\",\n    value: function show(controller) {\n      var ui = this.getUI();\n      this.onShowEmitter.fire();\n      var oldController = this.controller;\n      this.controller = controller;\n\n      if (oldController) {\n        oldController.didHide();\n      }\n\n      this.setEnabled(true);\n      ui.leftActionBar.clear();\n      ui.title.textContent = '';\n      ui.description1.textContent = '';\n      ui.description2.textContent = '';\n      ui.rightActionBar.clear();\n      ui.checkAll.checked = false; // ui.inputBox.value = ''; Avoid triggering an event.\n\n      ui.inputBox.placeholder = '';\n      ui.inputBox.password = false;\n      ui.inputBox.showDecoration(Severity.Ignore);\n      ui.visibleCount.setCount(0);\n      ui.count.setCount(0);\n      dom.reset(ui.message);\n      ui.progressBar.stop();\n      ui.list.setElements([]);\n      ui.list.matchOnDescription = false;\n      ui.list.matchOnDetail = false;\n      ui.list.matchOnLabel = true;\n      ui.list.sortByLabel = true;\n      ui.ignoreFocusOut = false;\n      this.setComboboxAccessibility(false);\n      ui.inputBox.ariaLabel = '';\n      var backKeybindingLabel = this.options.backKeybindingLabel();\n      backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\n      ui.container.style.display = '';\n      this.updateLayout();\n      ui.inputBox.setFocus();\n    }\n  }, {\n    key: \"setVisibilities\",\n    value: function setVisibilities(visibilities) {\n      var ui = this.getUI();\n      ui.title.style.display = visibilities.title ? '' : 'none';\n      ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n      ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n      ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n      ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n      ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n      ui.countContainer.style.display = visibilities.count ? '' : 'none';\n      ui.okContainer.style.display = visibilities.ok ? '' : 'none';\n      ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\n      ui.message.style.display = visibilities.message ? '' : 'none';\n      ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\n      ui.list.display(!!visibilities.list);\n      ui.container.classList[visibilities.checkBox ? 'add' : 'remove']('show-checkboxes');\n      this.updateLayout(); // TODO\n    }\n  }, {\n    key: \"setComboboxAccessibility\",\n    value: function setComboboxAccessibility(enabled) {\n      if (enabled !== this.comboboxAccessibility) {\n        var ui = this.getUI();\n        this.comboboxAccessibility = enabled;\n\n        if (this.comboboxAccessibility) {\n          ui.inputBox.setAttribute('role', 'combobox');\n          ui.inputBox.setAttribute('aria-haspopup', 'true');\n          ui.inputBox.setAttribute('aria-autocomplete', 'list');\n          ui.inputBox.setAttribute('aria-activedescendant', ui.list.getActiveDescendant() || '');\n        } else {\n          ui.inputBox.removeAttribute('role');\n          ui.inputBox.removeAttribute('aria-haspopup');\n          ui.inputBox.removeAttribute('aria-autocomplete');\n          ui.inputBox.removeAttribute('aria-activedescendant');\n        }\n      }\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function setEnabled(enabled) {\n      if (enabled !== this.enabled) {\n        this.enabled = enabled;\n\n        var _iterator = _createForOfIteratorHelper(this.getUI().leftActionBar.viewItems),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var item = _step.value;\n            item.getAction().enabled = enabled;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var _iterator2 = _createForOfIteratorHelper(this.getUI().rightActionBar.viewItems),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _item = _step2.value;\n            _item.getAction().enabled = enabled;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        this.getUI().checkAll.disabled = !enabled; // this.getUI().inputBox.enabled = enabled; Avoid loosing focus.\n\n        this.getUI().ok.enabled = enabled;\n        this.getUI().list.enabled = enabled;\n      }\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _a;\n\n      var controller = this.controller;\n\n      if (controller) {\n        var focusChanged = !((_a = this.ui) === null || _a === void 0 ? void 0 : _a.container.contains(document.activeElement));\n        this.controller = null;\n        this.onHideEmitter.fire();\n        this.getUI().container.style.display = 'none';\n\n        if (!focusChanged) {\n          if (this.previousFocusElement && this.previousFocusElement.offsetParent) {\n            this.previousFocusElement.focus();\n            this.previousFocusElement = undefined;\n          } else {\n            this.options.returnFocus();\n          }\n        }\n\n        controller.didHide();\n      }\n    }\n  }, {\n    key: \"layout\",\n    value: function layout(dimension, titleBarOffset) {\n      this.dimension = dimension;\n      this.titleBarOffset = titleBarOffset;\n      this.updateLayout();\n    }\n  }, {\n    key: \"updateLayout\",\n    value: function updateLayout() {\n      if (this.ui) {\n        this.ui.container.style.top = \"\".concat(this.titleBarOffset, \"px\");\n        var style = this.ui.container.style;\n        var width = Math.min(this.dimension.width * 0.62\n        /* golden cut */\n        , QuickInputController.MAX_WIDTH);\n        style.width = width + 'px';\n        style.marginLeft = '-' + width / 2 + 'px';\n        this.ui.inputBox.layout();\n        this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\n      }\n    }\n  }, {\n    key: \"applyStyles\",\n    value: function applyStyles(styles) {\n      this.styles = styles;\n      this.updateStyles();\n    }\n  }, {\n    key: \"updateStyles\",\n    value: function updateStyles() {\n      if (this.ui) {\n        var _this$styles$widget = this.styles.widget,\n            quickInputTitleBackground = _this$styles$widget.quickInputTitleBackground,\n            quickInputBackground = _this$styles$widget.quickInputBackground,\n            quickInputForeground = _this$styles$widget.quickInputForeground,\n            contrastBorder = _this$styles$widget.contrastBorder,\n            widgetShadow = _this$styles$widget.widgetShadow;\n        this.ui.titleBar.style.backgroundColor = quickInputTitleBackground ? quickInputTitleBackground.toString() : '';\n        this.ui.container.style.backgroundColor = quickInputBackground ? quickInputBackground.toString() : '';\n        this.ui.container.style.color = quickInputForeground ? quickInputForeground.toString() : '';\n        this.ui.container.style.border = contrastBorder ? \"1px solid \".concat(contrastBorder) : '';\n        this.ui.container.style.boxShadow = widgetShadow ? \"0 0 8px 2px \".concat(widgetShadow) : '';\n        this.ui.inputBox.style(this.styles.inputBox);\n        this.ui.count.style(this.styles.countBadge);\n        this.ui.ok.style(this.styles.button);\n        this.ui.customButton.style(this.styles.button);\n        this.ui.progressBar.style(this.styles.progressBar);\n        this.ui.list.style(this.styles.list);\n        var content = [];\n\n        if (this.styles.list.listInactiveFocusForeground) {\n          content.push(\".monaco-list .monaco-list-row.focused { color:  \".concat(this.styles.list.listInactiveFocusForeground, \"; }\"));\n          content.push(\".monaco-list .monaco-list-row.focused:hover { color:  \".concat(this.styles.list.listInactiveFocusForeground, \"; }\")); // overwrite :hover style in this case!\n        }\n\n        if (this.styles.list.pickerGroupBorder) {\n          content.push(\".quick-input-list .quick-input-list-entry { border-top-color:  \".concat(this.styles.list.pickerGroupBorder, \"; }\"));\n        }\n\n        if (this.styles.list.pickerGroupForeground) {\n          content.push(\".quick-input-list .quick-input-list-separator { color:  \".concat(this.styles.list.pickerGroupForeground, \"; }\"));\n        }\n\n        var newStyles = content.join('\\n');\n\n        if (newStyles !== this.ui.styleSheet.textContent) {\n          this.ui.styleSheet.textContent = newStyles;\n        }\n      }\n    }\n  }]);\n\n  return QuickInputController;\n}(Disposable);\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInput.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","NO_KEY_MODS","ItemActivation","dom","CancellationToken","QuickInputList","QuickInputListFocus","QuickInputBox","StandardKeyboardEvent","localize","CountBadge","ProgressBar","Emitter","Button","dispose","Disposable","DisposableStore","Severity","ActionBar","Action","equals","TimeoutTimer","getIconClass","registerCodicon","Codicon","escape","renderLabelWithIcons","$","backButtonIcon","arrowLeft","backButton","iconClass","classNames","tooltip","handle","QuickInput","ui","visible","_enabled","_busy","_ignoreFocusOut","_buttons","buttonsUpdated","onDidTriggerButtonEmitter","_register","onDidHideEmitter","onDisposeEmitter","visibleDisposables","onDidHide","event","add","onDidTriggerButton","button","buttons","indexOf","fire","show","update","hide","clear","title","getTitle","textContent","innerHTML","innerText","description","getDescription","description1","description2","busy","busyDelay","setIfNotSet","progressBar","infinite","stop","cancel","undefined","leftActionBar","leftButtons","filter","push","map","index","action","iconPath","icon","label","rightActionBar","rightButtons","ignoreFocusOut","setEnabled","enabled","setContextKey","contextKey","getSteps","totalSteps","String","severity","inputBox","showDecoration","Error","styles","stylesForType","message","style","color","foreground","backgroundColor","background","border","paddingBottom","_title","_description","_steps","_totalSteps","_contextKey","QuickPick","arguments","_value","onDidChangeValueEmitter","onDidAcceptEmitter","onDidCustomEmitter","_items","itemsUpdated","_canSelectMany","_canAcceptInBackground","_matchOnDescription","_matchOnDetail","_matchOnLabel","_sortByLabel","_autoFocusOnList","_itemActivation","isScreenReaderOptimized","NONE","FIRST","_activeItems","activeItemsUpdated","activeItemsToConfirm","onDidChangeActiveEmitter","_selectedItems","selectedItemsUpdated","selectedItemsToConfirm","onDidChangeSelectionEmitter","onDidTriggerItemButtonEmitter","valueSelectionUpdated","_ok","_customButton","filterValue","onDidChangeValue","onDidAccept","onDidChangeActive","onDidChangeSelection","onDidTriggerItemButton","autoFocusOnList","canSelectMany","list","focus","First","onDidChange","didFilter","trySelectFirst","onMouseDown","clearFocus","_hideInput","onKeyDown","keyCode","Next","domFocus","EventHelper","getFocusedElements","length","Previous","Last","NextPage","PreviousPage","isSelectionAtEnd","activeItems","selectedItems","inBackground","ctrlKey","metaKey","shiftKey","altKey","onDidCustom","onDidChangeFocus","focusedItems","a","b","items","setSelectedElements","MouseEvent","onChangedCheckedElements","checkedItems","onButtonTriggered","registerQuickNavigation","addDisposableListener","container","EventType","KEY_UP","_quickNavigate","keyboardEvent","quickNavKeys","keybindings","wasTriggerKeyPressed","some","k","getParts","firstPart","chordPart","hideInput","inputShownJustForScreenReader","classList","toggle","visibilities","checkAll","_hideCheckAll","checkBox","visibleCount","count","ok","validationMessage","customButton","setVisibilities","select","_valueSelection","start","end","placeholder","ariaLabel","DEFAULT_ARIA_LABEL","matchOnDescription","matchOnDetail","matchOnLabel","sortByLabel","setElements","checked","getAllVisibleChecked","setCount","getVisibleCount","getCheckedCount","SECOND","Second","LAST","contains","setFocusedElements","setCheckedElements","_lastValidationMessage","reset","showMessageDecoration","Ignore","customLabel","element","customHover","setComboboxAccessibility","quickNavigate","_ariaLabel","_placeholder","canAcceptInBackground","itemActivation","keyMods","valueSelection","_validationMessage","showCustomButton","_customButtonLabel","_customButtonHover","hover","showOkButton","QuickInputController","options","comboboxAccessibility","ctrlCmd","alt","controller","onShowEmitter","onShow","onHideEmitter","onHide","idPrefix","parentElement","registerKeyModsListeners","listener","window","KEY_DOWN","MOUSE_DOWN","append","tabIndex","display","styleSheet","createStyleSheet","titleBar","domNode","headerContainer","type","addStandardDisposableListener","CHANGE","setAllVisibleChecked","CLICK","x","y","setFocus","extraContainer","filterContainer","setAttribute","visibleCountContainer","countFormat","key","comment","countContainer","okContainer","onDidClick","customButtonContainer","getContainer","onChangedAllVisibleChecked","onChangedVisibleCount","c","onChangedCheckedCount","onLeave","setTimeout","getUI","getActiveDescendant","focusTracker","trackFocus","FOCUS","previousFocusElement","relatedTarget","HTMLElement","onDidBlur","selectors","isDisplayed","stops","querySelectorAll","join","target","updateStyles","picks","token","None","doResolve","onKeyMods","input","isCancellationRequested","createQuickPick","activeItem","disposables","slice","focused","onDidFocus","Object","assign","removeItem","item","splice","onCancellationRequested","canPickMany","placeHolder","ignoreFocusLost","all","_activeItem","picked","err","oldController","didHide","password","backKeybindingLabel","updateLayout","removeAttribute","viewItems","getAction","disabled","_a","focusChanged","document","activeElement","offsetParent","returnFocus","dimension","titleBarOffset","top","width","Math","min","MAX_WIDTH","marginLeft","layout","height","widget","quickInputTitleBackground","quickInputBackground","quickInputForeground","contrastBorder","widgetShadow","toString","boxShadow","countBadge","content","listInactiveFocusForeground","pickerGroupBorder","pickerGroupForeground","newStyles"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport './media/quickInput.css';\r\nimport { NO_KEY_MODS, ItemActivation } from '../common/quickInput.js';\r\nimport * as dom from '../../../browser/dom.js';\r\nimport { CancellationToken } from '../../../common/cancellation.js';\r\nimport { QuickInputList, QuickInputListFocus } from './quickInputList.js';\r\nimport { QuickInputBox } from './quickInputBox.js';\r\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { CountBadge } from '../../../browser/ui/countBadge/countBadge.js';\r\nimport { ProgressBar } from '../../../browser/ui/progressbar/progressbar.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { Button } from '../../../browser/ui/button/button.js';\r\nimport { dispose, Disposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport Severity from '../../../common/severity.js';\r\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../common/actions.js';\r\nimport { equals } from '../../../common/arrays.js';\r\nimport { TimeoutTimer } from '../../../common/async.js';\r\nimport { getIconClass } from './quickInputUtils.js';\r\nimport { registerCodicon, Codicon } from '../../../common/codicons.js';\r\nimport { escape } from '../../../common/strings.js';\r\nimport { renderLabelWithIcons } from '../../../browser/ui/iconLabel/iconLabels.js';\r\nconst $ = dom.$;\r\nconst backButtonIcon = registerCodicon('quick-input-back', Codicon.arrowLeft);\r\nconst backButton = {\r\n    iconClass: backButtonIcon.classNames,\r\n    tooltip: localize('quickInput.back', \"Back\"),\r\n    handle: -1 // TODO\r\n};\r\nclass QuickInput extends Disposable {\r\n    constructor(ui) {\r\n        super();\r\n        this.ui = ui;\r\n        this.visible = false;\r\n        this._enabled = true;\r\n        this._busy = false;\r\n        this._ignoreFocusOut = false;\r\n        this._buttons = [];\r\n        this.buttonsUpdated = false;\r\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\r\n        this.onDidHideEmitter = this._register(new Emitter());\r\n        this.onDisposeEmitter = this._register(new Emitter());\r\n        this.visibleDisposables = this._register(new DisposableStore());\r\n        this.onDidHide = this.onDidHideEmitter.event;\r\n    }\r\n    get title() {\r\n        return this._title;\r\n    }\r\n    set title(title) {\r\n        this._title = title;\r\n        this.update();\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    set description(description) {\r\n        this._description = description;\r\n        this.update();\r\n    }\r\n    get step() {\r\n        return this._steps;\r\n    }\r\n    set step(step) {\r\n        this._steps = step;\r\n        this.update();\r\n    }\r\n    get totalSteps() {\r\n        return this._totalSteps;\r\n    }\r\n    set totalSteps(totalSteps) {\r\n        this._totalSteps = totalSteps;\r\n        this.update();\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        this._enabled = enabled;\r\n        this.update();\r\n    }\r\n    get contextKey() {\r\n        return this._contextKey;\r\n    }\r\n    set contextKey(contextKey) {\r\n        this._contextKey = contextKey;\r\n        this.update();\r\n    }\r\n    get busy() {\r\n        return this._busy;\r\n    }\r\n    set busy(busy) {\r\n        this._busy = busy;\r\n        this.update();\r\n    }\r\n    get ignoreFocusOut() {\r\n        return this._ignoreFocusOut;\r\n    }\r\n    set ignoreFocusOut(ignoreFocusOut) {\r\n        this._ignoreFocusOut = ignoreFocusOut;\r\n        this.update();\r\n    }\r\n    get buttons() {\r\n        return this._buttons;\r\n    }\r\n    set buttons(buttons) {\r\n        this._buttons = buttons;\r\n        this.buttonsUpdated = true;\r\n        this.update();\r\n    }\r\n    show() {\r\n        if (this.visible) {\r\n            return;\r\n        }\r\n        this.visibleDisposables.add(this.ui.onDidTriggerButton(button => {\r\n            if (this.buttons.indexOf(button) !== -1) {\r\n                this.onDidTriggerButtonEmitter.fire(button);\r\n            }\r\n        }));\r\n        this.ui.show(this);\r\n        this.visible = true;\r\n        this.update();\r\n    }\r\n    hide() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.ui.hide();\r\n    }\r\n    didHide() {\r\n        this.visible = false;\r\n        this.visibleDisposables.clear();\r\n        this.onDidHideEmitter.fire();\r\n    }\r\n    update() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        const title = this.getTitle();\r\n        if (title && this.ui.title.textContent !== title) {\r\n            this.ui.title.textContent = title;\r\n        }\r\n        else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\r\n            this.ui.title.innerText = '\\u00a0;';\r\n        }\r\n        const description = this.getDescription();\r\n        if (this.ui.description1.textContent !== description) {\r\n            this.ui.description1.textContent = description;\r\n        }\r\n        if (this.ui.description2.textContent !== description) {\r\n            this.ui.description2.textContent = description;\r\n        }\r\n        if (this.busy && !this.busyDelay) {\r\n            this.busyDelay = new TimeoutTimer();\r\n            this.busyDelay.setIfNotSet(() => {\r\n                if (this.visible) {\r\n                    this.ui.progressBar.infinite();\r\n                }\r\n            }, 800);\r\n        }\r\n        if (!this.busy && this.busyDelay) {\r\n            this.ui.progressBar.stop();\r\n            this.busyDelay.cancel();\r\n            this.busyDelay = undefined;\r\n        }\r\n        if (this.buttonsUpdated) {\r\n            this.buttonsUpdated = false;\r\n            this.ui.leftActionBar.clear();\r\n            const leftButtons = this.buttons.filter(button => button === backButton);\r\n            this.ui.leftActionBar.push(leftButtons.map((button, index) => {\r\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\r\n                    this.onDidTriggerButtonEmitter.fire(button);\r\n                }));\r\n                action.tooltip = button.tooltip || '';\r\n                return action;\r\n            }), { icon: true, label: false });\r\n            this.ui.rightActionBar.clear();\r\n            const rightButtons = this.buttons.filter(button => button !== backButton);\r\n            this.ui.rightActionBar.push(rightButtons.map((button, index) => {\r\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\r\n                    this.onDidTriggerButtonEmitter.fire(button);\r\n                }));\r\n                action.tooltip = button.tooltip || '';\r\n                return action;\r\n            }), { icon: true, label: false });\r\n        }\r\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\r\n        this.ui.setEnabled(this.enabled);\r\n        this.ui.setContextKey(this.contextKey);\r\n    }\r\n    getTitle() {\r\n        if (this.title && this.step) {\r\n            return `${this.title} (${this.getSteps()})`;\r\n        }\r\n        if (this.title) {\r\n            return this.title;\r\n        }\r\n        if (this.step) {\r\n            return this.getSteps();\r\n        }\r\n        return '';\r\n    }\r\n    getDescription() {\r\n        return this.description || '';\r\n    }\r\n    getSteps() {\r\n        if (this.step && this.totalSteps) {\r\n            return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\r\n        }\r\n        if (this.step) {\r\n            return String(this.step);\r\n        }\r\n        return '';\r\n    }\r\n    showMessageDecoration(severity) {\r\n        this.ui.inputBox.showDecoration(severity);\r\n        if (severity === Severity.Error) {\r\n            const styles = this.ui.inputBox.stylesForType(severity);\r\n            this.ui.message.style.color = styles.foreground ? `${styles.foreground}` : '';\r\n            this.ui.message.style.backgroundColor = styles.background ? `${styles.background}` : '';\r\n            this.ui.message.style.border = styles.border ? `1px solid ${styles.border}` : '';\r\n            this.ui.message.style.paddingBottom = '4px';\r\n        }\r\n        else {\r\n            this.ui.message.style.color = '';\r\n            this.ui.message.style.backgroundColor = '';\r\n            this.ui.message.style.border = '';\r\n            this.ui.message.style.paddingBottom = '';\r\n        }\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        this.onDisposeEmitter.fire();\r\n        super.dispose();\r\n    }\r\n}\r\nclass QuickPick extends QuickInput {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._value = '';\r\n        this.onDidChangeValueEmitter = this._register(new Emitter());\r\n        this.onDidAcceptEmitter = this._register(new Emitter());\r\n        this.onDidCustomEmitter = this._register(new Emitter());\r\n        this._items = [];\r\n        this.itemsUpdated = false;\r\n        this._canSelectMany = false;\r\n        this._canAcceptInBackground = false;\r\n        this._matchOnDescription = false;\r\n        this._matchOnDetail = false;\r\n        this._matchOnLabel = true;\r\n        this._sortByLabel = true;\r\n        this._autoFocusOnList = true;\r\n        this._itemActivation = this.ui.isScreenReaderOptimized() ? ItemActivation.NONE /* https://github.com/microsoft/vscode/issues/57501 */ : ItemActivation.FIRST;\r\n        this._activeItems = [];\r\n        this.activeItemsUpdated = false;\r\n        this.activeItemsToConfirm = [];\r\n        this.onDidChangeActiveEmitter = this._register(new Emitter());\r\n        this._selectedItems = [];\r\n        this.selectedItemsUpdated = false;\r\n        this.selectedItemsToConfirm = [];\r\n        this.onDidChangeSelectionEmitter = this._register(new Emitter());\r\n        this.onDidTriggerItemButtonEmitter = this._register(new Emitter());\r\n        this.valueSelectionUpdated = true;\r\n        this._ok = 'default';\r\n        this._customButton = false;\r\n        this.filterValue = (value) => value;\r\n        this.onDidChangeValue = this.onDidChangeValueEmitter.event;\r\n        this.onDidAccept = this.onDidAcceptEmitter.event;\r\n        this.onDidChangeActive = this.onDidChangeActiveEmitter.event;\r\n        this.onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\r\n        this.onDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\r\n    }\r\n    get quickNavigate() {\r\n        return this._quickNavigate;\r\n    }\r\n    set quickNavigate(quickNavigate) {\r\n        this._quickNavigate = quickNavigate;\r\n        this.update();\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this._value = value || '';\r\n        this.update();\r\n    }\r\n    set ariaLabel(ariaLabel) {\r\n        this._ariaLabel = ariaLabel;\r\n        this.update();\r\n    }\r\n    get ariaLabel() {\r\n        return this._ariaLabel;\r\n    }\r\n    get placeholder() {\r\n        return this._placeholder;\r\n    }\r\n    set placeholder(placeholder) {\r\n        this._placeholder = placeholder;\r\n        this.update();\r\n    }\r\n    get items() {\r\n        return this._items;\r\n    }\r\n    set items(items) {\r\n        this._items = items;\r\n        this.itemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get canSelectMany() {\r\n        return this._canSelectMany;\r\n    }\r\n    set canSelectMany(canSelectMany) {\r\n        this._canSelectMany = canSelectMany;\r\n        this.update();\r\n    }\r\n    get canAcceptInBackground() {\r\n        return this._canAcceptInBackground;\r\n    }\r\n    set canAcceptInBackground(canAcceptInBackground) {\r\n        this._canAcceptInBackground = canAcceptInBackground;\r\n    }\r\n    get matchOnDescription() {\r\n        return this._matchOnDescription;\r\n    }\r\n    set matchOnDescription(matchOnDescription) {\r\n        this._matchOnDescription = matchOnDescription;\r\n        this.update();\r\n    }\r\n    get matchOnDetail() {\r\n        return this._matchOnDetail;\r\n    }\r\n    set matchOnDetail(matchOnDetail) {\r\n        this._matchOnDetail = matchOnDetail;\r\n        this.update();\r\n    }\r\n    get matchOnLabel() {\r\n        return this._matchOnLabel;\r\n    }\r\n    set matchOnLabel(matchOnLabel) {\r\n        this._matchOnLabel = matchOnLabel;\r\n        this.update();\r\n    }\r\n    get sortByLabel() {\r\n        return this._sortByLabel;\r\n    }\r\n    set sortByLabel(sortByLabel) {\r\n        this._sortByLabel = sortByLabel;\r\n        this.update();\r\n    }\r\n    get autoFocusOnList() {\r\n        return this._autoFocusOnList;\r\n    }\r\n    set autoFocusOnList(autoFocusOnList) {\r\n        this._autoFocusOnList = autoFocusOnList;\r\n        this.update();\r\n    }\r\n    get itemActivation() {\r\n        return this._itemActivation;\r\n    }\r\n    set itemActivation(itemActivation) {\r\n        this._itemActivation = itemActivation;\r\n    }\r\n    get activeItems() {\r\n        return this._activeItems;\r\n    }\r\n    set activeItems(activeItems) {\r\n        this._activeItems = activeItems;\r\n        this.activeItemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get selectedItems() {\r\n        return this._selectedItems;\r\n    }\r\n    set selectedItems(selectedItems) {\r\n        this._selectedItems = selectedItems;\r\n        this.selectedItemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get keyMods() {\r\n        if (this._quickNavigate) {\r\n            // Disable keyMods when quick navigate is enabled\r\n            // because in this model the interaction is purely\r\n            // keyboard driven and Ctrl/Alt are typically\r\n            // pressed and hold during this interaction.\r\n            return NO_KEY_MODS;\r\n        }\r\n        return this.ui.keyMods;\r\n    }\r\n    set valueSelection(valueSelection) {\r\n        this._valueSelection = valueSelection;\r\n        this.valueSelectionUpdated = true;\r\n        this.update();\r\n    }\r\n    get validationMessage() {\r\n        return this._validationMessage;\r\n    }\r\n    set validationMessage(validationMessage) {\r\n        this._validationMessage = validationMessage;\r\n        this.update();\r\n    }\r\n    get customButton() {\r\n        return this._customButton;\r\n    }\r\n    set customButton(showCustomButton) {\r\n        this._customButton = showCustomButton;\r\n        this.update();\r\n    }\r\n    get customLabel() {\r\n        return this._customButtonLabel;\r\n    }\r\n    set customLabel(label) {\r\n        this._customButtonLabel = label;\r\n        this.update();\r\n    }\r\n    get customHover() {\r\n        return this._customButtonHover;\r\n    }\r\n    set customHover(hover) {\r\n        this._customButtonHover = hover;\r\n        this.update();\r\n    }\r\n    get ok() {\r\n        return this._ok;\r\n    }\r\n    set ok(showOkButton) {\r\n        this._ok = showOkButton;\r\n        this.update();\r\n    }\r\n    get hideInput() {\r\n        return !!this._hideInput;\r\n    }\r\n    set hideInput(hideInput) {\r\n        this._hideInput = hideInput;\r\n        this.update();\r\n    }\r\n    trySelectFirst() {\r\n        if (this.autoFocusOnList) {\r\n            if (!this.canSelectMany) {\r\n                this.ui.list.focus(QuickInputListFocus.First);\r\n            }\r\n        }\r\n    }\r\n    show() {\r\n        if (!this.visible) {\r\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\r\n                if (value === this.value) {\r\n                    return;\r\n                }\r\n                this._value = value;\r\n                const didFilter = this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\r\n                if (didFilter) {\r\n                    this.trySelectFirst();\r\n                }\r\n                this.onDidChangeValueEmitter.fire(value);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.inputBox.onMouseDown(event => {\r\n                if (!this.autoFocusOnList) {\r\n                    this.ui.list.clearFocus();\r\n                }\r\n            }));\r\n            this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown((event) => {\r\n                switch (event.keyCode) {\r\n                    case 18 /* DownArrow */:\r\n                        this.ui.list.focus(QuickInputListFocus.Next);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 16 /* UpArrow */:\r\n                        if (this.ui.list.getFocusedElements().length) {\r\n                            this.ui.list.focus(QuickInputListFocus.Previous);\r\n                        }\r\n                        else {\r\n                            this.ui.list.focus(QuickInputListFocus.Last);\r\n                        }\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 12 /* PageDown */:\r\n                        this.ui.list.focus(QuickInputListFocus.NextPage);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 11 /* PageUp */:\r\n                        this.ui.list.focus(QuickInputListFocus.PreviousPage);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 17 /* RightArrow */:\r\n                        if (!this._canAcceptInBackground) {\r\n                            return; // needs to be enabled\r\n                        }\r\n                        if (!this.ui.inputBox.isSelectionAtEnd()) {\r\n                            return; // ensure input box selection at end\r\n                        }\r\n                        if (this.activeItems[0]) {\r\n                            this._selectedItems = [this.activeItems[0]];\r\n                            this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                            this.onDidAcceptEmitter.fire({ inBackground: true });\r\n                        }\r\n                        break;\r\n                    case 14 /* Home */:\r\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\r\n                            this.ui.list.focus(QuickInputListFocus.First);\r\n                            dom.EventHelper.stop(event, true);\r\n                        }\r\n                        break;\r\n                    case 13 /* End */:\r\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\r\n                            this.ui.list.focus(QuickInputListFocus.Last);\r\n                            dom.EventHelper.stop(event, true);\r\n                        }\r\n                        break;\r\n                }\r\n            }));\r\n            this.visibleDisposables.add(this.ui.onDidAccept(() => {\r\n                if (!this.canSelectMany && this.activeItems[0]) {\r\n                    this._selectedItems = [this.activeItems[0]];\r\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                }\r\n                this.onDidAcceptEmitter.fire({ inBackground: false });\r\n            }));\r\n            this.visibleDisposables.add(this.ui.onDidCustom(() => {\r\n                this.onDidCustomEmitter.fire();\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onDidChangeFocus(focusedItems => {\r\n                if (this.activeItemsUpdated) {\r\n                    return; // Expect another event.\r\n                }\r\n                if (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._activeItems = focusedItems;\r\n                this.onDidChangeActiveEmitter.fire(focusedItems);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({ items: selectedItems, event }) => {\r\n                if (this.canSelectMany) {\r\n                    if (selectedItems.length) {\r\n                        this.ui.list.setSelectedElements([]);\r\n                    }\r\n                    return;\r\n                }\r\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._selectedItems = selectedItems;\r\n                this.onDidChangeSelectionEmitter.fire(selectedItems);\r\n                if (selectedItems.length) {\r\n                    this.onDidAcceptEmitter.fire({ inBackground: event instanceof MouseEvent && event.button === 1 /* mouse middle click */ });\r\n                }\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(checkedItems => {\r\n                if (!this.canSelectMany) {\r\n                    return;\r\n                }\r\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._selectedItems = checkedItems;\r\n                this.onDidChangeSelectionEmitter.fire(checkedItems);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event)));\r\n            this.visibleDisposables.add(this.registerQuickNavigation());\r\n            this.valueSelectionUpdated = true;\r\n        }\r\n        super.show(); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\r\n    }\r\n    registerQuickNavigation() {\r\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\r\n            if (this.canSelectMany || !this._quickNavigate) {\r\n                return;\r\n            }\r\n            const keyboardEvent = new StandardKeyboardEvent(e);\r\n            const keyCode = keyboardEvent.keyCode;\r\n            // Select element when keys are pressed that signal it\r\n            const quickNavKeys = this._quickNavigate.keybindings;\r\n            const wasTriggerKeyPressed = quickNavKeys.some(k => {\r\n                const [firstPart, chordPart] = k.getParts();\r\n                if (chordPart) {\r\n                    return false;\r\n                }\r\n                if (firstPart.shiftKey && keyCode === 4 /* Shift */) {\r\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\r\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick input\r\n                    }\r\n                    return true;\r\n                }\r\n                if (firstPart.altKey && keyCode === 6 /* Alt */) {\r\n                    return true;\r\n                }\r\n                if (firstPart.ctrlKey && keyCode === 5 /* Ctrl */) {\r\n                    return true;\r\n                }\r\n                if (firstPart.metaKey && keyCode === 57 /* Meta */) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (wasTriggerKeyPressed) {\r\n                if (this.activeItems[0]) {\r\n                    this._selectedItems = [this.activeItems[0]];\r\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                    this.onDidAcceptEmitter.fire({ inBackground: false });\r\n                }\r\n                // Unset quick navigate after press. It is only valid once\r\n                // and should not result in any behaviour change afterwards\r\n                // if the picker remains open because there was no active item\r\n                this._quickNavigate = undefined;\r\n            }\r\n        });\r\n    }\r\n    update() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        let hideInput = false;\r\n        let inputShownJustForScreenReader = false;\r\n        if (!!this._hideInput && this._items.length > 0) {\r\n            if (this.ui.isScreenReaderOptimized()) {\r\n                // Always show input if screen reader attached https://github.com/microsoft/vscode/issues/94360\r\n                inputShownJustForScreenReader = true;\r\n            }\r\n            else {\r\n                hideInput = true;\r\n            }\r\n        }\r\n        this.ui.container.classList.toggle('hidden-input', hideInput && !this.description);\r\n        const visibilities = {\r\n            title: !!this.title || !!this.step || !!this.buttons.length,\r\n            description: !!this.description,\r\n            checkAll: this.canSelectMany && !this._hideCheckAll,\r\n            checkBox: this.canSelectMany,\r\n            inputBox: !hideInput,\r\n            progressBar: !hideInput,\r\n            visibleCount: true,\r\n            count: this.canSelectMany,\r\n            ok: this.ok === 'default' ? this.canSelectMany : this.ok,\r\n            list: true,\r\n            message: !!this.validationMessage,\r\n            customButton: this.customButton\r\n        };\r\n        this.ui.setVisibilities(visibilities);\r\n        super.update();\r\n        if (this.ui.inputBox.value !== this.value) {\r\n            this.ui.inputBox.value = this.value;\r\n        }\r\n        if (this.valueSelectionUpdated) {\r\n            this.valueSelectionUpdated = false;\r\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\r\n        }\r\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\r\n            this.ui.inputBox.placeholder = (this.placeholder || '');\r\n        }\r\n        if (inputShownJustForScreenReader) {\r\n            this.ui.inputBox.ariaLabel = '';\r\n        }\r\n        else {\r\n            const ariaLabel = this.ariaLabel || this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\r\n            if (this.ui.inputBox.ariaLabel !== ariaLabel) {\r\n                this.ui.inputBox.ariaLabel = ariaLabel;\r\n            }\r\n        }\r\n        this.ui.list.matchOnDescription = this.matchOnDescription;\r\n        this.ui.list.matchOnDetail = this.matchOnDetail;\r\n        this.ui.list.matchOnLabel = this.matchOnLabel;\r\n        this.ui.list.sortByLabel = this.sortByLabel;\r\n        if (this.itemsUpdated) {\r\n            this.itemsUpdated = false;\r\n            this.ui.list.setElements(this.items);\r\n            this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\r\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\r\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\r\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\r\n            switch (this._itemActivation) {\r\n                case ItemActivation.NONE:\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                case ItemActivation.SECOND:\r\n                    this.ui.list.focus(QuickInputListFocus.Second);\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                case ItemActivation.LAST:\r\n                    this.ui.list.focus(QuickInputListFocus.Last);\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                default:\r\n                    this.trySelectFirst();\r\n                    break;\r\n            }\r\n        }\r\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\r\n            if (this.canSelectMany) {\r\n                this.ui.list.clearFocus();\r\n            }\r\n            else {\r\n                this.trySelectFirst();\r\n            }\r\n        }\r\n        if (this.activeItemsUpdated) {\r\n            this.activeItemsUpdated = false;\r\n            this.activeItemsToConfirm = this._activeItems;\r\n            this.ui.list.setFocusedElements(this.activeItems);\r\n            if (this.activeItemsToConfirm === this._activeItems) {\r\n                this.activeItemsToConfirm = null;\r\n            }\r\n        }\r\n        if (this.selectedItemsUpdated) {\r\n            this.selectedItemsUpdated = false;\r\n            this.selectedItemsToConfirm = this._selectedItems;\r\n            if (this.canSelectMany) {\r\n                this.ui.list.setCheckedElements(this.selectedItems);\r\n            }\r\n            else {\r\n                this.ui.list.setSelectedElements(this.selectedItems);\r\n            }\r\n            if (this.selectedItemsToConfirm === this._selectedItems) {\r\n                this.selectedItemsToConfirm = null;\r\n            }\r\n        }\r\n        const validationMessage = this.validationMessage || '';\r\n        if (this._lastValidationMessage !== validationMessage) {\r\n            this._lastValidationMessage = validationMessage;\r\n            dom.reset(this.ui.message, ...renderLabelWithIcons(escape(validationMessage)));\r\n            this.showMessageDecoration(this.validationMessage ? Severity.Error : Severity.Ignore);\r\n        }\r\n        this.ui.customButton.label = this.customLabel || '';\r\n        this.ui.customButton.element.title = this.customHover || '';\r\n        this.ui.setComboboxAccessibility(true);\r\n        if (!visibilities.inputBox) {\r\n            // we need to move focus into the tree to detect keybindings\r\n            // properly when the input box is not visible (quick nav)\r\n            this.ui.list.domFocus();\r\n            // Focus the first element in the list if multiselect is enabled\r\n            if (this.canSelectMany) {\r\n                this.ui.list.focus(QuickInputListFocus.First);\r\n            }\r\n        }\r\n    }\r\n}\r\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\r\nexport class QuickInputController extends Disposable {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.comboboxAccessibility = false;\r\n        this.enabled = true;\r\n        this.onDidAcceptEmitter = this._register(new Emitter());\r\n        this.onDidCustomEmitter = this._register(new Emitter());\r\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\r\n        this.keyMods = { ctrlCmd: false, alt: false };\r\n        this.controller = null;\r\n        this.onShowEmitter = this._register(new Emitter());\r\n        this.onShow = this.onShowEmitter.event;\r\n        this.onHideEmitter = this._register(new Emitter());\r\n        this.onHide = this.onHideEmitter.event;\r\n        this.idPrefix = options.idPrefix;\r\n        this.parentElement = options.container;\r\n        this.styles = options.styles;\r\n        this.registerKeyModsListeners();\r\n    }\r\n    registerKeyModsListeners() {\r\n        const listener = (e) => {\r\n            this.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\r\n            this.keyMods.alt = e.altKey;\r\n        };\r\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_DOWN, listener, true));\r\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_UP, listener, true));\r\n        this._register(dom.addDisposableListener(window, dom.EventType.MOUSE_DOWN, listener, true));\r\n    }\r\n    getUI() {\r\n        if (this.ui) {\r\n            return this.ui;\r\n        }\r\n        const container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\r\n        container.tabIndex = -1;\r\n        container.style.display = 'none';\r\n        const styleSheet = dom.createStyleSheet(container);\r\n        const titleBar = dom.append(container, $('.quick-input-titlebar'));\r\n        const leftActionBar = this._register(new ActionBar(titleBar));\r\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\r\n        const title = dom.append(titleBar, $('.quick-input-title'));\r\n        const rightActionBar = this._register(new ActionBar(titleBar));\r\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\r\n        const description1 = dom.append(container, $('.quick-input-description'));\r\n        const headerContainer = dom.append(container, $('.quick-input-header'));\r\n        const checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\r\n        checkAll.type = 'checkbox';\r\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\r\n            const checked = checkAll.checked;\r\n            list.setAllVisibleChecked(checked);\r\n        }));\r\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\r\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\r\n                inputBox.setFocus();\r\n            }\r\n        }));\r\n        const description2 = dom.append(headerContainer, $('.quick-input-description'));\r\n        const extraContainer = dom.append(headerContainer, $('.quick-input-and-message'));\r\n        const filterContainer = dom.append(extraContainer, $('.quick-input-filter'));\r\n        const inputBox = this._register(new QuickInputBox(filterContainer));\r\n        inputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\r\n        const visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\r\n        visibleCountContainer.setAttribute('aria-live', 'polite');\r\n        visibleCountContainer.setAttribute('aria-atomic', 'true');\r\n        const visibleCount = new CountBadge(visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") });\r\n        const countContainer = dom.append(filterContainer, $('.quick-input-count'));\r\n        countContainer.setAttribute('aria-live', 'polite');\r\n        const count = new CountBadge(countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") });\r\n        const okContainer = dom.append(headerContainer, $('.quick-input-action'));\r\n        const ok = new Button(okContainer);\r\n        ok.label = localize('ok', \"OK\");\r\n        this._register(ok.onDidClick(e => {\r\n            this.onDidAcceptEmitter.fire();\r\n        }));\r\n        const customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\r\n        const customButton = new Button(customButtonContainer);\r\n        customButton.label = localize('custom', \"Custom\");\r\n        this._register(customButton.onDidClick(e => {\r\n            this.onDidCustomEmitter.fire();\r\n        }));\r\n        const message = dom.append(extraContainer, $(`#${this.idPrefix}message.quick-input-message`));\r\n        const progressBar = new ProgressBar(container);\r\n        progressBar.getContainer().classList.add('quick-input-progress');\r\n        const list = this._register(new QuickInputList(container, this.idPrefix + 'list', this.options));\r\n        this._register(list.onChangedAllVisibleChecked(checked => {\r\n            checkAll.checked = checked;\r\n        }));\r\n        this._register(list.onChangedVisibleCount(c => {\r\n            visibleCount.setCount(c);\r\n        }));\r\n        this._register(list.onChangedCheckedCount(c => {\r\n            count.setCount(c);\r\n        }));\r\n        this._register(list.onLeave(() => {\r\n            // Defer to avoid the input field reacting to the triggering key.\r\n            setTimeout(() => {\r\n                inputBox.setFocus();\r\n                if (this.controller instanceof QuickPick && this.controller.canSelectMany) {\r\n                    list.clearFocus();\r\n                }\r\n            }, 0);\r\n        }));\r\n        this._register(list.onDidChangeFocus(() => {\r\n            if (this.comboboxAccessibility) {\r\n                this.getUI().inputBox.setAttribute('aria-activedescendant', this.getUI().list.getActiveDescendant() || '');\r\n            }\r\n        }));\r\n        const focusTracker = dom.trackFocus(container);\r\n        this._register(focusTracker);\r\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, e => {\r\n            this.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\r\n        }, true));\r\n        this._register(focusTracker.onDidBlur(() => {\r\n            if (!this.getUI().ignoreFocusOut && !this.options.ignoreFocusOut()) {\r\n                this.hide();\r\n            }\r\n            this.previousFocusElement = undefined;\r\n        }));\r\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, (e) => {\r\n            inputBox.setFocus();\r\n        }));\r\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, (e) => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            switch (event.keyCode) {\r\n                case 3 /* Enter */:\r\n                    dom.EventHelper.stop(e, true);\r\n                    this.onDidAcceptEmitter.fire();\r\n                    break;\r\n                case 9 /* Escape */:\r\n                    dom.EventHelper.stop(e, true);\r\n                    this.hide();\r\n                    break;\r\n                case 2 /* Tab */:\r\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\r\n                        const selectors = ['.action-label.codicon'];\r\n                        if (container.classList.contains('show-checkboxes')) {\r\n                            selectors.push('input');\r\n                        }\r\n                        else {\r\n                            selectors.push('input[type=text]');\r\n                        }\r\n                        if (this.getUI().list.isDisplayed()) {\r\n                            selectors.push('.monaco-list');\r\n                        }\r\n                        const stops = container.querySelectorAll(selectors.join(', '));\r\n                        if (event.shiftKey && event.target === stops[0]) {\r\n                            dom.EventHelper.stop(e, true);\r\n                            stops[stops.length - 1].focus();\r\n                        }\r\n                        else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\r\n                            dom.EventHelper.stop(e, true);\r\n                            stops[0].focus();\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n        }));\r\n        this.ui = {\r\n            container,\r\n            styleSheet,\r\n            leftActionBar,\r\n            titleBar,\r\n            title,\r\n            description1,\r\n            description2,\r\n            rightActionBar,\r\n            checkAll,\r\n            filterContainer,\r\n            inputBox,\r\n            visibleCountContainer,\r\n            visibleCount,\r\n            countContainer,\r\n            count,\r\n            okContainer,\r\n            ok,\r\n            message,\r\n            customButtonContainer,\r\n            customButton,\r\n            progressBar,\r\n            list,\r\n            onDidAccept: this.onDidAcceptEmitter.event,\r\n            onDidCustom: this.onDidCustomEmitter.event,\r\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\r\n            ignoreFocusOut: false,\r\n            keyMods: this.keyMods,\r\n            isScreenReaderOptimized: () => this.options.isScreenReaderOptimized(),\r\n            show: controller => this.show(controller),\r\n            hide: () => this.hide(),\r\n            setVisibilities: visibilities => this.setVisibilities(visibilities),\r\n            setComboboxAccessibility: enabled => this.setComboboxAccessibility(enabled),\r\n            setEnabled: enabled => this.setEnabled(enabled),\r\n            setContextKey: contextKey => this.options.setContextKey(contextKey),\r\n        };\r\n        this.updateStyles();\r\n        return this.ui;\r\n    }\r\n    pick(picks, options = {}, token = CancellationToken.None) {\r\n        return new Promise((doResolve, reject) => {\r\n            let resolve = (result) => {\r\n                resolve = doResolve;\r\n                if (options.onKeyMods) {\r\n                    options.onKeyMods(input.keyMods);\r\n                }\r\n                doResolve(result);\r\n            };\r\n            if (token.isCancellationRequested) {\r\n                resolve(undefined);\r\n                return;\r\n            }\r\n            const input = this.createQuickPick();\r\n            let activeItem;\r\n            const disposables = [\r\n                input,\r\n                input.onDidAccept(() => {\r\n                    if (input.canSelectMany) {\r\n                        resolve(input.selectedItems.slice());\r\n                        input.hide();\r\n                    }\r\n                    else {\r\n                        const result = input.activeItems[0];\r\n                        if (result) {\r\n                            resolve(result);\r\n                            input.hide();\r\n                        }\r\n                    }\r\n                }),\r\n                input.onDidChangeActive(items => {\r\n                    const focused = items[0];\r\n                    if (focused && options.onDidFocus) {\r\n                        options.onDidFocus(focused);\r\n                    }\r\n                }),\r\n                input.onDidChangeSelection(items => {\r\n                    if (!input.canSelectMany) {\r\n                        const result = items[0];\r\n                        if (result) {\r\n                            resolve(result);\r\n                            input.hide();\r\n                        }\r\n                    }\r\n                }),\r\n                input.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton(Object.assign(Object.assign({}, event), { removeItem: () => {\r\n                        const index = input.items.indexOf(event.item);\r\n                        if (index !== -1) {\r\n                            const items = input.items.slice();\r\n                            items.splice(index, 1);\r\n                            input.items = items;\r\n                        }\r\n                    } }))),\r\n                input.onDidChangeValue(value => {\r\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\r\n                        input.activeItems = [activeItem];\r\n                    }\r\n                }),\r\n                token.onCancellationRequested(() => {\r\n                    input.hide();\r\n                }),\r\n                input.onDidHide(() => {\r\n                    dispose(disposables);\r\n                    resolve(undefined);\r\n                }),\r\n            ];\r\n            input.canSelectMany = !!options.canPickMany;\r\n            input.placeholder = options.placeHolder;\r\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\r\n            input.matchOnDescription = !!options.matchOnDescription;\r\n            input.matchOnDetail = !!options.matchOnDetail;\r\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\r\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\r\n            input.quickNavigate = options.quickNavigate;\r\n            input.contextKey = options.contextKey;\r\n            input.busy = true;\r\n            Promise.all([picks, options.activeItem])\r\n                .then(([items, _activeItem]) => {\r\n                activeItem = _activeItem;\r\n                input.busy = false;\r\n                input.items = items;\r\n                if (input.canSelectMany) {\r\n                    input.selectedItems = items.filter(item => item.type !== 'separator' && item.picked);\r\n                }\r\n                if (activeItem) {\r\n                    input.activeItems = [activeItem];\r\n                }\r\n            });\r\n            input.show();\r\n            Promise.resolve(picks).then(undefined, err => {\r\n                reject(err);\r\n                input.hide();\r\n            });\r\n        });\r\n    }\r\n    createQuickPick() {\r\n        const ui = this.getUI();\r\n        return new QuickPick(ui);\r\n    }\r\n    show(controller) {\r\n        const ui = this.getUI();\r\n        this.onShowEmitter.fire();\r\n        const oldController = this.controller;\r\n        this.controller = controller;\r\n        if (oldController) {\r\n            oldController.didHide();\r\n        }\r\n        this.setEnabled(true);\r\n        ui.leftActionBar.clear();\r\n        ui.title.textContent = '';\r\n        ui.description1.textContent = '';\r\n        ui.description2.textContent = '';\r\n        ui.rightActionBar.clear();\r\n        ui.checkAll.checked = false;\r\n        // ui.inputBox.value = ''; Avoid triggering an event.\r\n        ui.inputBox.placeholder = '';\r\n        ui.inputBox.password = false;\r\n        ui.inputBox.showDecoration(Severity.Ignore);\r\n        ui.visibleCount.setCount(0);\r\n        ui.count.setCount(0);\r\n        dom.reset(ui.message);\r\n        ui.progressBar.stop();\r\n        ui.list.setElements([]);\r\n        ui.list.matchOnDescription = false;\r\n        ui.list.matchOnDetail = false;\r\n        ui.list.matchOnLabel = true;\r\n        ui.list.sortByLabel = true;\r\n        ui.ignoreFocusOut = false;\r\n        this.setComboboxAccessibility(false);\r\n        ui.inputBox.ariaLabel = '';\r\n        const backKeybindingLabel = this.options.backKeybindingLabel();\r\n        backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\r\n        ui.container.style.display = '';\r\n        this.updateLayout();\r\n        ui.inputBox.setFocus();\r\n    }\r\n    setVisibilities(visibilities) {\r\n        const ui = this.getUI();\r\n        ui.title.style.display = visibilities.title ? '' : 'none';\r\n        ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\r\n        ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\r\n        ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\r\n        ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\r\n        ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\r\n        ui.countContainer.style.display = visibilities.count ? '' : 'none';\r\n        ui.okContainer.style.display = visibilities.ok ? '' : 'none';\r\n        ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\r\n        ui.message.style.display = visibilities.message ? '' : 'none';\r\n        ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\r\n        ui.list.display(!!visibilities.list);\r\n        ui.container.classList[visibilities.checkBox ? 'add' : 'remove']('show-checkboxes');\r\n        this.updateLayout(); // TODO\r\n    }\r\n    setComboboxAccessibility(enabled) {\r\n        if (enabled !== this.comboboxAccessibility) {\r\n            const ui = this.getUI();\r\n            this.comboboxAccessibility = enabled;\r\n            if (this.comboboxAccessibility) {\r\n                ui.inputBox.setAttribute('role', 'combobox');\r\n                ui.inputBox.setAttribute('aria-haspopup', 'true');\r\n                ui.inputBox.setAttribute('aria-autocomplete', 'list');\r\n                ui.inputBox.setAttribute('aria-activedescendant', ui.list.getActiveDescendant() || '');\r\n            }\r\n            else {\r\n                ui.inputBox.removeAttribute('role');\r\n                ui.inputBox.removeAttribute('aria-haspopup');\r\n                ui.inputBox.removeAttribute('aria-autocomplete');\r\n                ui.inputBox.removeAttribute('aria-activedescendant');\r\n            }\r\n        }\r\n    }\r\n    setEnabled(enabled) {\r\n        if (enabled !== this.enabled) {\r\n            this.enabled = enabled;\r\n            for (const item of this.getUI().leftActionBar.viewItems) {\r\n                item.getAction().enabled = enabled;\r\n            }\r\n            for (const item of this.getUI().rightActionBar.viewItems) {\r\n                item.getAction().enabled = enabled;\r\n            }\r\n            this.getUI().checkAll.disabled = !enabled;\r\n            // this.getUI().inputBox.enabled = enabled; Avoid loosing focus.\r\n            this.getUI().ok.enabled = enabled;\r\n            this.getUI().list.enabled = enabled;\r\n        }\r\n    }\r\n    hide() {\r\n        var _a;\r\n        const controller = this.controller;\r\n        if (controller) {\r\n            const focusChanged = !((_a = this.ui) === null || _a === void 0 ? void 0 : _a.container.contains(document.activeElement));\r\n            this.controller = null;\r\n            this.onHideEmitter.fire();\r\n            this.getUI().container.style.display = 'none';\r\n            if (!focusChanged) {\r\n                if (this.previousFocusElement && this.previousFocusElement.offsetParent) {\r\n                    this.previousFocusElement.focus();\r\n                    this.previousFocusElement = undefined;\r\n                }\r\n                else {\r\n                    this.options.returnFocus();\r\n                }\r\n            }\r\n            controller.didHide();\r\n        }\r\n    }\r\n    layout(dimension, titleBarOffset) {\r\n        this.dimension = dimension;\r\n        this.titleBarOffset = titleBarOffset;\r\n        this.updateLayout();\r\n    }\r\n    updateLayout() {\r\n        if (this.ui) {\r\n            this.ui.container.style.top = `${this.titleBarOffset}px`;\r\n            const style = this.ui.container.style;\r\n            const width = Math.min(this.dimension.width * 0.62 /* golden cut */, QuickInputController.MAX_WIDTH);\r\n            style.width = width + 'px';\r\n            style.marginLeft = '-' + (width / 2) + 'px';\r\n            this.ui.inputBox.layout();\r\n            this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\r\n        }\r\n    }\r\n    applyStyles(styles) {\r\n        this.styles = styles;\r\n        this.updateStyles();\r\n    }\r\n    updateStyles() {\r\n        if (this.ui) {\r\n            const { quickInputTitleBackground, quickInputBackground, quickInputForeground, contrastBorder, widgetShadow, } = this.styles.widget;\r\n            this.ui.titleBar.style.backgroundColor = quickInputTitleBackground ? quickInputTitleBackground.toString() : '';\r\n            this.ui.container.style.backgroundColor = quickInputBackground ? quickInputBackground.toString() : '';\r\n            this.ui.container.style.color = quickInputForeground ? quickInputForeground.toString() : '';\r\n            this.ui.container.style.border = contrastBorder ? `1px solid ${contrastBorder}` : '';\r\n            this.ui.container.style.boxShadow = widgetShadow ? `0 0 8px 2px ${widgetShadow}` : '';\r\n            this.ui.inputBox.style(this.styles.inputBox);\r\n            this.ui.count.style(this.styles.countBadge);\r\n            this.ui.ok.style(this.styles.button);\r\n            this.ui.customButton.style(this.styles.button);\r\n            this.ui.progressBar.style(this.styles.progressBar);\r\n            this.ui.list.style(this.styles.list);\r\n            const content = [];\r\n            if (this.styles.list.listInactiveFocusForeground) {\r\n                content.push(`.monaco-list .monaco-list-row.focused { color:  ${this.styles.list.listInactiveFocusForeground}; }`);\r\n                content.push(`.monaco-list .monaco-list-row.focused:hover { color:  ${this.styles.list.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\r\n            }\r\n            if (this.styles.list.pickerGroupBorder) {\r\n                content.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`);\r\n            }\r\n            if (this.styles.list.pickerGroupForeground) {\r\n                content.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`);\r\n            }\r\n            const newStyles = content.join('\\n');\r\n            if (newStyles !== this.ui.styleSheet.textContent) {\r\n                this.ui.styleSheet.textContent = newStyles;\r\n            }\r\n        }\r\n    }\r\n}\r\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget\r\n"]},"metadata":{},"sourceType":"module"}