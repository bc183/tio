{"ast":null,"code":"import _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _slicedToArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { EditorWorkerServiceImpl } from '../../common/services/editorWorkerServiceImpl.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { ModeServiceImpl } from '../../common/services/modeServiceImpl.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { ModelServiceImpl } from '../../common/services/modelServiceImpl.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfigurationService.js';\nimport { SimpleBulkEditService, SimpleConfigurationService, SimpleDialogService, SimpleNotificationService, SimpleEditorProgressService, SimpleResourceConfigurationService, SimpleResourcePropertiesService, SimpleUriLabelService, SimpleWorkspaceContextService, StandaloneCommandService, StandaloneKeybindingService, StandaloneTelemetryService, SimpleLayoutService } from './simpleServices.js';\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\nimport { StandaloneThemeServiceImpl } from './standaloneThemeServiceImpl.js';\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService, createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { ConsoleLogService, ILogService } from '../../../platform/log/common/log.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsServiceImpl.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { getSingletonServiceDescriptors } from '../../../platform/instantiation/common/extensions.js';\nimport { AccessibilityService } from '../../../platform/accessibility/common/accessibilityService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IUndoRedoService } from '../../../platform/undoRedo/common/undoRedo.js';\nimport { UndoRedoService } from '../../../platform/undoRedo/common/undoRedoService.js';\nimport { StandaloneQuickInputServiceImpl } from './quickInput/standaloneQuickInputServiceImpl.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nexport var StaticServices;\n\n(function (StaticServices) {\n  var _serviceCollection = new ServiceCollection();\n\n  var LazyStaticService = /*#__PURE__*/function () {\n    function LazyStaticService(serviceId, factory) {\n      _classCallCheck(this, LazyStaticService);\n\n      this._serviceId = serviceId;\n      this._factory = factory;\n      this._value = null;\n    }\n\n    _createClass(LazyStaticService, [{\n      key: \"get\",\n      value: function get(overrides) {\n        if (!this._value) {\n          if (overrides) {\n            this._value = overrides[this._serviceId.toString()];\n          }\n\n          if (!this._value) {\n            this._value = this._factory(overrides);\n          }\n\n          if (!this._value) {\n            throw new Error('Service ' + this._serviceId + ' is missing!');\n          }\n\n          _serviceCollection.set(this._serviceId, this._value);\n        }\n\n        return this._value;\n      }\n    }, {\n      key: \"id\",\n      get: function get() {\n        return this._serviceId;\n      }\n    }]);\n\n    return LazyStaticService;\n  }();\n\n  StaticServices.LazyStaticService = LazyStaticService;\n  var _all = [];\n\n  function define(serviceId, factory) {\n    var r = new LazyStaticService(serviceId, factory);\n\n    _all.push(r);\n\n    return r;\n  }\n\n  function init(overrides) {\n    // Create a fresh service collection\n    var result = new ServiceCollection(); // make sure to add all services that use `registerSingleton`\n\n    var _iterator = _createForOfIteratorHelper(getSingletonServiceDescriptors()),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            id = _step$value[0],\n            descriptor = _step$value[1];\n\n        result.set(id, descriptor);\n      } // Initialize the service collection with the overrides\n\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    for (var serviceId in overrides) {\n      if (overrides.hasOwnProperty(serviceId)) {\n        result.set(createDecorator(serviceId), overrides[serviceId]);\n      }\n    } // Make sure the same static services are present in all service collections\n\n\n    _all.forEach(function (service) {\n      return result.set(service.id, service.get(overrides));\n    }); // Ensure the collection gets the correct instantiation service\n\n\n    var instantiationService = new InstantiationService(result, true);\n    result.set(IInstantiationService, instantiationService);\n    return [result, instantiationService];\n  }\n\n  StaticServices.init = init;\n  StaticServices.instantiationService = define(IInstantiationService, function () {\n    return new InstantiationService(_serviceCollection, true);\n  });\n  var configurationServiceImpl = new SimpleConfigurationService();\n  StaticServices.configurationService = define(IConfigurationService, function () {\n    return configurationServiceImpl;\n  });\n  StaticServices.resourceConfigurationService = define(ITextResourceConfigurationService, function () {\n    return new SimpleResourceConfigurationService(configurationServiceImpl);\n  });\n  StaticServices.resourcePropertiesService = define(ITextResourcePropertiesService, function () {\n    return new SimpleResourcePropertiesService(configurationServiceImpl);\n  });\n  StaticServices.contextService = define(IWorkspaceContextService, function () {\n    return new SimpleWorkspaceContextService();\n  });\n  StaticServices.labelService = define(ILabelService, function () {\n    return new SimpleUriLabelService();\n  });\n  StaticServices.telemetryService = define(ITelemetryService, function () {\n    return new StandaloneTelemetryService();\n  });\n  StaticServices.dialogService = define(IDialogService, function () {\n    return new SimpleDialogService();\n  });\n  StaticServices.notificationService = define(INotificationService, function () {\n    return new SimpleNotificationService();\n  });\n  StaticServices.markerService = define(IMarkerService, function () {\n    return new MarkerService();\n  });\n  StaticServices.modeService = define(IModeService, function (o) {\n    return new ModeServiceImpl();\n  });\n  StaticServices.standaloneThemeService = define(IStandaloneThemeService, function () {\n    return new StandaloneThemeServiceImpl();\n  });\n  StaticServices.logService = define(ILogService, function () {\n    return new ConsoleLogService();\n  });\n  StaticServices.undoRedoService = define(IUndoRedoService, function (o) {\n    return new UndoRedoService(StaticServices.dialogService.get(o), StaticServices.notificationService.get(o));\n  });\n  StaticServices.modelService = define(IModelService, function (o) {\n    return new ModelServiceImpl(StaticServices.configurationService.get(o), StaticServices.resourcePropertiesService.get(o), StaticServices.standaloneThemeService.get(o), StaticServices.logService.get(o), StaticServices.undoRedoService.get(o));\n  });\n  StaticServices.markerDecorationsService = define(IMarkerDecorationsService, function (o) {\n    return new MarkerDecorationsService(StaticServices.modelService.get(o), StaticServices.markerService.get(o));\n  });\n  StaticServices.codeEditorService = define(ICodeEditorService, function (o) {\n    return new StandaloneCodeEditorServiceImpl(StaticServices.standaloneThemeService.get(o));\n  });\n  StaticServices.editorProgressService = define(IEditorProgressService, function () {\n    return new SimpleEditorProgressService();\n  });\n  StaticServices.storageService = define(IStorageService, function () {\n    return new InMemoryStorageService();\n  });\n  StaticServices.editorWorkerService = define(IEditorWorkerService, function (o) {\n    return new EditorWorkerServiceImpl(StaticServices.modelService.get(o), StaticServices.resourceConfigurationService.get(o), StaticServices.logService.get(o));\n  });\n})(StaticServices || (StaticServices = {}));\n\nexport var DynamicStandaloneServices = /*#__PURE__*/function (_Disposable) {\n  _inherits(DynamicStandaloneServices, _Disposable);\n\n  var _super = _createSuper(DynamicStandaloneServices);\n\n  function DynamicStandaloneServices(domElement, overrides) {\n    var _this;\n\n    _classCallCheck(this, DynamicStandaloneServices);\n\n    _this = _super.call(this);\n\n    var _StaticServices$init = StaticServices.init(overrides),\n        _StaticServices$init2 = _slicedToArray(_StaticServices$init, 2),\n        _serviceCollection = _StaticServices$init2[0],\n        _instantiationService = _StaticServices$init2[1];\n\n    _this._serviceCollection = _serviceCollection;\n    _this._instantiationService = _instantiationService;\n\n    var configurationService = _this.get(IConfigurationService);\n\n    var notificationService = _this.get(INotificationService);\n\n    var telemetryService = _this.get(ITelemetryService);\n\n    var themeService = _this.get(IThemeService);\n\n    var logService = _this.get(ILogService);\n\n    var ensure = function ensure(serviceId, factory) {\n      var value = null;\n\n      if (overrides) {\n        value = overrides[serviceId.toString()];\n      }\n\n      if (!value) {\n        value = factory();\n      }\n\n      _this._serviceCollection.set(serviceId, value);\n\n      return value;\n    };\n\n    var contextKeyService = ensure(IContextKeyService, function () {\n      return _this._register(new ContextKeyService(configurationService));\n    });\n    ensure(IAccessibilityService, function () {\n      return new AccessibilityService(contextKeyService, configurationService);\n    });\n    ensure(IListService, function () {\n      return new ListService(themeService);\n    });\n    var commandService = ensure(ICommandService, function () {\n      return new StandaloneCommandService(_this._instantiationService);\n    });\n    var keybindingService = ensure(IKeybindingService, function () {\n      return _this._register(new StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, logService, domElement));\n    });\n    var layoutService = ensure(ILayoutService, function () {\n      return new SimpleLayoutService(StaticServices.codeEditorService.get(ICodeEditorService), domElement);\n    });\n    ensure(IQuickInputService, function () {\n      return new StandaloneQuickInputServiceImpl(_instantiationService, StaticServices.codeEditorService.get(ICodeEditorService));\n    });\n    var contextViewService = ensure(IContextViewService, function () {\n      return _this._register(new ContextViewService(layoutService));\n    });\n    ensure(IClipboardService, function () {\n      return new BrowserClipboardService();\n    });\n    ensure(IContextMenuService, function () {\n      var contextMenuService = new ContextMenuService(telemetryService, notificationService, contextViewService, keybindingService, themeService);\n      contextMenuService.configure({\n        blockMouse: false\n      }); // we do not want that in the standalone editor\n\n      return _this._register(contextMenuService);\n    });\n    ensure(IMenuService, function () {\n      return new MenuService(commandService);\n    });\n    ensure(IBulkEditService, function () {\n      return new SimpleBulkEditService(StaticServices.modelService.get(IModelService));\n    });\n    return _this;\n  }\n\n  _createClass(DynamicStandaloneServices, [{\n    key: \"get\",\n    value: function get(serviceId) {\n      var r = this._serviceCollection.get(serviceId);\n\n      if (!r) {\n        throw new Error('Missing service ' + serviceId);\n      }\n\n      return r;\n    }\n  }, {\n    key: \"set\",\n    value: function set(serviceId, instance) {\n      this._serviceCollection.set(serviceId, instance);\n    }\n  }, {\n    key: \"has\",\n    value: function has(serviceId) {\n      return this._serviceCollection.has(serviceId);\n    }\n  }]);\n\n  return DynamicStandaloneServices;\n}(Disposable);","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js"],"names":["Disposable","IBulkEditService","ICodeEditorService","IEditorWorkerService","EditorWorkerServiceImpl","IModeService","ModeServiceImpl","IModelService","ModelServiceImpl","ITextResourceConfigurationService","ITextResourcePropertiesService","SimpleBulkEditService","SimpleConfigurationService","SimpleDialogService","SimpleNotificationService","SimpleEditorProgressService","SimpleResourceConfigurationService","SimpleResourcePropertiesService","SimpleUriLabelService","SimpleWorkspaceContextService","StandaloneCommandService","StandaloneKeybindingService","StandaloneTelemetryService","SimpleLayoutService","StandaloneCodeEditorServiceImpl","StandaloneThemeServiceImpl","IStandaloneThemeService","IMenuService","ICommandService","IConfigurationService","ContextKeyService","IContextKeyService","ContextMenuService","IContextMenuService","IContextViewService","ContextViewService","IDialogService","IInstantiationService","createDecorator","InstantiationService","ServiceCollection","IKeybindingService","ILabelService","IListService","ListService","ConsoleLogService","ILogService","MarkerService","IMarkerService","INotificationService","IEditorProgressService","IStorageService","InMemoryStorageService","ITelemetryService","IThemeService","IWorkspaceContextService","MenuService","IMarkerDecorationsService","MarkerDecorationsService","IAccessibilityService","ILayoutService","getSingletonServiceDescriptors","AccessibilityService","IClipboardService","BrowserClipboardService","IUndoRedoService","UndoRedoService","StandaloneQuickInputServiceImpl","IQuickInputService","StaticServices","_serviceCollection","LazyStaticService","serviceId","factory","_serviceId","_factory","_value","overrides","toString","Error","set","_all","define","r","push","init","result","id","descriptor","hasOwnProperty","forEach","service","get","instantiationService","configurationServiceImpl","configurationService","resourceConfigurationService","resourcePropertiesService","contextService","labelService","telemetryService","dialogService","notificationService","markerService","modeService","o","standaloneThemeService","logService","undoRedoService","modelService","markerDecorationsService","codeEditorService","editorProgressService","storageService","editorWorkerService","DynamicStandaloneServices","domElement","_instantiationService","themeService","ensure","value","contextKeyService","_register","commandService","keybindingService","layoutService","contextViewService","contextMenuService","configure","blockMouse","instance","has"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { EditorWorkerServiceImpl } from '../../common/services/editorWorkerServiceImpl.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { ModeServiceImpl } from '../../common/services/modeServiceImpl.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { ModelServiceImpl } from '../../common/services/modelServiceImpl.js';\r\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfigurationService.js';\r\nimport { SimpleBulkEditService, SimpleConfigurationService, SimpleDialogService, SimpleNotificationService, SimpleEditorProgressService, SimpleResourceConfigurationService, SimpleResourcePropertiesService, SimpleUriLabelService, SimpleWorkspaceContextService, StandaloneCommandService, StandaloneKeybindingService, StandaloneTelemetryService, SimpleLayoutService } from './simpleServices.js';\r\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\r\nimport { StandaloneThemeServiceImpl } from './standaloneThemeServiceImpl.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\r\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\r\nimport { IInstantiationService, createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../platform/label/common/label.js';\r\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\r\nimport { ConsoleLogService, ILogService } from '../../../platform/log/common/log.js';\r\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\r\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\r\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsServiceImpl.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\r\nimport { getSingletonServiceDescriptors } from '../../../platform/instantiation/common/extensions.js';\r\nimport { AccessibilityService } from '../../../platform/accessibility/common/accessibilityService.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\r\nimport { IUndoRedoService } from '../../../platform/undoRedo/common/undoRedo.js';\r\nimport { UndoRedoService } from '../../../platform/undoRedo/common/undoRedoService.js';\r\nimport { StandaloneQuickInputServiceImpl } from './quickInput/standaloneQuickInputServiceImpl.js';\r\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\r\nexport var StaticServices;\r\n(function (StaticServices) {\r\n    const _serviceCollection = new ServiceCollection();\r\n    class LazyStaticService {\r\n        constructor(serviceId, factory) {\r\n            this._serviceId = serviceId;\r\n            this._factory = factory;\r\n            this._value = null;\r\n        }\r\n        get id() { return this._serviceId; }\r\n        get(overrides) {\r\n            if (!this._value) {\r\n                if (overrides) {\r\n                    this._value = overrides[this._serviceId.toString()];\r\n                }\r\n                if (!this._value) {\r\n                    this._value = this._factory(overrides);\r\n                }\r\n                if (!this._value) {\r\n                    throw new Error('Service ' + this._serviceId + ' is missing!');\r\n                }\r\n                _serviceCollection.set(this._serviceId, this._value);\r\n            }\r\n            return this._value;\r\n        }\r\n    }\r\n    StaticServices.LazyStaticService = LazyStaticService;\r\n    let _all = [];\r\n    function define(serviceId, factory) {\r\n        let r = new LazyStaticService(serviceId, factory);\r\n        _all.push(r);\r\n        return r;\r\n    }\r\n    function init(overrides) {\r\n        // Create a fresh service collection\r\n        let result = new ServiceCollection();\r\n        // make sure to add all services that use `registerSingleton`\r\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\r\n            result.set(id, descriptor);\r\n        }\r\n        // Initialize the service collection with the overrides\r\n        for (let serviceId in overrides) {\r\n            if (overrides.hasOwnProperty(serviceId)) {\r\n                result.set(createDecorator(serviceId), overrides[serviceId]);\r\n            }\r\n        }\r\n        // Make sure the same static services are present in all service collections\r\n        _all.forEach(service => result.set(service.id, service.get(overrides)));\r\n        // Ensure the collection gets the correct instantiation service\r\n        let instantiationService = new InstantiationService(result, true);\r\n        result.set(IInstantiationService, instantiationService);\r\n        return [result, instantiationService];\r\n    }\r\n    StaticServices.init = init;\r\n    StaticServices.instantiationService = define(IInstantiationService, () => new InstantiationService(_serviceCollection, true));\r\n    const configurationServiceImpl = new SimpleConfigurationService();\r\n    StaticServices.configurationService = define(IConfigurationService, () => configurationServiceImpl);\r\n    StaticServices.resourceConfigurationService = define(ITextResourceConfigurationService, () => new SimpleResourceConfigurationService(configurationServiceImpl));\r\n    StaticServices.resourcePropertiesService = define(ITextResourcePropertiesService, () => new SimpleResourcePropertiesService(configurationServiceImpl));\r\n    StaticServices.contextService = define(IWorkspaceContextService, () => new SimpleWorkspaceContextService());\r\n    StaticServices.labelService = define(ILabelService, () => new SimpleUriLabelService());\r\n    StaticServices.telemetryService = define(ITelemetryService, () => new StandaloneTelemetryService());\r\n    StaticServices.dialogService = define(IDialogService, () => new SimpleDialogService());\r\n    StaticServices.notificationService = define(INotificationService, () => new SimpleNotificationService());\r\n    StaticServices.markerService = define(IMarkerService, () => new MarkerService());\r\n    StaticServices.modeService = define(IModeService, (o) => new ModeServiceImpl());\r\n    StaticServices.standaloneThemeService = define(IStandaloneThemeService, () => new StandaloneThemeServiceImpl());\r\n    StaticServices.logService = define(ILogService, () => new ConsoleLogService());\r\n    StaticServices.undoRedoService = define(IUndoRedoService, (o) => new UndoRedoService(StaticServices.dialogService.get(o), StaticServices.notificationService.get(o)));\r\n    StaticServices.modelService = define(IModelService, (o) => new ModelServiceImpl(StaticServices.configurationService.get(o), StaticServices.resourcePropertiesService.get(o), StaticServices.standaloneThemeService.get(o), StaticServices.logService.get(o), StaticServices.undoRedoService.get(o)));\r\n    StaticServices.markerDecorationsService = define(IMarkerDecorationsService, (o) => new MarkerDecorationsService(StaticServices.modelService.get(o), StaticServices.markerService.get(o)));\r\n    StaticServices.codeEditorService = define(ICodeEditorService, (o) => new StandaloneCodeEditorServiceImpl(StaticServices.standaloneThemeService.get(o)));\r\n    StaticServices.editorProgressService = define(IEditorProgressService, () => new SimpleEditorProgressService());\r\n    StaticServices.storageService = define(IStorageService, () => new InMemoryStorageService());\r\n    StaticServices.editorWorkerService = define(IEditorWorkerService, (o) => new EditorWorkerServiceImpl(StaticServices.modelService.get(o), StaticServices.resourceConfigurationService.get(o), StaticServices.logService.get(o)));\r\n})(StaticServices || (StaticServices = {}));\r\nexport class DynamicStandaloneServices extends Disposable {\r\n    constructor(domElement, overrides) {\r\n        super();\r\n        const [_serviceCollection, _instantiationService] = StaticServices.init(overrides);\r\n        this._serviceCollection = _serviceCollection;\r\n        this._instantiationService = _instantiationService;\r\n        const configurationService = this.get(IConfigurationService);\r\n        const notificationService = this.get(INotificationService);\r\n        const telemetryService = this.get(ITelemetryService);\r\n        const themeService = this.get(IThemeService);\r\n        const logService = this.get(ILogService);\r\n        let ensure = (serviceId, factory) => {\r\n            let value = null;\r\n            if (overrides) {\r\n                value = overrides[serviceId.toString()];\r\n            }\r\n            if (!value) {\r\n                value = factory();\r\n            }\r\n            this._serviceCollection.set(serviceId, value);\r\n            return value;\r\n        };\r\n        let contextKeyService = ensure(IContextKeyService, () => this._register(new ContextKeyService(configurationService)));\r\n        ensure(IAccessibilityService, () => new AccessibilityService(contextKeyService, configurationService));\r\n        ensure(IListService, () => new ListService(themeService));\r\n        let commandService = ensure(ICommandService, () => new StandaloneCommandService(this._instantiationService));\r\n        let keybindingService = ensure(IKeybindingService, () => this._register(new StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, logService, domElement)));\r\n        let layoutService = ensure(ILayoutService, () => new SimpleLayoutService(StaticServices.codeEditorService.get(ICodeEditorService), domElement));\r\n        ensure(IQuickInputService, () => new StandaloneQuickInputServiceImpl(_instantiationService, StaticServices.codeEditorService.get(ICodeEditorService)));\r\n        let contextViewService = ensure(IContextViewService, () => this._register(new ContextViewService(layoutService)));\r\n        ensure(IClipboardService, () => new BrowserClipboardService());\r\n        ensure(IContextMenuService, () => {\r\n            const contextMenuService = new ContextMenuService(telemetryService, notificationService, contextViewService, keybindingService, themeService);\r\n            contextMenuService.configure({ blockMouse: false }); // we do not want that in the standalone editor\r\n            return this._register(contextMenuService);\r\n        });\r\n        ensure(IMenuService, () => new MenuService(commandService));\r\n        ensure(IBulkEditService, () => new SimpleBulkEditService(StaticServices.modelService.get(IModelService)));\r\n    }\r\n    get(serviceId) {\r\n        let r = this._serviceCollection.get(serviceId);\r\n        if (!r) {\r\n            throw new Error('Missing service ' + serviceId);\r\n        }\r\n        return r;\r\n    }\r\n    set(serviceId, instance) {\r\n        this._serviceCollection.set(serviceId, instance);\r\n    }\r\n    has(serviceId) {\r\n        return this._serviceCollection.has(serviceId);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}