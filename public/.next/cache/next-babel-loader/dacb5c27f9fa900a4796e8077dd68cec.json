{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Axios from \"axios\";\nimport Head from \"next/head\";\nimport { useState } from \"react\";\nimport classNames from 'classnames';\nimport { useRouter } from \"next/router\";\nexport default function create() {\n  const {\n    0: name,\n    1: setName\n  } = useState('');\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: description,\n    1: setDescription\n  } = useState('');\n  const {\n    0: errors,\n    1: setErrors\n  } = useState({});\n  const router = useRouter();\n\n  const submitForm = async event => {\n    event.preventDefault();\n\n    try {\n      const res = await Axios.post('/subs', {\n        name,\n        title,\n        description\n      });\n      router.push(`/r/${res.data.name}`);\n    } catch (error) {\n      console.log(error);\n      setErrors(error.response.data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"flex bg-white\",\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Create a Community\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"h-screen bg-center bg-cover w-36\",\n      style: {\n        backgroundImage: \"url('/images/waterfall.jpg')\"\n      }\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex flex-col justify-center pl-6\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"w-98\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"mb-2 text-lg font-medium\",\n          children: \"Create a Community\"\n        }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: submitForm,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"my-6\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"font-medium\",\n              children: \"Name\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-2 text-xs text-gray-500\",\n              children: \"Community name cannot be changed.\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              className: classNames(\"w-full p-3 border border-gray-200 rounded hover:border-gray-500\", {\n                'border-red-600': errors.name\n              })\n            }), /*#__PURE__*/_jsx(\"small\", {\n              className: \"font-medium text-red-600\",\n              children: errors.name\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"my-6\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"font-medium\",\n              children: \"Title\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-2 text-xs text-gray-500\",\n              children: \"Community title represents the topic of discussion and you can change it at any time.\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              value: title,\n              onChange: e => setTitle(e.target.value),\n              className: classNames(\"w-full p-3 border border-gray-200 rounded hover:border-gray-500\", {\n                'border-red-600': errors.title\n              })\n            }), /*#__PURE__*/_jsx(\"small\", {\n              className: \"font-medium text-red-600\",\n              children: errors.title\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"my-6\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"font-medium\",\n              children: \"Description\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"mb-2 text-xs text-gray-500\",\n              children: \"Write a few lines about your community. It's optional.\"\n            }), /*#__PURE__*/_jsx(\"textarea\", {\n              value: description,\n              onChange: e => setDescription(e.target.value),\n              className: classNames(\"w-full p-3 border border-gray-200 rounded hover:border-gray-500\", {\n                'border-red-600': errors.description\n              })\n            }), /*#__PURE__*/_jsx(\"small\", {\n              className: \"font-medium text-red-600\",\n              children: errors.description\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsx(\"button\", {\n              className: \"px-4 py-1 text-sm font-semibold capitalize blue button\",\n              children: \"Create Community\"\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}\nexport const getServerSideProps = async ({\n  req,\n  res\n}) => {\n  try {\n    const cookie = req.headers.cookie;\n\n    if (!cookie) {\n      throw new Error('Missing cookie');\n    }\n\n    await Axios.get('/auth/me', {\n      headers: {\n        cookie\n      }\n    });\n    return {\n      props: {\n        message: 'Message'\n      }\n    };\n  } catch (error) {\n    res.writeHead(307, {\n      Location: '/login'\n    }).end();\n  }\n};","map":null,"metadata":{},"sourceType":"module"}