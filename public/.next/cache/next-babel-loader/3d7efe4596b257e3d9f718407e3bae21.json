{"ast":null,"code":"import _get from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _toConsumableArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport './list.css';\nimport { dispose as _dispose, DisposableStore } from '../../../common/lifecycle.js';\nimport { isNumber } from '../../../common/types.js';\nimport { range, binarySearch } from '../../../common/arrays.js';\nimport { memoize } from '../../../common/decorators.js';\nimport * as platform from '../../../common/platform.js';\nimport { Gesture } from '../../touch.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Event, Emitter, EventBufferer } from '../../../common/event.js';\nimport { domEvent } from '../../event.js';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nimport { alert } from '../aria/aria.js';\nimport { createStyleSheet } from '../../dom.js';\n\nvar TraitRenderer = /*#__PURE__*/function () {\n  function TraitRenderer(trait) {\n    _classCallCheck(this, TraitRenderer);\n\n    this.trait = trait;\n    this.renderedElements = [];\n  }\n\n  _createClass(TraitRenderer, [{\n    key: \"renderTemplate\",\n    value: function renderTemplate(container) {\n      return container;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(element, index, templateData) {\n      var renderedElementIndex = this.renderedElements.findIndex(function (el) {\n        return el.templateData === templateData;\n      });\n\n      if (renderedElementIndex >= 0) {\n        var rendered = this.renderedElements[renderedElementIndex];\n        this.trait.unrender(templateData);\n        rendered.index = index;\n      } else {\n        var _rendered = {\n          index: index,\n          templateData: templateData\n        };\n        this.renderedElements.push(_rendered);\n      }\n\n      this.trait.renderIndex(index, templateData);\n    }\n  }, {\n    key: \"splice\",\n    value: function splice(start, deleteCount, insertCount) {\n      var rendered = [];\n\n      var _iterator = _createForOfIteratorHelper(this.renderedElements),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var renderedElement = _step.value;\n\n          if (renderedElement.index < start) {\n            rendered.push(renderedElement);\n          } else if (renderedElement.index >= start + deleteCount) {\n            rendered.push({\n              index: renderedElement.index + insertCount - deleteCount,\n              templateData: renderedElement.templateData\n            });\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.renderedElements = rendered;\n    }\n  }, {\n    key: \"renderIndexes\",\n    value: function renderIndexes(indexes) {\n      var _iterator2 = _createForOfIteratorHelper(this.renderedElements),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _step2$value = _step2.value,\n              index = _step2$value.index,\n              templateData = _step2$value.templateData;\n\n          if (indexes.indexOf(index) > -1) {\n            this.trait.renderIndex(index, templateData);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"disposeTemplate\",\n    value: function disposeTemplate(templateData) {\n      var index = this.renderedElements.findIndex(function (el) {\n        return el.templateData === templateData;\n      });\n\n      if (index < 0) {\n        return;\n      }\n\n      this.renderedElements.splice(index, 1);\n    }\n  }, {\n    key: \"templateId\",\n    get: function get() {\n      return \"template:\".concat(this.trait.trait);\n    }\n  }]);\n\n  return TraitRenderer;\n}();\n\nvar Trait = /*#__PURE__*/function () {\n  function Trait(_trait) {\n    _classCallCheck(this, Trait);\n\n    this._trait = _trait;\n    this.indexes = [];\n    this.sortedIndexes = [];\n    this._onChange = new Emitter();\n    this.onChange = this._onChange.event;\n  }\n\n  _createClass(Trait, [{\n    key: \"splice\",\n    value: function splice(start, deleteCount, elements) {\n      var diff = elements.length - deleteCount;\n      var end = start + deleteCount;\n      var indexes = [].concat(_toConsumableArray(this.sortedIndexes.filter(function (i) {\n        return i < start;\n      })), _toConsumableArray(elements.map(function (hasTrait, i) {\n        return hasTrait ? i + start : -1;\n      }).filter(function (i) {\n        return i !== -1;\n      })), _toConsumableArray(this.sortedIndexes.filter(function (i) {\n        return i >= end;\n      }).map(function (i) {\n        return i + diff;\n      })));\n      this.renderer.splice(start, deleteCount, elements.length);\n\n      this._set(indexes, indexes);\n    }\n  }, {\n    key: \"renderIndex\",\n    value: function renderIndex(index, container) {\n      container.classList.toggle(this._trait, this.contains(index));\n    }\n  }, {\n    key: \"unrender\",\n    value: function unrender(container) {\n      container.classList.remove(this._trait);\n    }\n    /**\r\n     * Sets the indexes which should have this trait.\r\n     *\r\n     * @param indexes Indexes which should have this trait.\r\n     * @return The old indexes which had this trait.\r\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(indexes, browserEvent) {\n      return this._set(indexes, _toConsumableArray(indexes).sort(numericSort), browserEvent);\n    }\n  }, {\n    key: \"_set\",\n    value: function _set(indexes, sortedIndexes, browserEvent) {\n      var result = this.indexes;\n      var sortedResult = this.sortedIndexes;\n      this.indexes = indexes;\n      this.sortedIndexes = sortedIndexes;\n      var toRender = disjunction(sortedResult, indexes);\n      this.renderer.renderIndexes(toRender);\n\n      this._onChange.fire({\n        indexes: indexes,\n        browserEvent: browserEvent\n      });\n\n      return result;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.indexes;\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(index) {\n      return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _dispose(this._onChange);\n    }\n  }, {\n    key: \"trait\",\n    get: function get() {\n      return this._trait;\n    }\n  }, {\n    key: \"renderer\",\n    get: function get() {\n      return new TraitRenderer(this);\n    }\n  }]);\n\n  return Trait;\n}();\n\n__decorate([memoize], Trait.prototype, \"renderer\", null);\n\nvar SelectionTrait = /*#__PURE__*/function (_Trait) {\n  _inherits(SelectionTrait, _Trait);\n\n  var _super = _createSuper(SelectionTrait);\n\n  function SelectionTrait(setAriaSelected) {\n    var _this;\n\n    _classCallCheck(this, SelectionTrait);\n\n    _this = _super.call(this, 'selected');\n    _this.setAriaSelected = setAriaSelected;\n    return _this;\n  }\n\n  _createClass(SelectionTrait, [{\n    key: \"renderIndex\",\n    value: function renderIndex(index, container) {\n      _get(_getPrototypeOf(SelectionTrait.prototype), \"renderIndex\", this).call(this, index, container);\n\n      if (this.setAriaSelected) {\n        if (this.contains(index)) {\n          container.setAttribute('aria-selected', 'true');\n        } else {\n          container.setAttribute('aria-selected', 'false');\n        }\n      }\n    }\n  }]);\n\n  return SelectionTrait;\n}(Trait);\n/**\r\n * The TraitSpliceable is used as a util class to be able\r\n * to preserve traits across splice calls, given an identity\r\n * provider.\r\n */\n\n\nvar TraitSpliceable = /*#__PURE__*/function () {\n  function TraitSpliceable(trait, view, identityProvider) {\n    _classCallCheck(this, TraitSpliceable);\n\n    this.trait = trait;\n    this.view = view;\n    this.identityProvider = identityProvider;\n  }\n\n  _createClass(TraitSpliceable, [{\n    key: \"splice\",\n    value: function splice(start, deleteCount, elements) {\n      var _this2 = this;\n\n      if (!this.identityProvider) {\n        return this.trait.splice(start, deleteCount, elements.map(function () {\n          return false;\n        }));\n      }\n\n      var pastElementsWithTrait = this.trait.get().map(function (i) {\n        return _this2.identityProvider.getId(_this2.view.element(i)).toString();\n      });\n      var elementsWithTrait = elements.map(function (e) {\n        return pastElementsWithTrait.indexOf(_this2.identityProvider.getId(e).toString()) > -1;\n      });\n      this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n  }]);\n\n  return TraitSpliceable;\n}();\n\nexport function isInputElement(e) {\n  return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n  if (e.classList.contains('monaco-editor')) {\n    return true;\n  }\n\n  if (e.classList.contains('monaco-list')) {\n    return false;\n  }\n\n  if (!e.parentElement) {\n    return false;\n  }\n\n  return isMonacoEditor(e.parentElement);\n}\n\nvar KeyboardController = /*#__PURE__*/function () {\n  function KeyboardController(list, view, options) {\n    _classCallCheck(this, KeyboardController);\n\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    var multipleSelectionSupport = options.multipleSelectionSupport !== false;\n    var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown')).filter(function (e) {\n      return !isInputElement(e.target);\n    }).map(function (e) {\n      return new StandardKeyboardEvent(e);\n    });\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 3;\n    }\n    /* Enter */\n    ).on(this.onEnter, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 16;\n    }\n    /* UpArrow */\n    ).on(this.onUpArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 18;\n    }\n    /* DownArrow */\n    ).on(this.onDownArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 11;\n    }\n    /* PageUp */\n    ).on(this.onPageUpArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 12;\n    }\n    /* PageDown */\n    ).on(this.onPageDownArrow, this, this.disposables);\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 9;\n    }\n    /* Escape */\n    ).on(this.onEscape, this, this.disposables);\n\n    if (multipleSelectionSupport) {\n      onKeyDown.filter(function (e) {\n        return (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31;\n      }\n      /* KEY_A */\n      ).on(this.onCtrlA, this, this.disposables);\n    }\n  }\n\n  _createClass(KeyboardController, [{\n    key: \"onEnter\",\n    value: function onEnter(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n  }, {\n    key: \"onUpArrow\",\n    value: function onUpArrow(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.focusPrevious(1, false, e.browserEvent);\n      this.list.reveal(this.list.getFocus()[0]);\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"onDownArrow\",\n    value: function onDownArrow(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.focusNext(1, false, e.browserEvent);\n      this.list.reveal(this.list.getFocus()[0]);\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"onPageUpArrow\",\n    value: function onPageUpArrow(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.focusPreviousPage(e.browserEvent);\n      this.list.reveal(this.list.getFocus()[0]);\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"onPageDownArrow\",\n    value: function onPageDownArrow(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.focusNextPage(e.browserEvent);\n      this.list.reveal(this.list.getFocus()[0]);\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"onCtrlA\",\n    value: function onCtrlA(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.setSelection(range(this.list.length), e.browserEvent);\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"onEscape\",\n    value: function onEscape(e) {\n      if (this.list.getSelection().length) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection([], e.browserEvent);\n        this.view.domNode.focus();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.disposables.dispose();\n    }\n  }]);\n\n  return KeyboardController;\n}();\n\nvar TypeLabelControllerState;\n\n(function (TypeLabelControllerState) {\n  TypeLabelControllerState[TypeLabelControllerState[\"Idle\"] = 0] = \"Idle\";\n  TypeLabelControllerState[TypeLabelControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeLabelControllerState || (TypeLabelControllerState = {}));\n\nexport var DefaultKeyboardNavigationDelegate = new ( /*#__PURE__*/function () {\n  function _class() {\n    _classCallCheck(this, _class);\n  }\n\n  _createClass(_class, [{\n    key: \"mightProducePrintableCharacter\",\n    value: function mightProducePrintableCharacter(event) {\n      if (event.ctrlKey || event.metaKey || event.altKey) {\n        return false;\n      }\n\n      return event.keyCode >= 31\n      /* KEY_A */\n      && event.keyCode <= 56\n      /* KEY_Z */\n      || event.keyCode >= 21\n      /* KEY_0 */\n      && event.keyCode <= 30\n      /* KEY_9 */\n      || event.keyCode >= 93\n      /* NUMPAD_0 */\n      && event.keyCode <= 102\n      /* NUMPAD_9 */\n      || event.keyCode >= 80\n      /* US_SEMICOLON */\n      && event.keyCode <= 90\n      /* US_QUOTE */\n      ;\n    }\n  }]);\n\n  return _class;\n}())();\n\nvar TypeLabelController = /*#__PURE__*/function () {\n  function TypeLabelController(list, view, keyboardNavigationLabelProvider, delegate) {\n    _classCallCheck(this, TypeLabelController);\n\n    this.list = list;\n    this.view = view;\n    this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n    this.delegate = delegate;\n    this.enabled = false;\n    this.state = TypeLabelControllerState.Idle;\n    this.automaticKeyboardNavigation = true;\n    this.triggered = false;\n    this.previouslyFocused = -1;\n    this.enabledDisposables = new DisposableStore();\n    this.disposables = new DisposableStore();\n    this.updateOptions(list.options);\n  }\n\n  _createClass(TypeLabelController, [{\n    key: \"updateOptions\",\n    value: function updateOptions(options) {\n      var enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\n\n      if (enableKeyboardNavigation) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n\n      if (typeof options.automaticKeyboardNavigation !== 'undefined') {\n        this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\n      }\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var _this3 = this;\n\n      if (this.enabled) {\n        return;\n      }\n\n      var onChar = Event.chain(domEvent(this.view.domNode, 'keydown')).filter(function (e) {\n        return !isInputElement(e.target);\n      }).filter(function () {\n        return _this3.automaticKeyboardNavigation || _this3.triggered;\n      }).map(function (event) {\n        return new StandardKeyboardEvent(event);\n      }).filter(function (e) {\n        return _this3.delegate.mightProducePrintableCharacter(e);\n      }).forEach(function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }).map(function (event) {\n        return event.browserEvent.key;\n      }).event;\n      var onClear = Event.debounce(onChar, function () {\n        return null;\n      }, 800);\n      var onInput = Event.reduce(Event.any(onChar, onClear), function (r, i) {\n        return i === null ? null : (r || '') + i;\n      });\n      onInput(this.onInput, this, this.enabledDisposables);\n      onClear(this.onClear, this, this.enabledDisposables);\n      this.enabled = true;\n      this.triggered = false;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      if (!this.enabled) {\n        return;\n      }\n\n      this.enabledDisposables.clear();\n      this.enabled = false;\n      this.triggered = false;\n    }\n  }, {\n    key: \"onClear\",\n    value: function onClear() {\n      var _a;\n\n      var focus = this.list.getFocus();\n\n      if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n        // List: re-anounce element on typing end since typed keys will interupt aria label of focused element\n        // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n        var ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n\n        if (ariaLabel) {\n          alert(ariaLabel);\n        }\n      }\n\n      this.previouslyFocused = -1;\n    }\n  }, {\n    key: \"onInput\",\n    value: function onInput(word) {\n      if (!word) {\n        this.state = TypeLabelControllerState.Idle;\n        this.triggered = false;\n        return;\n      }\n\n      var focus = this.list.getFocus();\n      var start = focus.length > 0 ? focus[0] : 0;\n      var delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\n      this.state = TypeLabelControllerState.Typing;\n\n      for (var i = 0; i < this.list.length; i++) {\n        var index = (start + i + delta) % this.list.length;\n        var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n        var labelStr = label && label.toString();\n\n        if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n          this.previouslyFocused = start;\n          this.list.setFocus([index]);\n          this.list.reveal(index);\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.disable();\n      this.enabledDisposables.dispose();\n      this.disposables.dispose();\n    }\n  }]);\n\n  return TypeLabelController;\n}();\n\nvar DOMFocusController = /*#__PURE__*/function () {\n  function DOMFocusController(list, view) {\n    _classCallCheck(this, DOMFocusController);\n\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown')).filter(function (e) {\n      return !isInputElement(e.target);\n    }).map(function (e) {\n      return new StandardKeyboardEvent(e);\n    });\n    onKeyDown.filter(function (e) {\n      return e.keyCode === 2\n      /* Tab */\n      && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey;\n    }).on(this.onTab, this, this.disposables);\n  }\n\n  _createClass(DOMFocusController, [{\n    key: \"onTab\",\n    value: function onTab(e) {\n      if (e.target !== this.view.domNode) {\n        return;\n      }\n\n      var focus = this.list.getFocus();\n\n      if (focus.length === 0) {\n        return;\n      }\n\n      var focusedDomElement = this.view.domElement(focus[0]);\n\n      if (!focusedDomElement) {\n        return;\n      }\n\n      var tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n\n      if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n        return;\n      }\n\n      var style = window.getComputedStyle(tabIndexElement);\n\n      if (style.visibility === 'hidden' || style.display === 'none') {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n      tabIndexElement.focus();\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.disposables.dispose();\n    }\n  }]);\n\n  return DOMFocusController;\n}();\n\nexport function isSelectionSingleChangeEvent(event) {\n  return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n  return event.browserEvent.shiftKey;\n}\n\nfunction isMouseRightClick(event) {\n  return event instanceof MouseEvent && event.button === 2;\n}\n\nvar DefaultMultipleSelectionController = {\n  isSelectionSingleChangeEvent: isSelectionSingleChangeEvent,\n  isSelectionRangeChangeEvent: isSelectionRangeChangeEvent\n};\nexport var MouseController = /*#__PURE__*/function () {\n  function MouseController(list) {\n    _classCallCheck(this, MouseController);\n\n    this.list = list;\n    this.disposables = new DisposableStore();\n    this._onPointer = new Emitter();\n    this.onPointer = this._onPointer.event;\n    this.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\n\n    if (this.multipleSelectionSupport) {\n      this.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\n    }\n\n    this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n\n    if (this.mouseSupport) {\n      list.onMouseDown(this.onMouseDown, this, this.disposables);\n      list.onContextMenu(this.onContextMenu, this, this.disposables);\n      list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n      list.onTouchStart(this.onMouseDown, this, this.disposables);\n      this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n    }\n\n    Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n  }\n\n  _createClass(MouseController, [{\n    key: \"isSelectionSingleChangeEvent\",\n    value: function isSelectionSingleChangeEvent(event) {\n      if (this.multipleSelectionController) {\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n      }\n\n      return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n    }\n  }, {\n    key: \"isSelectionRangeChangeEvent\",\n    value: function isSelectionRangeChangeEvent(event) {\n      if (this.multipleSelectionController) {\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n      }\n\n      return event.browserEvent.shiftKey;\n    }\n  }, {\n    key: \"isSelectionChangeEvent\",\n    value: function isSelectionChangeEvent(event) {\n      return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(e) {\n      if (isMonacoEditor(e.browserEvent.target)) {\n        return;\n      }\n\n      if (document.activeElement !== e.browserEvent.target) {\n        this.list.domFocus();\n      }\n    }\n  }, {\n    key: \"onContextMenu\",\n    value: function onContextMenu(e) {\n      if (isMonacoEditor(e.browserEvent.target)) {\n        return;\n      }\n\n      var focus = typeof e.index === 'undefined' ? [] : [e.index];\n      this.list.setFocus(focus, e.browserEvent);\n    }\n  }, {\n    key: \"onViewPointer\",\n    value: function onViewPointer(e) {\n      if (!this.mouseSupport) {\n        return;\n      }\n\n      if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n        return;\n      }\n\n      var reference = this.list.getFocus()[0];\n      var selection = this.list.getSelection();\n      reference = reference === undefined ? selection[0] : reference;\n      var focus = e.index;\n\n      if (typeof focus === 'undefined') {\n        this.list.setFocus([], e.browserEvent);\n        this.list.setSelection([], e.browserEvent);\n        return;\n      }\n\n      if (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\n        return this.changeSelection(e, reference);\n      }\n\n      if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n        return this.changeSelection(e, reference);\n      }\n\n      this.list.setFocus([focus], e.browserEvent);\n\n      if (!isMouseRightClick(e.browserEvent)) {\n        this.list.setSelection([focus], e.browserEvent);\n      }\n\n      this._onPointer.fire(e);\n    }\n  }, {\n    key: \"onDoubleClick\",\n    value: function onDoubleClick(e) {\n      if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n        return;\n      }\n\n      if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n        return;\n      }\n\n      var focus = this.list.getFocus();\n      this.list.setSelection(focus, e.browserEvent);\n    }\n  }, {\n    key: \"changeSelection\",\n    value: function changeSelection(e, reference) {\n      var focus = e.index;\n\n      if (this.isSelectionRangeChangeEvent(e) && reference !== undefined) {\n        var min = Math.min(reference, focus);\n        var max = Math.max(reference, focus);\n        var rangeSelection = range(min, max + 1);\n        var selection = this.list.getSelection();\n        var contiguousRange = getContiguousRangeContaining(disjunction(selection, [reference]), reference);\n\n        if (contiguousRange.length === 0) {\n          return;\n        }\n\n        var newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n        this.list.setSelection(newSelection, e.browserEvent);\n      } else if (this.isSelectionSingleChangeEvent(e)) {\n        var _selection = this.list.getSelection();\n\n        var _newSelection = _selection.filter(function (i) {\n          return i !== focus;\n        });\n\n        this.list.setFocus([focus]);\n\n        if (_selection.length === _newSelection.length) {\n          this.list.setSelection([].concat(_toConsumableArray(_newSelection), [focus]), e.browserEvent);\n        } else {\n          this.list.setSelection(_newSelection, e.browserEvent);\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.disposables.dispose();\n    }\n  }]);\n\n  return MouseController;\n}();\nexport var DefaultStyleController = /*#__PURE__*/function () {\n  function DefaultStyleController(styleElement, selectorSuffix) {\n    _classCallCheck(this, DefaultStyleController);\n\n    this.styleElement = styleElement;\n    this.selectorSuffix = selectorSuffix;\n  }\n\n  _createClass(DefaultStyleController, [{\n    key: \"style\",\n    value: function style(styles) {\n      var suffix = this.selectorSuffix && \".\".concat(this.selectorSuffix);\n      var content = [];\n\n      if (styles.listBackground) {\n        if (styles.listBackground.isOpaque()) {\n          content.push(\".monaco-list\".concat(suffix, \" .monaco-list-rows { background: \").concat(styles.listBackground, \"; }\"));\n        } else if (!platform.isMacintosh) {\n          // subpixel AA doesn't exist in macOS\n          console.warn(\"List with id '\".concat(this.selectorSuffix, \"' was styled with a non-opaque background color. This will break sub-pixel antialiasing.\"));\n        }\n      }\n\n      if (styles.listFocusBackground) {\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.focused { background-color: \").concat(styles.listFocusBackground, \"; }\"));\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.focused:hover { background-color: \").concat(styles.listFocusBackground, \"; }\")); // overwrite :hover style in this case!\n      }\n\n      if (styles.listFocusForeground) {\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.focused { color: \").concat(styles.listFocusForeground, \"; }\"));\n      }\n\n      if (styles.listActiveSelectionBackground) {\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.selected { background-color: \").concat(styles.listActiveSelectionBackground, \"; }\"));\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.selected:hover { background-color: \").concat(styles.listActiveSelectionBackground, \"; }\")); // overwrite :hover style in this case!\n      }\n\n      if (styles.listActiveSelectionForeground) {\n        content.push(\".monaco-list\".concat(suffix, \":focus .monaco-list-row.selected { color: \").concat(styles.listActiveSelectionForeground, \"; }\"));\n      }\n\n      if (styles.listFocusAndSelectionBackground) {\n        content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\".concat(suffix, \":focus .monaco-list-row.selected.focused { background-color: \").concat(styles.listFocusAndSelectionBackground, \"; }\\n\\t\\t\\t\"));\n      }\n\n      if (styles.listFocusAndSelectionForeground) {\n        content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\".concat(suffix, \":focus .monaco-list-row.selected.focused { color: \").concat(styles.listFocusAndSelectionForeground, \"; }\\n\\t\\t\\t\"));\n      }\n\n      if (styles.listInactiveFocusBackground) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.focused { background-color:  \").concat(styles.listInactiveFocusBackground, \"; }\"));\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.focused:hover { background-color:  \").concat(styles.listInactiveFocusBackground, \"; }\")); // overwrite :hover style in this case!\n      }\n\n      if (styles.listInactiveSelectionBackground) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.selected { background-color:  \").concat(styles.listInactiveSelectionBackground, \"; }\"));\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.selected:hover { background-color:  \").concat(styles.listInactiveSelectionBackground, \"; }\")); // overwrite :hover style in this case!\n      }\n\n      if (styles.listInactiveSelectionForeground) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.selected { color: \").concat(styles.listInactiveSelectionForeground, \"; }\"));\n      }\n\n      if (styles.listHoverBackground) {\n        content.push(\".monaco-list\".concat(suffix, \":not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  \").concat(styles.listHoverBackground, \"; }\"));\n      }\n\n      if (styles.listHoverForeground) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row:hover:not(.selected):not(.focused) { color:  \").concat(styles.listHoverForeground, \"; }\"));\n      }\n\n      if (styles.listSelectionOutline) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.selected { outline: 1px dotted \").concat(styles.listSelectionOutline, \"; outline-offset: -1px; }\"));\n      }\n\n      if (styles.listFocusOutline) {\n        content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\".concat(suffix, \":focus .monaco-list-row.focused { outline: 1px solid \").concat(styles.listFocusOutline, \"; outline-offset: -1px; }\\n\\t\\t\\t\"));\n      }\n\n      if (styles.listInactiveFocusOutline) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row.focused { outline: 1px dotted \").concat(styles.listInactiveFocusOutline, \"; outline-offset: -1px; }\"));\n      }\n\n      if (styles.listHoverOutline) {\n        content.push(\".monaco-list\".concat(suffix, \" .monaco-list-row:hover { outline: 1px dashed \").concat(styles.listHoverOutline, \"; outline-offset: -1px; }\"));\n      }\n\n      if (styles.listDropBackground) {\n        content.push(\"\\n\\t\\t\\t\\t.monaco-list\".concat(suffix, \".drop-target,\\n\\t\\t\\t\\t.monaco-list\").concat(suffix, \" .monaco-list-rows.drop-target,\\n\\t\\t\\t\\t.monaco-list\").concat(suffix, \" .monaco-list-row.drop-target { background-color: \").concat(styles.listDropBackground, \" !important; color: inherit !important; }\\n\\t\\t\\t\"));\n      }\n\n      if (styles.listFilterWidgetBackground) {\n        content.push(\".monaco-list-type-filter { background-color: \".concat(styles.listFilterWidgetBackground, \" }\"));\n      }\n\n      if (styles.listFilterWidgetOutline) {\n        content.push(\".monaco-list-type-filter { border: 1px solid \".concat(styles.listFilterWidgetOutline, \"; }\"));\n      }\n\n      if (styles.listFilterWidgetNoMatchesOutline) {\n        content.push(\".monaco-list-type-filter.no-matches { border: 1px solid \".concat(styles.listFilterWidgetNoMatchesOutline, \"; }\"));\n      }\n\n      if (styles.listMatchesShadow) {\n        content.push(\".monaco-list-type-filter { box-shadow: 1px 1px 1px \".concat(styles.listMatchesShadow, \"; }\"));\n      }\n\n      this.styleElement.textContent = content.join('\\n');\n    }\n  }]);\n\n  return DefaultStyleController;\n}();\nvar defaultStyles = {\n  listFocusBackground: Color.fromHex('#7FB0D0'),\n  listActiveSelectionBackground: Color.fromHex('#0E639C'),\n  listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n  listFocusAndSelectionBackground: Color.fromHex('#094771'),\n  listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n  listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n  listHoverBackground: Color.fromHex('#2A2D2E'),\n  listDropBackground: Color.fromHex('#383B3D'),\n  treeIndentGuidesStroke: Color.fromHex('#a9a9a9')\n};\nvar DefaultOptions = {\n  keyboardSupport: true,\n  mouseSupport: true,\n  multipleSelectionSupport: true,\n  dnd: {\n    getDragURI: function getDragURI() {\n      return null;\n    },\n    onDragStart: function onDragStart() {},\n    onDragOver: function onDragOver() {\n      return false;\n    },\n    drop: function drop() {}\n  }\n}; // TODO@Joao: move these utils into a SortedArray class\n\nfunction getContiguousRangeContaining(range, value) {\n  var index = range.indexOf(value);\n\n  if (index === -1) {\n    return [];\n  }\n\n  var result = [];\n  var i = index - 1;\n\n  while (i >= 0 && range[i] === value - (index - i)) {\n    result.push(range[i--]);\n  }\n\n  result.reverse();\n  i = index;\n\n  while (i < range.length && range[i] === value + (i - index)) {\n    result.push(range[i++]);\n  }\n\n  return result;\n}\n/**\r\n * Given two sorted collections of numbers, returns the intersection\r\n * between them (OR).\r\n */\n\n\nfunction disjunction(one, other) {\n  var result = [];\n  var i = 0,\n      j = 0;\n\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      result.push(one[i]);\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      result.push(other[j++]);\n    }\n  }\n\n  return result;\n}\n/**\r\n * Given two sorted collections of numbers, returns the relative\r\n * complement between them (XOR).\r\n */\n\n\nfunction relativeComplement(one, other) {\n  var result = [];\n  var i = 0,\n      j = 0;\n\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      j++;\n    }\n  }\n\n  return result;\n}\n\nvar numericSort = function numericSort(a, b) {\n  return a - b;\n};\n\nvar PipelineRenderer = /*#__PURE__*/function () {\n  function PipelineRenderer(_templateId, renderers) {\n    _classCallCheck(this, PipelineRenderer);\n\n    this._templateId = _templateId;\n    this.renderers = renderers;\n  }\n\n  _createClass(PipelineRenderer, [{\n    key: \"renderTemplate\",\n    value: function renderTemplate(container) {\n      return this.renderers.map(function (r) {\n        return r.renderTemplate(container);\n      });\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(element, index, templateData, height) {\n      var i = 0;\n\n      var _iterator3 = _createForOfIteratorHelper(this.renderers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var renderer = _step3.value;\n          renderer.renderElement(element, index, templateData[i++], height);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"disposeElement\",\n    value: function disposeElement(element, index, templateData, height) {\n      var i = 0;\n\n      var _iterator4 = _createForOfIteratorHelper(this.renderers),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var renderer = _step4.value;\n\n          if (renderer.disposeElement) {\n            renderer.disposeElement(element, index, templateData[i], height);\n          }\n\n          i += 1;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"disposeTemplate\",\n    value: function disposeTemplate(templateData) {\n      var i = 0;\n\n      var _iterator5 = _createForOfIteratorHelper(this.renderers),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var renderer = _step5.value;\n          renderer.disposeTemplate(templateData[i++]);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  }, {\n    key: \"templateId\",\n    get: function get() {\n      return this._templateId;\n    }\n  }]);\n\n  return PipelineRenderer;\n}();\n\nvar AccessibiltyRenderer = /*#__PURE__*/function () {\n  function AccessibiltyRenderer(accessibilityProvider) {\n    _classCallCheck(this, AccessibiltyRenderer);\n\n    this.accessibilityProvider = accessibilityProvider;\n    this.templateId = 'a18n';\n  }\n\n  _createClass(AccessibiltyRenderer, [{\n    key: \"renderTemplate\",\n    value: function renderTemplate(container) {\n      return container;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(element, index, container) {\n      var ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n\n      if (ariaLabel) {\n        container.setAttribute('aria-label', ariaLabel);\n      } else {\n        container.removeAttribute('aria-label');\n      }\n\n      var ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n\n      if (typeof ariaLevel === 'number') {\n        container.setAttribute('aria-level', \"\".concat(ariaLevel));\n      } else {\n        container.removeAttribute('aria-level');\n      }\n    }\n  }, {\n    key: \"disposeTemplate\",\n    value: function disposeTemplate(templateData) {// noop\n    }\n  }]);\n\n  return AccessibiltyRenderer;\n}();\n\nvar ListViewDragAndDrop = /*#__PURE__*/function () {\n  function ListViewDragAndDrop(list, dnd) {\n    _classCallCheck(this, ListViewDragAndDrop);\n\n    this.list = list;\n    this.dnd = dnd;\n  }\n\n  _createClass(ListViewDragAndDrop, [{\n    key: \"getDragElements\",\n    value: function getDragElements(element) {\n      var selection = this.list.getSelectedElements();\n      var elements = selection.indexOf(element) > -1 ? selection : [element];\n      return elements;\n    }\n  }, {\n    key: \"getDragURI\",\n    value: function getDragURI(element) {\n      return this.dnd.getDragURI(element);\n    }\n  }, {\n    key: \"getDragLabel\",\n    value: function getDragLabel(elements, originalEvent) {\n      if (this.dnd.getDragLabel) {\n        return this.dnd.getDragLabel(elements, originalEvent);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function onDragStart(data, originalEvent) {\n      if (this.dnd.onDragStart) {\n        this.dnd.onDragStart(data, originalEvent);\n      }\n    }\n  }, {\n    key: \"onDragOver\",\n    value: function onDragOver(data, targetElement, targetIndex, originalEvent) {\n      return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function onDragEnd(originalEvent) {\n      if (this.dnd.onDragEnd) {\n        this.dnd.onDragEnd(originalEvent);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop(data, targetElement, targetIndex, originalEvent) {\n      this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n  }]);\n\n  return ListViewDragAndDrop;\n}();\n\nexport var List = /*#__PURE__*/function () {\n  function List(user, container, virtualDelegate, renderers) {\n    var _options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : DefaultOptions;\n\n    _classCallCheck(this, List);\n\n    var _a;\n\n    this.user = user;\n    this._options = _options;\n    this.eventBufferer = new EventBufferer();\n    this._ariaLabel = '';\n    this.disposables = new DisposableStore();\n    this.didJustPressContextMenuKey = false;\n    this._onDidDispose = new Emitter();\n    this.onDidDispose = this._onDidDispose.event;\n    var role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n    this.selection = new SelectionTrait(role !== 'listbox');\n    this.focus = new Trait('focused');\n    mixin(_options, defaultStyles, false);\n    var baseRenderers = [this.focus.renderer, this.selection.renderer];\n    this.accessibilityProvider = _options.accessibilityProvider;\n\n    if (this.accessibilityProvider) {\n      baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n\n      if (this.accessibilityProvider.onDidChangeActiveDescendant) {\n        this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\n      }\n    }\n\n    renderers = renderers.map(function (r) {\n      return new PipelineRenderer(r.templateId, [].concat(baseRenderers, [r]));\n    });\n    var viewOptions = Object.assign(Object.assign({}, _options), {\n      dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n    });\n    this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n    this.view.domNode.setAttribute('role', role);\n\n    if (_options.styleController) {\n      this.styleController = _options.styleController(this.view.domId);\n    } else {\n      var styleElement = createStyleSheet(this.view.domNode);\n      this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n    }\n\n    this.spliceable = new CombinedSpliceable([new TraitSpliceable(this.focus, this.view, _options.identityProvider), new TraitSpliceable(this.selection, this.view, _options.identityProvider), this.view]);\n    this.disposables.add(this.focus);\n    this.disposables.add(this.selection);\n    this.disposables.add(this.view);\n    this.disposables.add(this._onDidDispose);\n    this.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), function () {\n      return null;\n    });\n    this.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), function () {\n      return null;\n    });\n    this.disposables.add(new DOMFocusController(this, this.view));\n\n    if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n      var controller = new KeyboardController(this, this.view, _options);\n      this.disposables.add(controller);\n    }\n\n    if (_options.keyboardNavigationLabelProvider) {\n      var delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n      this.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\n      this.disposables.add(this.typeLabelController);\n    }\n\n    this.mouseController = this.createMouseController(_options);\n    this.disposables.add(this.mouseController);\n    this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n    this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n\n    if (this.accessibilityProvider) {\n      this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n    }\n\n    if (_options.multipleSelectionSupport) {\n      this.view.domNode.setAttribute('aria-multiselectable', 'true');\n    }\n  }\n\n  _createClass(List, [{\n    key: \"createMouseController\",\n    value: function createMouseController(options) {\n      return new MouseController(this);\n    }\n  }, {\n    key: \"updateOptions\",\n    value: function updateOptions() {\n      var optionsUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n\n      if (this.typeLabelController) {\n        this.typeLabelController.updateOptions(this._options);\n      }\n\n      this.view.updateOptions(optionsUpdate);\n    }\n  }, {\n    key: \"splice\",\n    value: function splice(start, deleteCount) {\n      var _this4 = this;\n\n      var elements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      if (start < 0 || start > this.view.length) {\n        throw new ListError(this.user, \"Invalid start index: \".concat(start));\n      }\n\n      if (deleteCount < 0) {\n        throw new ListError(this.user, \"Invalid delete count: \".concat(deleteCount));\n      }\n\n      if (deleteCount === 0 && elements.length === 0) {\n        return;\n      }\n\n      this.eventBufferer.bufferEvents(function () {\n        return _this4.spliceable.splice(start, deleteCount, elements);\n      });\n    }\n  }, {\n    key: \"rerender\",\n    value: function rerender() {\n      this.view.rerender();\n    }\n  }, {\n    key: \"element\",\n    value: function element(index) {\n      return this.view.element(index);\n    }\n  }, {\n    key: \"domFocus\",\n    value: function domFocus() {\n      this.view.domNode.focus();\n    }\n  }, {\n    key: \"layout\",\n    value: function layout(height, width) {\n      this.view.layout(height, width);\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(indexes, browserEvent) {\n      var _iterator6 = _createForOfIteratorHelper(indexes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var index = _step6.value;\n\n          if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, \"Invalid index \".concat(index));\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      this.selection.set(indexes, browserEvent);\n    }\n  }, {\n    key: \"getSelection\",\n    value: function getSelection() {\n      return this.selection.get();\n    }\n  }, {\n    key: \"getSelectedElements\",\n    value: function getSelectedElements() {\n      var _this5 = this;\n\n      return this.getSelection().map(function (i) {\n        return _this5.view.element(i);\n      });\n    }\n  }, {\n    key: \"setFocus\",\n    value: function setFocus(indexes, browserEvent) {\n      var _iterator7 = _createForOfIteratorHelper(indexes),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var index = _step7.value;\n\n          if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, \"Invalid index \".concat(index));\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n\n      this.focus.set(indexes, browserEvent);\n    }\n  }, {\n    key: \"focusNext\",\n    value: function focusNext() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var browserEvent = arguments.length > 2 ? arguments[2] : undefined;\n      var filter = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (this.length === 0) {\n        return;\n      }\n\n      var focus = this.focus.get();\n      var index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n\n      if (index > -1) {\n        this.setFocus([index], browserEvent);\n      }\n    }\n  }, {\n    key: \"focusPrevious\",\n    value: function focusPrevious() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var browserEvent = arguments.length > 2 ? arguments[2] : undefined;\n      var filter = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (this.length === 0) {\n        return;\n      }\n\n      var focus = this.focus.get();\n      var index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n\n      if (index > -1) {\n        this.setFocus([index], browserEvent);\n      }\n    }\n  }, {\n    key: \"focusNextPage\",\n    value: function focusNextPage(browserEvent, filter) {\n      var _this6 = this;\n\n      var lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n      lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n      var lastPageElement = this.view.element(lastPageIndex);\n      var currentlyFocusedElement = this.getFocusedElements()[0];\n\n      if (currentlyFocusedElement !== lastPageElement) {\n        var lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n\n        if (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\n          this.setFocus([lastGoodPageIndex], browserEvent);\n        } else {\n          this.setFocus([lastPageIndex], browserEvent);\n        }\n      } else {\n        var previousScrollTop = this.view.getScrollTop();\n        this.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\n\n        if (this.view.getScrollTop() !== previousScrollTop) {\n          this.setFocus([]); // Let the scroll event listener run\n\n          setTimeout(function () {\n            return _this6.focusNextPage(browserEvent, filter);\n          }, 0);\n        }\n      }\n    }\n  }, {\n    key: \"focusPreviousPage\",\n    value: function focusPreviousPage(browserEvent, filter) {\n      var _this7 = this;\n\n      var firstPageIndex;\n      var scrollTop = this.view.getScrollTop();\n\n      if (scrollTop === 0) {\n        firstPageIndex = this.view.indexAt(scrollTop);\n      } else {\n        firstPageIndex = this.view.indexAfter(scrollTop - 1);\n      }\n\n      var firstPageElement = this.view.element(firstPageIndex);\n      var currentlyFocusedElement = this.getFocusedElements()[0];\n\n      if (currentlyFocusedElement !== firstPageElement) {\n        var firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n\n        if (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\n          this.setFocus([firstGoodPageIndex], browserEvent);\n        } else {\n          this.setFocus([firstPageIndex], browserEvent);\n        }\n      } else {\n        var previousScrollTop = scrollTop;\n        this.view.setScrollTop(scrollTop - this.view.renderHeight);\n\n        if (this.view.getScrollTop() !== previousScrollTop) {\n          this.setFocus([]); // Let the scroll event listener run\n\n          setTimeout(function () {\n            return _this7.focusPreviousPage(browserEvent, filter);\n          }, 0);\n        }\n      }\n    }\n  }, {\n    key: \"focusLast\",\n    value: function focusLast(browserEvent, filter) {\n      if (this.length === 0) {\n        return;\n      }\n\n      var index = this.findPreviousIndex(this.length - 1, false, filter);\n\n      if (index > -1) {\n        this.setFocus([index], browserEvent);\n      }\n    }\n  }, {\n    key: \"focusFirst\",\n    value: function focusFirst(browserEvent, filter) {\n      this.focusNth(0, browserEvent, filter);\n    }\n  }, {\n    key: \"focusNth\",\n    value: function focusNth(n, browserEvent, filter) {\n      if (this.length === 0) {\n        return;\n      }\n\n      var index = this.findNextIndex(n, false, filter);\n\n      if (index > -1) {\n        this.setFocus([index], browserEvent);\n      }\n    }\n  }, {\n    key: \"findNextIndex\",\n    value: function findNextIndex(index) {\n      var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var filter = arguments.length > 2 ? arguments[2] : undefined;\n\n      for (var i = 0; i < this.length; i++) {\n        if (index >= this.length && !loop) {\n          return -1;\n        }\n\n        index = index % this.length;\n\n        if (!filter || filter(this.element(index))) {\n          return index;\n        }\n\n        index++;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"findPreviousIndex\",\n    value: function findPreviousIndex(index) {\n      var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var filter = arguments.length > 2 ? arguments[2] : undefined;\n\n      for (var i = 0; i < this.length; i++) {\n        if (index < 0 && !loop) {\n          return -1;\n        }\n\n        index = (this.length + index % this.length) % this.length;\n\n        if (!filter || filter(this.element(index))) {\n          return index;\n        }\n\n        index--;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"getFocus\",\n    value: function getFocus() {\n      return this.focus.get();\n    }\n  }, {\n    key: \"getFocusedElements\",\n    value: function getFocusedElements() {\n      var _this8 = this;\n\n      return this.getFocus().map(function (i) {\n        return _this8.view.element(i);\n      });\n    }\n  }, {\n    key: \"reveal\",\n    value: function reveal(index, relativeTop) {\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \".concat(index));\n      }\n\n      var scrollTop = this.view.getScrollTop();\n      var elementTop = this.view.elementTop(index);\n      var elementHeight = this.view.elementHeight(index);\n\n      if (isNumber(relativeTop)) {\n        // y = mx + b\n        var m = elementHeight - this.view.renderHeight;\n        this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n      } else {\n        var viewItemBottom = elementTop + elementHeight;\n        var wrapperBottom = scrollTop + this.view.renderHeight;\n\n        if (elementTop < scrollTop && viewItemBottom >= wrapperBottom) {// The element is already overflowing the viewport, no-op\n        } else if (elementTop < scrollTop) {\n          this.view.setScrollTop(elementTop);\n        } else if (viewItemBottom >= wrapperBottom) {\n          this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n        }\n      }\n    }\n    /**\r\n     * Returns the relative position of an element rendered in the list.\r\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n     */\n\n  }, {\n    key: \"getRelativeTop\",\n    value: function getRelativeTop(index) {\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, \"Invalid index \".concat(index));\n      }\n\n      var scrollTop = this.view.getScrollTop();\n      var elementTop = this.view.elementTop(index);\n      var elementHeight = this.view.elementHeight(index);\n\n      if (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\n        return null;\n      } // y = mx + b\n\n\n      var m = elementHeight - this.view.renderHeight;\n      return Math.abs((scrollTop - elementTop) / m);\n    }\n  }, {\n    key: \"getHTMLElement\",\n    value: function getHTMLElement() {\n      return this.view.domNode;\n    }\n  }, {\n    key: \"style\",\n    value: function style(styles) {\n      this.styleController.style(styles);\n    }\n  }, {\n    key: \"toListEvent\",\n    value: function toListEvent(_ref) {\n      var _this9 = this;\n\n      var indexes = _ref.indexes,\n          browserEvent = _ref.browserEvent;\n      return {\n        indexes: indexes,\n        elements: indexes.map(function (i) {\n          return _this9.view.element(i);\n        }),\n        browserEvent: browserEvent\n      };\n    }\n  }, {\n    key: \"_onFocusChange\",\n    value: function _onFocusChange() {\n      var focus = this.focus.get();\n      this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n      this.onDidChangeActiveDescendant();\n    }\n  }, {\n    key: \"onDidChangeActiveDescendant\",\n    value: function onDidChangeActiveDescendant() {\n      var _a;\n\n      var focus = this.focus.get();\n\n      if (focus.length > 0) {\n        var id;\n\n        if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n          id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n        }\n\n        this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n      } else {\n        this.view.domNode.removeAttribute('aria-activedescendant');\n      }\n    }\n  }, {\n    key: \"_onSelectionChange\",\n    value: function _onSelectionChange() {\n      var selection = this.selection.get();\n      this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n      this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n      this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._onDidDispose.fire();\n\n      this.disposables.dispose();\n\n      this._onDidDispose.dispose();\n    }\n  }, {\n    key: \"onDidChangeFocus\",\n    get: function get() {\n      var _this10 = this;\n\n      return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), function (e) {\n        return _this10.toListEvent(e);\n      });\n    }\n  }, {\n    key: \"onDidChangeSelection\",\n    get: function get() {\n      var _this11 = this;\n\n      return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), function (e) {\n        return _this11.toListEvent(e);\n      });\n    }\n  }, {\n    key: \"domId\",\n    get: function get() {\n      return this.view.domId;\n    }\n  }, {\n    key: \"onMouseClick\",\n    get: function get() {\n      return this.view.onMouseClick;\n    }\n  }, {\n    key: \"onMouseDblClick\",\n    get: function get() {\n      return this.view.onMouseDblClick;\n    }\n  }, {\n    key: \"onMouseMiddleClick\",\n    get: function get() {\n      return this.view.onMouseMiddleClick;\n    }\n  }, {\n    key: \"onPointer\",\n    get: function get() {\n      return this.mouseController.onPointer;\n    }\n  }, {\n    key: \"onMouseDown\",\n    get: function get() {\n      return this.view.onMouseDown;\n    }\n  }, {\n    key: \"onTouchStart\",\n    get: function get() {\n      return this.view.onTouchStart;\n    }\n  }, {\n    key: \"onTap\",\n    get: function get() {\n      return this.view.onTap;\n    }\n  }, {\n    key: \"onContextMenu\",\n    get: function get() {\n      var _this12 = this;\n\n      var fromKeydown = Event.chain(domEvent(this.view.domNode, 'keydown')).map(function (e) {\n        return new StandardKeyboardEvent(e);\n      }).filter(function (e) {\n        return _this12.didJustPressContextMenuKey = e.keyCode === 58\n        /* ContextMenu */\n        || e.shiftKey && e.keyCode === 68\n        /* F10 */\n        ;\n      }).filter(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }).event;\n      var fromKeyup = Event.chain(domEvent(this.view.domNode, 'keyup')).filter(function () {\n        var didJustPressContextMenuKey = _this12.didJustPressContextMenuKey;\n        _this12.didJustPressContextMenuKey = false;\n        return didJustPressContextMenuKey;\n      }).filter(function () {\n        return _this12.getFocus().length > 0 && !!_this12.view.domElement(_this12.getFocus()[0]);\n      }).map(function (browserEvent) {\n        var index = _this12.getFocus()[0];\n\n        var element = _this12.view.element(index);\n\n        var anchor = _this12.view.domElement(index);\n\n        return {\n          index: index,\n          element: element,\n          anchor: anchor,\n          browserEvent: browserEvent\n        };\n      }).event;\n      var fromMouse = Event.chain(this.view.onContextMenu).filter(function () {\n        return !_this12.didJustPressContextMenuKey;\n      }).map(function (_ref2) {\n        var element = _ref2.element,\n            index = _ref2.index,\n            browserEvent = _ref2.browserEvent;\n        return {\n          element: element,\n          index: index,\n          anchor: {\n            x: browserEvent.clientX + 1,\n            y: browserEvent.clientY\n          },\n          browserEvent: browserEvent\n        };\n      }).event;\n      return Event.any(fromKeydown, fromKeyup, fromMouse);\n    }\n  }, {\n    key: \"onKeyDown\",\n    get: function get() {\n      return domEvent(this.view.domNode, 'keydown');\n    }\n  }, {\n    key: \"options\",\n    get: function get() {\n      return this._options;\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.view.length;\n    }\n  }, {\n    key: \"contentHeight\",\n    get: function get() {\n      return this.view.contentHeight;\n    }\n  }, {\n    key: \"scrollTop\",\n    get: function get() {\n      return this.view.getScrollTop();\n    },\n    set: function set(scrollTop) {\n      this.view.setScrollTop(scrollTop);\n    }\n  }, {\n    key: \"ariaLabel\",\n    get: function get() {\n      return this._ariaLabel;\n    },\n    set: function set(value) {\n      this._ariaLabel = value;\n      this.view.domNode.setAttribute('aria-label', value);\n    }\n  }]);\n\n  return List;\n}();\n\n__decorate([memoize], List.prototype, \"onDidChangeFocus\", null);\n\n__decorate([memoize], List.prototype, \"onDidChangeSelection\", null);\n\n__decorate([memoize], List.prototype, \"onContextMenu\", null);","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","dispose","DisposableStore","isNumber","range","binarySearch","memoize","platform","Gesture","StandardKeyboardEvent","Event","Emitter","EventBufferer","domEvent","ListError","ListView","Color","mixin","CombinedSpliceable","clamp","matchesPrefix","alert","createStyleSheet","TraitRenderer","trait","renderedElements","container","element","index","templateData","renderedElementIndex","findIndex","el","rendered","unrender","push","renderIndex","start","deleteCount","insertCount","renderedElement","indexes","indexOf","splice","Trait","_trait","sortedIndexes","_onChange","onChange","event","elements","diff","end","filter","map","hasTrait","renderer","_set","classList","toggle","contains","remove","browserEvent","sort","numericSort","result","sortedResult","toRender","disjunction","renderIndexes","fire","prototype","SelectionTrait","setAriaSelected","setAttribute","TraitSpliceable","view","identityProvider","pastElementsWithTrait","get","getId","toString","elementsWithTrait","e","isInputElement","tagName","isMonacoEditor","parentElement","KeyboardController","list","options","disposables","multipleSelectionSupport","onKeyDown","chain","domNode","keyCode","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","isMacintosh","metaKey","ctrlKey","onCtrlA","preventDefault","stopPropagation","setSelection","getFocus","focusPrevious","reveal","focus","focusNext","focusPreviousPage","focusNextPage","getSelection","TypeLabelControllerState","DefaultKeyboardNavigationDelegate","altKey","TypeLabelController","keyboardNavigationLabelProvider","delegate","enabled","state","Idle","automaticKeyboardNavigation","triggered","previouslyFocused","enabledDisposables","updateOptions","enableKeyboardNavigation","enable","disable","onChar","mightProducePrintableCharacter","forEach","onClear","debounce","onInput","reduce","any","clear","_a","ariaLabel","accessibilityProvider","getAriaLabel","word","delta","Typing","label","getKeyboardNavigationLabel","labelStr","setFocus","DOMFocusController","shiftKey","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","HTMLElement","tabIndex","style","window","getComputedStyle","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","isMouseRightClick","MouseEvent","button","DefaultMultipleSelectionController","MouseController","_onPointer","onPointer","multipleSelectionController","mouseSupport","onMouseDown","onContextMenu","onMouseDblClick","onDoubleClick","onTouchStart","add","addTarget","getHTMLElement","onMouseClick","onMouseMiddleClick","onTap","onViewPointer","document","activeElement","domFocus","reference","selection","undefined","changeSelection","isSelectionChangeEvent","min","Math","max","rangeSelection","contiguousRange","getContiguousRangeContaining","newSelection","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","styles","suffix","content","listBackground","isOpaque","console","warn","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listSelectionOutline","listFocusOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","listFilterWidgetBackground","listFilterWidgetOutline","listFilterWidgetNoMatchesOutline","listMatchesShadow","textContent","join","defaultStyles","fromHex","treeIndentGuidesStroke","DefaultOptions","keyboardSupport","dnd","getDragURI","onDragStart","onDragOver","drop","value","reverse","one","other","j","a","b","PipelineRenderer","_templateId","renderers","renderTemplate","height","renderElement","disposeElement","disposeTemplate","AccessibiltyRenderer","templateId","removeAttribute","ariaLevel","getAriaLevel","ListViewDragAndDrop","getSelectedElements","originalEvent","getDragLabel","data","targetElement","targetIndex","onDragEnd","List","user","virtualDelegate","_options","eventBufferer","_ariaLabel","didJustPressContextMenuKey","_onDidDispose","onDidDispose","role","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","assign","styleController","domId","spliceable","onDidFocus","onDidBlur","controller","keyboardNavigationDelegate","typeLabelController","mouseController","createMouseController","onDidChangeFocus","_onFocusChange","onDidChangeSelection","_onSelectionChange","getWidgetAriaLabel","optionsUpdate","bufferEvents","rerender","width","layout","set","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","indexAt","getScrollTop","renderHeight","lastPageElement","currentlyFocusedElement","getFocusedElements","lastGoodPageIndex","previousScrollTop","setScrollTop","elementHeight","setTimeout","firstPageIndex","scrollTop","indexAfter","firstPageElement","firstGoodPageIndex","focusNth","relativeTop","elementTop","m","viewItemBottom","wrapperBottom","abs","id","getActiveDescendantId","getElementDomId","wrapEvent","toListEvent","fromKeydown","fromKeyup","anchor","fromMouse","x","clientX","y","clientY","contentHeight"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport './list.css';\r\nimport { dispose, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { isNumber } from '../../../common/types.js';\r\nimport { range, binarySearch } from '../../../common/arrays.js';\r\nimport { memoize } from '../../../common/decorators.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Gesture } from '../../touch.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { Event, Emitter, EventBufferer } from '../../../common/event.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { ListError } from './list.js';\r\nimport { ListView } from './listView.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nimport { CombinedSpliceable } from './splice.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { matchesPrefix } from '../../../common/filters.js';\r\nimport { alert } from '../aria/aria.js';\r\nimport { createStyleSheet } from '../../dom.js';\r\nclass TraitRenderer {\r\n    constructor(trait) {\r\n        this.trait = trait;\r\n        this.renderedElements = [];\r\n    }\r\n    get templateId() {\r\n        return `template:${this.trait.trait}`;\r\n    }\r\n    renderTemplate(container) {\r\n        return container;\r\n    }\r\n    renderElement(element, index, templateData) {\r\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\r\n        if (renderedElementIndex >= 0) {\r\n            const rendered = this.renderedElements[renderedElementIndex];\r\n            this.trait.unrender(templateData);\r\n            rendered.index = index;\r\n        }\r\n        else {\r\n            const rendered = { index, templateData };\r\n            this.renderedElements.push(rendered);\r\n        }\r\n        this.trait.renderIndex(index, templateData);\r\n    }\r\n    splice(start, deleteCount, insertCount) {\r\n        const rendered = [];\r\n        for (const renderedElement of this.renderedElements) {\r\n            if (renderedElement.index < start) {\r\n                rendered.push(renderedElement);\r\n            }\r\n            else if (renderedElement.index >= start + deleteCount) {\r\n                rendered.push({\r\n                    index: renderedElement.index + insertCount - deleteCount,\r\n                    templateData: renderedElement.templateData\r\n                });\r\n            }\r\n        }\r\n        this.renderedElements = rendered;\r\n    }\r\n    renderIndexes(indexes) {\r\n        for (const { index, templateData } of this.renderedElements) {\r\n            if (indexes.indexOf(index) > -1) {\r\n                this.trait.renderIndex(index, templateData);\r\n            }\r\n        }\r\n    }\r\n    disposeTemplate(templateData) {\r\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.renderedElements.splice(index, 1);\r\n    }\r\n}\r\nclass Trait {\r\n    constructor(_trait) {\r\n        this._trait = _trait;\r\n        this.indexes = [];\r\n        this.sortedIndexes = [];\r\n        this._onChange = new Emitter();\r\n        this.onChange = this._onChange.event;\r\n    }\r\n    get trait() { return this._trait; }\r\n    get renderer() {\r\n        return new TraitRenderer(this);\r\n    }\r\n    splice(start, deleteCount, elements) {\r\n        const diff = elements.length - deleteCount;\r\n        const end = start + deleteCount;\r\n        const indexes = [\r\n            ...this.sortedIndexes.filter(i => i < start),\r\n            ...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1),\r\n            ...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)\r\n        ];\r\n        this.renderer.splice(start, deleteCount, elements.length);\r\n        this._set(indexes, indexes);\r\n    }\r\n    renderIndex(index, container) {\r\n        container.classList.toggle(this._trait, this.contains(index));\r\n    }\r\n    unrender(container) {\r\n        container.classList.remove(this._trait);\r\n    }\r\n    /**\r\n     * Sets the indexes which should have this trait.\r\n     *\r\n     * @param indexes Indexes which should have this trait.\r\n     * @return The old indexes which had this trait.\r\n     */\r\n    set(indexes, browserEvent) {\r\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\r\n    }\r\n    _set(indexes, sortedIndexes, browserEvent) {\r\n        const result = this.indexes;\r\n        const sortedResult = this.sortedIndexes;\r\n        this.indexes = indexes;\r\n        this.sortedIndexes = sortedIndexes;\r\n        const toRender = disjunction(sortedResult, indexes);\r\n        this.renderer.renderIndexes(toRender);\r\n        this._onChange.fire({ indexes, browserEvent });\r\n        return result;\r\n    }\r\n    get() {\r\n        return this.indexes;\r\n    }\r\n    contains(index) {\r\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\r\n    }\r\n    dispose() {\r\n        dispose(this._onChange);\r\n    }\r\n}\r\n__decorate([\r\n    memoize\r\n], Trait.prototype, \"renderer\", null);\r\nclass SelectionTrait extends Trait {\r\n    constructor(setAriaSelected) {\r\n        super('selected');\r\n        this.setAriaSelected = setAriaSelected;\r\n    }\r\n    renderIndex(index, container) {\r\n        super.renderIndex(index, container);\r\n        if (this.setAriaSelected) {\r\n            if (this.contains(index)) {\r\n                container.setAttribute('aria-selected', 'true');\r\n            }\r\n            else {\r\n                container.setAttribute('aria-selected', 'false');\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * The TraitSpliceable is used as a util class to be able\r\n * to preserve traits across splice calls, given an identity\r\n * provider.\r\n */\r\nclass TraitSpliceable {\r\n    constructor(trait, view, identityProvider) {\r\n        this.trait = trait;\r\n        this.view = view;\r\n        this.identityProvider = identityProvider;\r\n    }\r\n    splice(start, deleteCount, elements) {\r\n        if (!this.identityProvider) {\r\n            return this.trait.splice(start, deleteCount, elements.map(() => false));\r\n        }\r\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\r\n        const elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider.getId(e).toString()) > -1);\r\n        this.trait.splice(start, deleteCount, elementsWithTrait);\r\n    }\r\n}\r\nexport function isInputElement(e) {\r\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\r\n}\r\nexport function isMonacoEditor(e) {\r\n    if (e.classList.contains('monaco-editor')) {\r\n        return true;\r\n    }\r\n    if (e.classList.contains('monaco-list')) {\r\n        return false;\r\n    }\r\n    if (!e.parentElement) {\r\n        return false;\r\n    }\r\n    return isMonacoEditor(e.parentElement);\r\n}\r\nclass KeyboardController {\r\n    constructor(list, view, options) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        const multipleSelectionSupport = options.multipleSelectionSupport !== false;\r\n        const onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(e => !isInputElement(e.target))\r\n            .map(e => new StandardKeyboardEvent(e));\r\n        onKeyDown.filter(e => e.keyCode === 3 /* Enter */).on(this.onEnter, this, this.disposables);\r\n        onKeyDown.filter(e => e.keyCode === 16 /* UpArrow */).on(this.onUpArrow, this, this.disposables);\r\n        onKeyDown.filter(e => e.keyCode === 18 /* DownArrow */).on(this.onDownArrow, this, this.disposables);\r\n        onKeyDown.filter(e => e.keyCode === 11 /* PageUp */).on(this.onPageUpArrow, this, this.disposables);\r\n        onKeyDown.filter(e => e.keyCode === 12 /* PageDown */).on(this.onPageDownArrow, this, this.disposables);\r\n        onKeyDown.filter(e => e.keyCode === 9 /* Escape */).on(this.onEscape, this, this.disposables);\r\n        if (multipleSelectionSupport) {\r\n            onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KEY_A */).on(this.onCtrlA, this, this.disposables);\r\n        }\r\n    }\r\n    onEnter(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\r\n    }\r\n    onUpArrow(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPrevious(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    }\r\n    onDownArrow(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNext(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    }\r\n    onPageUpArrow(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPreviousPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    }\r\n    onPageDownArrow(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNextPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    }\r\n    onCtrlA(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(range(this.list.length), e.browserEvent);\r\n        this.view.domNode.focus();\r\n    }\r\n    onEscape(e) {\r\n        if (this.list.getSelection().length) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this.list.setSelection([], e.browserEvent);\r\n            this.view.domNode.focus();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.disposables.dispose();\r\n    }\r\n}\r\nvar TypeLabelControllerState;\r\n(function (TypeLabelControllerState) {\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Idle\"] = 0] = \"Idle\";\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Typing\"] = 1] = \"Typing\";\r\n})(TypeLabelControllerState || (TypeLabelControllerState = {}));\r\nexport const DefaultKeyboardNavigationDelegate = new class {\r\n    mightProducePrintableCharacter(event) {\r\n        if (event.ctrlKey || event.metaKey || event.altKey) {\r\n            return false;\r\n        }\r\n        return (event.keyCode >= 31 /* KEY_A */ && event.keyCode <= 56 /* KEY_Z */)\r\n            || (event.keyCode >= 21 /* KEY_0 */ && event.keyCode <= 30 /* KEY_9 */)\r\n            || (event.keyCode >= 93 /* NUMPAD_0 */ && event.keyCode <= 102 /* NUMPAD_9 */)\r\n            || (event.keyCode >= 80 /* US_SEMICOLON */ && event.keyCode <= 90 /* US_QUOTE */);\r\n    }\r\n};\r\nclass TypeLabelController {\r\n    constructor(list, view, keyboardNavigationLabelProvider, delegate) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\r\n        this.delegate = delegate;\r\n        this.enabled = false;\r\n        this.state = TypeLabelControllerState.Idle;\r\n        this.automaticKeyboardNavigation = true;\r\n        this.triggered = false;\r\n        this.previouslyFocused = -1;\r\n        this.enabledDisposables = new DisposableStore();\r\n        this.disposables = new DisposableStore();\r\n        this.updateOptions(list.options);\r\n    }\r\n    updateOptions(options) {\r\n        const enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\r\n        if (enableKeyboardNavigation) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n        if (typeof options.automaticKeyboardNavigation !== 'undefined') {\r\n            this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\r\n        }\r\n    }\r\n    enable() {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        const onChar = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n            .filter(e => !isInputElement(e.target))\r\n            .filter(() => this.automaticKeyboardNavigation || this.triggered)\r\n            .map(event => new StandardKeyboardEvent(event))\r\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\r\n            .forEach(e => { e.stopPropagation(); e.preventDefault(); })\r\n            .map(event => event.browserEvent.key)\r\n            .event;\r\n        const onClear = Event.debounce(onChar, () => null, 800);\r\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i));\r\n        onInput(this.onInput, this, this.enabledDisposables);\r\n        onClear(this.onClear, this, this.enabledDisposables);\r\n        this.enabled = true;\r\n        this.triggered = false;\r\n    }\r\n    disable() {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.enabledDisposables.clear();\r\n        this.enabled = false;\r\n        this.triggered = false;\r\n    }\r\n    onClear() {\r\n        var _a;\r\n        const focus = this.list.getFocus();\r\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\r\n            // List: re-anounce element on typing end since typed keys will interupt aria label of focused element\r\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\r\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\r\n            if (ariaLabel) {\r\n                alert(ariaLabel);\r\n            }\r\n        }\r\n        this.previouslyFocused = -1;\r\n    }\r\n    onInput(word) {\r\n        if (!word) {\r\n            this.state = TypeLabelControllerState.Idle;\r\n            this.triggered = false;\r\n            return;\r\n        }\r\n        const focus = this.list.getFocus();\r\n        const start = focus.length > 0 ? focus[0] : 0;\r\n        const delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\r\n        this.state = TypeLabelControllerState.Typing;\r\n        for (let i = 0; i < this.list.length; i++) {\r\n            const index = (start + i + delta) % this.list.length;\r\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\r\n            const labelStr = label && label.toString();\r\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\r\n                this.previouslyFocused = start;\r\n                this.list.setFocus([index]);\r\n                this.list.reveal(index);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this.disable();\r\n        this.enabledDisposables.dispose();\r\n        this.disposables.dispose();\r\n    }\r\n}\r\nclass DOMFocusController {\r\n    constructor(list, view) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        const onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(e => !isInputElement(e.target))\r\n            .map(e => new StandardKeyboardEvent(e));\r\n        onKeyDown.filter(e => e.keyCode === 2 /* Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey)\r\n            .on(this.onTab, this, this.disposables);\r\n    }\r\n    onTab(e) {\r\n        if (e.target !== this.view.domNode) {\r\n            return;\r\n        }\r\n        const focus = this.list.getFocus();\r\n        if (focus.length === 0) {\r\n            return;\r\n        }\r\n        const focusedDomElement = this.view.domElement(focus[0]);\r\n        if (!focusedDomElement) {\r\n            return;\r\n        }\r\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\r\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\r\n            return;\r\n        }\r\n        const style = window.getComputedStyle(tabIndexElement);\r\n        if (style.visibility === 'hidden' || style.display === 'none') {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        tabIndexElement.focus();\r\n    }\r\n    dispose() {\r\n        this.disposables.dispose();\r\n    }\r\n}\r\nexport function isSelectionSingleChangeEvent(event) {\r\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n}\r\nexport function isSelectionRangeChangeEvent(event) {\r\n    return event.browserEvent.shiftKey;\r\n}\r\nfunction isMouseRightClick(event) {\r\n    return event instanceof MouseEvent && event.button === 2;\r\n}\r\nconst DefaultMultipleSelectionController = {\r\n    isSelectionSingleChangeEvent,\r\n    isSelectionRangeChangeEvent\r\n};\r\nexport class MouseController {\r\n    constructor(list) {\r\n        this.list = list;\r\n        this.disposables = new DisposableStore();\r\n        this._onPointer = new Emitter();\r\n        this.onPointer = this._onPointer.event;\r\n        this.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\r\n        if (this.multipleSelectionSupport) {\r\n            this.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\r\n        }\r\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\r\n        if (this.mouseSupport) {\r\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\r\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\r\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\r\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\r\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\r\n        }\r\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\r\n    }\r\n    isSelectionSingleChangeEvent(event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\r\n        }\r\n        return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n    }\r\n    isSelectionRangeChangeEvent(event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\r\n        }\r\n        return event.browserEvent.shiftKey;\r\n    }\r\n    isSelectionChangeEvent(event) {\r\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\r\n    }\r\n    onMouseDown(e) {\r\n        if (isMonacoEditor(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        if (document.activeElement !== e.browserEvent.target) {\r\n            this.list.domFocus();\r\n        }\r\n    }\r\n    onContextMenu(e) {\r\n        if (isMonacoEditor(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\r\n        this.list.setFocus(focus, e.browserEvent);\r\n    }\r\n    onViewPointer(e) {\r\n        if (!this.mouseSupport) {\r\n            return;\r\n        }\r\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        let reference = this.list.getFocus()[0];\r\n        const selection = this.list.getSelection();\r\n        reference = reference === undefined ? selection[0] : reference;\r\n        const focus = e.index;\r\n        if (typeof focus === 'undefined') {\r\n            this.list.setFocus([], e.browserEvent);\r\n            this.list.setSelection([], e.browserEvent);\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        this.list.setFocus([focus], e.browserEvent);\r\n        if (!isMouseRightClick(e.browserEvent)) {\r\n            this.list.setSelection([focus], e.browserEvent);\r\n        }\r\n        this._onPointer.fire(e);\r\n    }\r\n    onDoubleClick(e) {\r\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return;\r\n        }\r\n        const focus = this.list.getFocus();\r\n        this.list.setSelection(focus, e.browserEvent);\r\n    }\r\n    changeSelection(e, reference) {\r\n        const focus = e.index;\r\n        if (this.isSelectionRangeChangeEvent(e) && reference !== undefined) {\r\n            const min = Math.min(reference, focus);\r\n            const max = Math.max(reference, focus);\r\n            const rangeSelection = range(min, max + 1);\r\n            const selection = this.list.getSelection();\r\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [reference]), reference);\r\n            if (contiguousRange.length === 0) {\r\n                return;\r\n            }\r\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\r\n            this.list.setSelection(newSelection, e.browserEvent);\r\n        }\r\n        else if (this.isSelectionSingleChangeEvent(e)) {\r\n            const selection = this.list.getSelection();\r\n            const newSelection = selection.filter(i => i !== focus);\r\n            this.list.setFocus([focus]);\r\n            if (selection.length === newSelection.length) {\r\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\r\n            }\r\n            else {\r\n                this.list.setSelection(newSelection, e.browserEvent);\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this.disposables.dispose();\r\n    }\r\n}\r\nexport class DefaultStyleController {\r\n    constructor(styleElement, selectorSuffix) {\r\n        this.styleElement = styleElement;\r\n        this.selectorSuffix = selectorSuffix;\r\n    }\r\n    style(styles) {\r\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\r\n        const content = [];\r\n        if (styles.listBackground) {\r\n            if (styles.listBackground.isOpaque()) {\r\n                content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\r\n            }\r\n            else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\r\n                console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`);\r\n            }\r\n        }\r\n        if (styles.listFocusBackground) {\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listFocusForeground) {\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\r\n        }\r\n        if (styles.listActiveSelectionBackground) {\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listActiveSelectionForeground) {\r\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\r\n        }\r\n        if (styles.listFocusAndSelectionBackground) {\r\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\r\n        }\r\n        if (styles.listFocusAndSelectionForeground) {\r\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\r\n        }\r\n        if (styles.listInactiveFocusBackground) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionBackground) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionForeground) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\r\n        }\r\n        if (styles.listHoverBackground) {\r\n            content.push(`.monaco-list${suffix}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  ${styles.listHoverBackground}; }`);\r\n        }\r\n        if (styles.listHoverForeground) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\r\n        }\r\n        if (styles.listSelectionOutline) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\r\n        }\r\n        if (styles.listFocusOutline) {\r\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\r\n        }\r\n        if (styles.listInactiveFocusOutline) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\r\n        }\r\n        if (styles.listHoverOutline) {\r\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\r\n        }\r\n        if (styles.listDropBackground) {\r\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\r\n        }\r\n        if (styles.listFilterWidgetBackground) {\r\n            content.push(`.monaco-list-type-filter { background-color: ${styles.listFilterWidgetBackground} }`);\r\n        }\r\n        if (styles.listFilterWidgetOutline) {\r\n            content.push(`.monaco-list-type-filter { border: 1px solid ${styles.listFilterWidgetOutline}; }`);\r\n        }\r\n        if (styles.listFilterWidgetNoMatchesOutline) {\r\n            content.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${styles.listFilterWidgetNoMatchesOutline}; }`);\r\n        }\r\n        if (styles.listMatchesShadow) {\r\n            content.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${styles.listMatchesShadow}; }`);\r\n        }\r\n        this.styleElement.textContent = content.join('\\n');\r\n    }\r\n}\r\nconst defaultStyles = {\r\n    listFocusBackground: Color.fromHex('#7FB0D0'),\r\n    listActiveSelectionBackground: Color.fromHex('#0E639C'),\r\n    listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listFocusAndSelectionBackground: Color.fromHex('#094771'),\r\n    listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\r\n    listHoverBackground: Color.fromHex('#2A2D2E'),\r\n    listDropBackground: Color.fromHex('#383B3D'),\r\n    treeIndentGuidesStroke: Color.fromHex('#a9a9a9')\r\n};\r\nconst DefaultOptions = {\r\n    keyboardSupport: true,\r\n    mouseSupport: true,\r\n    multipleSelectionSupport: true,\r\n    dnd: {\r\n        getDragURI() { return null; },\r\n        onDragStart() { },\r\n        onDragOver() { return false; },\r\n        drop() { }\r\n    }\r\n};\r\n// TODO@Joao: move these utils into a SortedArray class\r\nfunction getContiguousRangeContaining(range, value) {\r\n    const index = range.indexOf(value);\r\n    if (index === -1) {\r\n        return [];\r\n    }\r\n    const result = [];\r\n    let i = index - 1;\r\n    while (i >= 0 && range[i] === value - (index - i)) {\r\n        result.push(range[i--]);\r\n    }\r\n    result.reverse();\r\n    i = index;\r\n    while (i < range.length && range[i] === value + (i - index)) {\r\n        result.push(range[i++]);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the intersection\r\n * between them (OR).\r\n */\r\nfunction disjunction(one, other) {\r\n    const result = [];\r\n    let i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            result.push(one[i]);\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            result.push(other[j++]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the relative\r\n * complement between them (XOR).\r\n */\r\nfunction relativeComplement(one, other) {\r\n    const result = [];\r\n    let i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            j++;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nconst numericSort = (a, b) => a - b;\r\nclass PipelineRenderer {\r\n    constructor(_templateId, renderers) {\r\n        this._templateId = _templateId;\r\n        this.renderers = renderers;\r\n    }\r\n    get templateId() {\r\n        return this._templateId;\r\n    }\r\n    renderTemplate(container) {\r\n        return this.renderers.map(r => r.renderTemplate(container));\r\n    }\r\n    renderElement(element, index, templateData, height) {\r\n        let i = 0;\r\n        for (const renderer of this.renderers) {\r\n            renderer.renderElement(element, index, templateData[i++], height);\r\n        }\r\n    }\r\n    disposeElement(element, index, templateData, height) {\r\n        let i = 0;\r\n        for (const renderer of this.renderers) {\r\n            if (renderer.disposeElement) {\r\n                renderer.disposeElement(element, index, templateData[i], height);\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    disposeTemplate(templateData) {\r\n        let i = 0;\r\n        for (const renderer of this.renderers) {\r\n            renderer.disposeTemplate(templateData[i++]);\r\n        }\r\n    }\r\n}\r\nclass AccessibiltyRenderer {\r\n    constructor(accessibilityProvider) {\r\n        this.accessibilityProvider = accessibilityProvider;\r\n        this.templateId = 'a18n';\r\n    }\r\n    renderTemplate(container) {\r\n        return container;\r\n    }\r\n    renderElement(element, index, container) {\r\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\r\n        if (ariaLabel) {\r\n            container.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-label');\r\n        }\r\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\r\n        if (typeof ariaLevel === 'number') {\r\n            container.setAttribute('aria-level', `${ariaLevel}`);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-level');\r\n        }\r\n    }\r\n    disposeTemplate(templateData) {\r\n        // noop\r\n    }\r\n}\r\nclass ListViewDragAndDrop {\r\n    constructor(list, dnd) {\r\n        this.list = list;\r\n        this.dnd = dnd;\r\n    }\r\n    getDragElements(element) {\r\n        const selection = this.list.getSelectedElements();\r\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\r\n        return elements;\r\n    }\r\n    getDragURI(element) {\r\n        return this.dnd.getDragURI(element);\r\n    }\r\n    getDragLabel(elements, originalEvent) {\r\n        if (this.dnd.getDragLabel) {\r\n            return this.dnd.getDragLabel(elements, originalEvent);\r\n        }\r\n        return undefined;\r\n    }\r\n    onDragStart(data, originalEvent) {\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(data, originalEvent);\r\n        }\r\n    }\r\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\r\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\r\n    }\r\n    onDragEnd(originalEvent) {\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(originalEvent);\r\n        }\r\n    }\r\n    drop(data, targetElement, targetIndex, originalEvent) {\r\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\r\n    }\r\n}\r\nexport class List {\r\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\r\n        var _a;\r\n        this.user = user;\r\n        this._options = _options;\r\n        this.eventBufferer = new EventBufferer();\r\n        this._ariaLabel = '';\r\n        this.disposables = new DisposableStore();\r\n        this.didJustPressContextMenuKey = false;\r\n        this._onDidDispose = new Emitter();\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\r\n        this.selection = new SelectionTrait(role !== 'listbox');\r\n        this.focus = new Trait('focused');\r\n        mixin(_options, defaultStyles, false);\r\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\r\n        this.accessibilityProvider = _options.accessibilityProvider;\r\n        if (this.accessibilityProvider) {\r\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\r\n            if (this.accessibilityProvider.onDidChangeActiveDescendant) {\r\n                this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\r\n            }\r\n        }\r\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\r\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\r\n        this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\r\n        this.view.domNode.setAttribute('role', role);\r\n        if (_options.styleController) {\r\n            this.styleController = _options.styleController(this.view.domId);\r\n        }\r\n        else {\r\n            const styleElement = createStyleSheet(this.view.domNode);\r\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\r\n        }\r\n        this.spliceable = new CombinedSpliceable([\r\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\r\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\r\n            this.view\r\n        ]);\r\n        this.disposables.add(this.focus);\r\n        this.disposables.add(this.selection);\r\n        this.disposables.add(this.view);\r\n        this.disposables.add(this._onDidDispose);\r\n        this.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), () => null);\r\n        this.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), () => null);\r\n        this.disposables.add(new DOMFocusController(this, this.view));\r\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\r\n            const controller = new KeyboardController(this, this.view, _options);\r\n            this.disposables.add(controller);\r\n        }\r\n        if (_options.keyboardNavigationLabelProvider) {\r\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\r\n            this.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\r\n            this.disposables.add(this.typeLabelController);\r\n        }\r\n        this.mouseController = this.createMouseController(_options);\r\n        this.disposables.add(this.mouseController);\r\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\r\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\r\n        if (this.accessibilityProvider) {\r\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\r\n        }\r\n        if (_options.multipleSelectionSupport) {\r\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\r\n        }\r\n    }\r\n    get onDidChangeFocus() {\r\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e));\r\n    }\r\n    get onDidChangeSelection() {\r\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e));\r\n    }\r\n    get domId() { return this.view.domId; }\r\n    get onMouseClick() { return this.view.onMouseClick; }\r\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\r\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\r\n    get onPointer() { return this.mouseController.onPointer; }\r\n    get onMouseDown() { return this.view.onMouseDown; }\r\n    get onTouchStart() { return this.view.onTouchStart; }\r\n    get onTap() { return this.view.onTap; }\r\n    get onContextMenu() {\r\n        const fromKeydown = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n            .map(e => new StandardKeyboardEvent(e))\r\n            .filter(e => this.didJustPressContextMenuKey = e.keyCode === 58 /* ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* F10 */))\r\n            .filter(e => { e.preventDefault(); e.stopPropagation(); return false; })\r\n            .event;\r\n        const fromKeyup = Event.chain(domEvent(this.view.domNode, 'keyup'))\r\n            .filter(() => {\r\n            const didJustPressContextMenuKey = this.didJustPressContextMenuKey;\r\n            this.didJustPressContextMenuKey = false;\r\n            return didJustPressContextMenuKey;\r\n        })\r\n            .filter(() => this.getFocus().length > 0 && !!this.view.domElement(this.getFocus()[0]))\r\n            .map(browserEvent => {\r\n            const index = this.getFocus()[0];\r\n            const element = this.view.element(index);\r\n            const anchor = this.view.domElement(index);\r\n            return { index, element, anchor, browserEvent };\r\n        })\r\n            .event;\r\n        const fromMouse = Event.chain(this.view.onContextMenu)\r\n            .filter(() => !this.didJustPressContextMenuKey)\r\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: { x: browserEvent.clientX + 1, y: browserEvent.clientY }, browserEvent }))\r\n            .event;\r\n        return Event.any(fromKeydown, fromKeyup, fromMouse);\r\n    }\r\n    get onKeyDown() { return domEvent(this.view.domNode, 'keydown'); }\r\n    createMouseController(options) {\r\n        return new MouseController(this);\r\n    }\r\n    updateOptions(optionsUpdate = {}) {\r\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\r\n        if (this.typeLabelController) {\r\n            this.typeLabelController.updateOptions(this._options);\r\n        }\r\n        this.view.updateOptions(optionsUpdate);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    splice(start, deleteCount, elements = []) {\r\n        if (start < 0 || start > this.view.length) {\r\n            throw new ListError(this.user, `Invalid start index: ${start}`);\r\n        }\r\n        if (deleteCount < 0) {\r\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\r\n        }\r\n        if (deleteCount === 0 && elements.length === 0) {\r\n            return;\r\n        }\r\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\r\n    }\r\n    rerender() {\r\n        this.view.rerender();\r\n    }\r\n    element(index) {\r\n        return this.view.element(index);\r\n    }\r\n    get length() {\r\n        return this.view.length;\r\n    }\r\n    get contentHeight() {\r\n        return this.view.contentHeight;\r\n    }\r\n    get scrollTop() {\r\n        return this.view.getScrollTop();\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this.view.setScrollTop(scrollTop);\r\n    }\r\n    get ariaLabel() {\r\n        return this._ariaLabel;\r\n    }\r\n    set ariaLabel(value) {\r\n        this._ariaLabel = value;\r\n        this.view.domNode.setAttribute('aria-label', value);\r\n    }\r\n    domFocus() {\r\n        this.view.domNode.focus();\r\n    }\r\n    layout(height, width) {\r\n        this.view.layout(height, width);\r\n    }\r\n    setSelection(indexes, browserEvent) {\r\n        for (const index of indexes) {\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, `Invalid index ${index}`);\r\n            }\r\n        }\r\n        this.selection.set(indexes, browserEvent);\r\n    }\r\n    getSelection() {\r\n        return this.selection.get();\r\n    }\r\n    getSelectedElements() {\r\n        return this.getSelection().map(i => this.view.element(i));\r\n    }\r\n    setFocus(indexes, browserEvent) {\r\n        for (const index of indexes) {\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, `Invalid index ${index}`);\r\n            }\r\n        }\r\n        this.focus.set(indexes, browserEvent);\r\n    }\r\n    focusNext(n = 1, loop = false, browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        const focus = this.focus.get();\r\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    }\r\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        const focus = this.focus.get();\r\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    }\r\n    focusNextPage(browserEvent, filter) {\r\n        let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\r\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\r\n        const lastPageElement = this.view.element(lastPageIndex);\r\n        const currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== lastPageElement) {\r\n            const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\r\n            if (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\r\n                this.setFocus([lastGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([lastPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            const previousScrollTop = this.view.getScrollTop();\r\n            this.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                this.setFocus([]);\r\n                // Let the scroll event listener run\r\n                setTimeout(() => this.focusNextPage(browserEvent, filter), 0);\r\n            }\r\n        }\r\n    }\r\n    focusPreviousPage(browserEvent, filter) {\r\n        let firstPageIndex;\r\n        const scrollTop = this.view.getScrollTop();\r\n        if (scrollTop === 0) {\r\n            firstPageIndex = this.view.indexAt(scrollTop);\r\n        }\r\n        else {\r\n            firstPageIndex = this.view.indexAfter(scrollTop - 1);\r\n        }\r\n        const firstPageElement = this.view.element(firstPageIndex);\r\n        const currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== firstPageElement) {\r\n            const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\r\n            if (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\r\n                this.setFocus([firstGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([firstPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            const previousScrollTop = scrollTop;\r\n            this.view.setScrollTop(scrollTop - this.view.renderHeight);\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                this.setFocus([]);\r\n                // Let the scroll event listener run\r\n                setTimeout(() => this.focusPreviousPage(browserEvent, filter), 0);\r\n            }\r\n        }\r\n    }\r\n    focusLast(browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    }\r\n    focusFirst(browserEvent, filter) {\r\n        this.focusNth(0, browserEvent, filter);\r\n    }\r\n    focusNth(n, browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        const index = this.findNextIndex(n, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    }\r\n    findNextIndex(index, loop = false, filter) {\r\n        for (let i = 0; i < this.length; i++) {\r\n            if (index >= this.length && !loop) {\r\n                return -1;\r\n            }\r\n            index = index % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index++;\r\n        }\r\n        return -1;\r\n    }\r\n    findPreviousIndex(index, loop = false, filter) {\r\n        for (let i = 0; i < this.length; i++) {\r\n            if (index < 0 && !loop) {\r\n                return -1;\r\n            }\r\n            index = (this.length + (index % this.length)) % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index--;\r\n        }\r\n        return -1;\r\n    }\r\n    getFocus() {\r\n        return this.focus.get();\r\n    }\r\n    getFocusedElements() {\r\n        return this.getFocus().map(i => this.view.element(i));\r\n    }\r\n    reveal(index, relativeTop) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, `Invalid index ${index}`);\r\n        }\r\n        const scrollTop = this.view.getScrollTop();\r\n        const elementTop = this.view.elementTop(index);\r\n        const elementHeight = this.view.elementHeight(index);\r\n        if (isNumber(relativeTop)) {\r\n            // y = mx + b\r\n            const m = elementHeight - this.view.renderHeight;\r\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\r\n        }\r\n        else {\r\n            const viewItemBottom = elementTop + elementHeight;\r\n            const wrapperBottom = scrollTop + this.view.renderHeight;\r\n            if (elementTop < scrollTop && viewItemBottom >= wrapperBottom) {\r\n                // The element is already overflowing the viewport, no-op\r\n            }\r\n            else if (elementTop < scrollTop) {\r\n                this.view.setScrollTop(elementTop);\r\n            }\r\n            else if (viewItemBottom >= wrapperBottom) {\r\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns the relative position of an element rendered in the list.\r\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n     */\r\n    getRelativeTop(index) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, `Invalid index ${index}`);\r\n        }\r\n        const scrollTop = this.view.getScrollTop();\r\n        const elementTop = this.view.elementTop(index);\r\n        const elementHeight = this.view.elementHeight(index);\r\n        if (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\r\n            return null;\r\n        }\r\n        // y = mx + b\r\n        const m = elementHeight - this.view.renderHeight;\r\n        return Math.abs((scrollTop - elementTop) / m);\r\n    }\r\n    getHTMLElement() {\r\n        return this.view.domNode;\r\n    }\r\n    style(styles) {\r\n        this.styleController.style(styles);\r\n    }\r\n    toListEvent({ indexes, browserEvent }) {\r\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\r\n    }\r\n    _onFocusChange() {\r\n        const focus = this.focus.get();\r\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\r\n        this.onDidChangeActiveDescendant();\r\n    }\r\n    onDidChangeActiveDescendant() {\r\n        var _a;\r\n        const focus = this.focus.get();\r\n        if (focus.length > 0) {\r\n            let id;\r\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\r\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\r\n            }\r\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\r\n        }\r\n        else {\r\n            this.view.domNode.removeAttribute('aria-activedescendant');\r\n        }\r\n    }\r\n    _onSelectionChange() {\r\n        const selection = this.selection.get();\r\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\r\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\r\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\r\n    }\r\n    dispose() {\r\n        this._onDidDispose.fire();\r\n        this.disposables.dispose();\r\n        this._onDidDispose.dispose();\r\n    }\r\n}\r\n__decorate([\r\n    memoize\r\n], List.prototype, \"onDidChangeFocus\", null);\r\n__decorate([\r\n    memoize\r\n], List.prototype, \"onDidChangeSelection\", null);\r\n__decorate([\r\n    memoize\r\n], List.prototype, \"onContextMenu\", null);\r\n"]},"metadata":{},"sourceType":"module"}