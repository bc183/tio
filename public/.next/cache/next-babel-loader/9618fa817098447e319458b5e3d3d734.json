{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './aria.css';\nimport { isMacintosh } from '../../../common/platform.js';\nimport * as dom from '../../dom.js'; // Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\n\nvar MAX_MESSAGE_LENGTH = 20000;\nvar ariaContainer;\nvar alertContainer;\nvar alertContainer2;\nvar statusContainer;\nvar statusContainer2;\nexport function setARIAContainer(parent) {\n  ariaContainer = document.createElement('div');\n  ariaContainer.className = 'monaco-aria-container';\n\n  var createAlertContainer = function createAlertContainer() {\n    var element = document.createElement('div');\n    element.className = 'monaco-alert';\n    element.setAttribute('role', 'alert');\n    element.setAttribute('aria-atomic', 'true');\n    ariaContainer.appendChild(element);\n    return element;\n  };\n\n  alertContainer = createAlertContainer();\n  alertContainer2 = createAlertContainer();\n\n  var createStatusContainer = function createStatusContainer() {\n    var element = document.createElement('div');\n    element.className = 'monaco-status';\n    element.setAttribute('role', 'complementary');\n    element.setAttribute('aria-live', 'polite');\n    element.setAttribute('aria-atomic', 'true');\n    ariaContainer.appendChild(element);\n    return element;\n  };\n\n  statusContainer = createStatusContainer();\n  statusContainer2 = createStatusContainer();\n  parent.appendChild(ariaContainer);\n}\n/**\r\n * Given the provided message, will make sure that it is read as alert to screen readers.\r\n */\n\nexport function alert(msg) {\n  if (!ariaContainer) {\n    return;\n  } // Use alternate containers such that duplicated messages get read out by screen readers #99466\n\n\n  if (alertContainer.textContent !== msg) {\n    dom.clearNode(alertContainer2);\n    insertMessage(alertContainer, msg);\n  } else {\n    dom.clearNode(alertContainer);\n    insertMessage(alertContainer2, msg);\n  }\n}\n/**\r\n * Given the provided message, will make sure that it is read as status to screen readers.\r\n */\n\nexport function status(msg) {\n  if (!ariaContainer) {\n    return;\n  }\n\n  if (isMacintosh) {\n    alert(msg); // VoiceOver does not seem to support status role\n  } else {\n    if (statusContainer.textContent !== msg) {\n      dom.clearNode(statusContainer2);\n      insertMessage(statusContainer, msg);\n    } else {\n      dom.clearNode(statusContainer);\n      insertMessage(statusContainer2, msg);\n    }\n  }\n}\n\nfunction insertMessage(target, msg) {\n  dom.clearNode(target);\n\n  if (msg.length > MAX_MESSAGE_LENGTH) {\n    msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n  }\n\n  target.textContent = msg; // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n\n  target.style.visibility = 'hidden';\n  target.style.visibility = 'visible';\n}","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js"],"names":["isMacintosh","dom","MAX_MESSAGE_LENGTH","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","parent","document","createElement","className","createAlertContainer","element","setAttribute","appendChild","createStatusContainer","alert","msg","textContent","clearNode","insertMessage","status","target","length","substr","style","visibility"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './aria.css';\r\nimport { isMacintosh } from '../../../common/platform.js';\r\nimport * as dom from '../../dom.js';\r\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\r\nconst MAX_MESSAGE_LENGTH = 20000;\r\nlet ariaContainer;\r\nlet alertContainer;\r\nlet alertContainer2;\r\nlet statusContainer;\r\nlet statusContainer2;\r\nexport function setARIAContainer(parent) {\r\n    ariaContainer = document.createElement('div');\r\n    ariaContainer.className = 'monaco-aria-container';\r\n    const createAlertContainer = () => {\r\n        const element = document.createElement('div');\r\n        element.className = 'monaco-alert';\r\n        element.setAttribute('role', 'alert');\r\n        element.setAttribute('aria-atomic', 'true');\r\n        ariaContainer.appendChild(element);\r\n        return element;\r\n    };\r\n    alertContainer = createAlertContainer();\r\n    alertContainer2 = createAlertContainer();\r\n    const createStatusContainer = () => {\r\n        const element = document.createElement('div');\r\n        element.className = 'monaco-status';\r\n        element.setAttribute('role', 'complementary');\r\n        element.setAttribute('aria-live', 'polite');\r\n        element.setAttribute('aria-atomic', 'true');\r\n        ariaContainer.appendChild(element);\r\n        return element;\r\n    };\r\n    statusContainer = createStatusContainer();\r\n    statusContainer2 = createStatusContainer();\r\n    parent.appendChild(ariaContainer);\r\n}\r\n/**\r\n * Given the provided message, will make sure that it is read as alert to screen readers.\r\n */\r\nexport function alert(msg) {\r\n    if (!ariaContainer) {\r\n        return;\r\n    }\r\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\r\n    if (alertContainer.textContent !== msg) {\r\n        dom.clearNode(alertContainer2);\r\n        insertMessage(alertContainer, msg);\r\n    }\r\n    else {\r\n        dom.clearNode(alertContainer);\r\n        insertMessage(alertContainer2, msg);\r\n    }\r\n}\r\n/**\r\n * Given the provided message, will make sure that it is read as status to screen readers.\r\n */\r\nexport function status(msg) {\r\n    if (!ariaContainer) {\r\n        return;\r\n    }\r\n    if (isMacintosh) {\r\n        alert(msg); // VoiceOver does not seem to support status role\r\n    }\r\n    else {\r\n        if (statusContainer.textContent !== msg) {\r\n            dom.clearNode(statusContainer2);\r\n            insertMessage(statusContainer, msg);\r\n        }\r\n        else {\r\n            dom.clearNode(statusContainer);\r\n            insertMessage(statusContainer2, msg);\r\n        }\r\n    }\r\n}\r\nfunction insertMessage(target, msg) {\r\n    dom.clearNode(target);\r\n    if (msg.length > MAX_MESSAGE_LENGTH) {\r\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\r\n    }\r\n    target.textContent = msg;\r\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\r\n    target.style.visibility = 'hidden';\r\n    target.style.visibility = 'visible';\r\n}\r\n"]},"metadata":{},"sourceType":"module"}