{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/bar007/Desktop/projects/tio/client/pages/r/[sub]/[identifier]/[slug].tsx\";\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport useSWR from 'swr';\nimport Image from 'next/image';\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport classNames from 'classnames';\nimport Sidebar from '../../../../components/SideBar';\nimport Axios from 'axios';\nimport { useAuthState } from '../../../../context/auth';\nimport ActionButton from '../../../../components/ActionButton';\nimport { Fragment, useEffect, useState } from 'react';\ndayjs.extend(relativeTime);\nexport default function PostPage() {\n  // Local state\n  const {\n    0: newComment,\n    1: setNewComment\n  } = useState(\"\"); // Global state\n\n  const {\n    authenticated,\n    user\n  } = useAuthState();\n  const {\n    0: description,\n    1: setDescription\n  } = useState(\"\"); // Utils\n\n  const router = useRouter();\n  const {\n    identifier,\n    sub,\n    slug\n  } = router.query;\n  const {\n    data: post,\n    error\n  } = useSWR(identifier && slug ? `/posts/${identifier}/${slug}` : null);\n  const {\n    data: comments,\n    revalidate\n  } = useSWR(identifier && slug ? `/posts/${identifier}/${slug}/comments` : null);\n  useEffect(() => {\n    if (!post) {\n      return;\n    }\n\n    let desc = post.body || post.title;\n    desc = desc.substr(0, 158).concat('...');\n    setDescription(desc);\n  }, [post]);\n  if (error) router.push('/');\n\n  const vote = async (value, comment) => {\n    // If not logged in go to login\n    if (!authenticated) router.push('/login'); // If vote is the same reset vote\n\n    if (!comment && value === post.userVote || comment && comment.userVote === value) value = 0;\n\n    try {\n      const res = await Axios.post('/misc/vote', {\n        identifier,\n        slug,\n        commentIdentifier: comment === null || comment === void 0 ? void 0 : comment.identifier,\n        value\n      });\n      revalidate();\n      console.log(res.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  console.log(comments);\n\n  const submitComment = async event => {\n    event.preventDefault();\n\n    if (newComment.trim() === '') {\n      return;\n    }\n\n    try {\n      await Axios.post(`/posts/${post.identifier}/${post.slug}/comments`, {\n        body: newComment\n      });\n      setNewComment('');\n      revalidate();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: post === null || post === void 0 ? void 0 : post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:description\",\n        content: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"og:title\",\n        content: post === null || post === void 0 ? void 0 : post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"twitter:title\",\n        content: post === null || post === void 0 ? void 0 : post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        property: \"twitter:description\",\n        content: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      href: `/r/${sub}`,\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center w-full h-20 p-8 bg-blue-500\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container flex\",\n            children: [post && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-8 h-8 mr-2 overflow-hidden rounded-full\",\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                src: post.sub.imageUrl,\n                height: 8 * 16 / 4,\n                width: 8 * 16 / 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl font-semibold text-white\",\n              children: [\"/r/\", sub]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container flex pt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-160\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded\",\n          children: post && /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-10 py-2 text-center rounded-l\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-red-500\",\n                  onClick: () => vote(1),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: classNames('icon-arrow-up', {\n                      'text-red-500': post.userVote === 1\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-bold\",\n                  children: post.voteScore\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-blue-600\",\n                  onClick: () => vote(-1),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: classNames('icon-arrow-down', {\n                      'text-blue-600': post.userVote === -1\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"py-2 pr-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500\",\n                    children: [\"Posted by\", /*#__PURE__*/_jsxDEV(Link, {\n                      href: `/u/${post.username}`,\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"mx-1 hover:underline\",\n                        children: [\"/u/\", post.username]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 160,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Link, {\n                      href: post.url,\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"mx-1 hover:underline\",\n                        children: dayjs(post.createdAt).fromNow()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"my-1 text-xl font-medium\",\n                  children: post.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"my-3 text-sm\",\n                  children: post.body\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex\",\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    href: post.url,\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      children: /*#__PURE__*/_jsxDEV(ActionButton, {\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"mr-1 fas fa-comment-alt fa-xs\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 180,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-bold\",\n                          children: [post.commentCount, \" Comments\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 181,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"mr-1 fas fa-share fa-xs\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Share\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"mr-1 fas fa-bookmark fa-xs\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pl-10 pr-6 mb-4\",\n              children: authenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-1 text-xs\",\n                  children: [\"Comment as\", /*#__PURE__*/_jsxDEV(Link, {\n                    href: `/u/${user.username}`,\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"ml-1 font-semibold text-blue-500\",\n                      children: user.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: submitComment,\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"w-full p-3 border border-gray-300 rounded focus:outline-none focus:border-gray-600\",\n                    onChange: e => setNewComment(e.target.value),\n                    value: newComment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-end\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"px-3 py-1 blue button\",\n                      disabled: newComment.trim() === '',\n                      children: \"Comment\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between px-2 py-4 border border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-semibold text-gray-400\",\n                  children: \"Log in or Sign up to leave a comment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    href: \"/login\",\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"px-4 py-1 mr-4 hollow blue button\",\n                      children: \"Login\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(Link, {\n                    href: \"/register\",\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"px-4 py-1 blue button\",\n                      children: \"Sign up\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), comments === null || comments === void 0 ? void 0 : comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-10 py-2 text-center rounded-l\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-red-500\",\n                  onClick: () => vote(1, comment),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: classNames('icon-arrow-up', {\n                      'text-red-500': comment.userVote === 1\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-bold\",\n                  children: comment.voteScore\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-blue-600\",\n                  onClick: () => vote(-1, comment),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: classNames('icon-arrow-down', {\n                      'text-blue-600': comment.userVote === -1\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"py-2 pr-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-1 text-xs leading-none\",\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    href: `/u/${comment.username}`,\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"mr-1 font-bold hover:underline\",\n                      children: comment.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: `\n                                ${comment.voteScore}\n                                points .\n                                ${dayjs(comment.createdAt).fromNow()}\n                            `\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: comment.body\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)]\n            }, comment.identifier, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), post && /*#__PURE__*/_jsxDEV(Sidebar, {\n        sub: post.sub\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/pages/r/[sub]/[identifier]/[slug].tsx"],"names":["Head","Link","useRouter","useSWR","Image","dayjs","relativeTime","classNames","Sidebar","Axios","useAuthState","ActionButton","Fragment","useEffect","useState","extend","PostPage","newComment","setNewComment","authenticated","user","description","setDescription","router","identifier","sub","slug","query","data","post","error","comments","revalidate","desc","body","title","substr","concat","push","vote","value","comment","userVote","res","commentIdentifier","console","log","err","submitComment","event","preventDefault","trim","imageUrl","voteScore","username","url","createdAt","fromNow","commentCount","e","target","map"],"mappings":"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","sourcesContent":["import Head from 'next/head'\nimport Link from 'next/link'\nimport { useRouter } from 'next/router'\nimport useSWR from 'swr'\nimport Image from 'next/image'\nimport dayjs from 'dayjs'\nimport relativeTime from 'dayjs/plugin/relativeTime'\nimport classNames from 'classnames'\n\nimport { Post, Comment } from '../../../../types'\nimport Sidebar from '../../../../components/SideBar';\nimport Axios from 'axios'\nimport { useAuthState } from '../../../../context/auth'\nimport ActionButton from '../../../../components/ActionButton';\nimport { FormEvent, Fragment, useEffect, useState } from 'react'\n\ndayjs.extend(relativeTime)\n\nexport default function PostPage() {\n  // Local state\n    const [newComment, setNewComment] = useState(\"\");\n  // Global state\n  const { authenticated, user } = useAuthState();\n  const [description, setDescription] = useState(\"\");\n\n  \n\n  // Utils\n  const router = useRouter();\n  const { identifier, sub, slug } = router.query\n\n  const { data: post, error } = useSWR<Post>(\n    identifier && slug ? `/posts/${identifier}/${slug}` : null\n  )\n\n  const { data: comments, revalidate} = useSWR<Comment[]>(\n    identifier && slug ? `/posts/${identifier}/${slug}/comments` : null\n  )\n\n  useEffect(() => {\n    if(!post) {\n      return;\n    }\n\n    let desc = post.body || post.title;\n    desc = desc.substr(0, 158).concat('...');\n    setDescription(desc);\n  }, [post])\n\n  if (error) router.push('/')\n\n  const vote = async (value: number, comment?: Comment) => {\n    // If not logged in go to login\n    if (!authenticated) router.push('/login')\n\n    // If vote is the same reset vote\n    if ((!comment && value === post.userVote) || (comment && comment.userVote === value)) value = 0\n\n    try {\n      const res = await Axios.post('/misc/vote', {\n        identifier,\n        slug,\n        commentIdentifier: comment?.identifier,\n        value,\n      })\n\n      revalidate();\n\n      console.log(res.data)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  console.log(comments);\n\n  const submitComment = async (event: FormEvent) => {\n    event.preventDefault();\n    if(newComment.trim() === '') {\n        return;\n    }\n\n    try {\n        await Axios.post(`/posts/${post.identifier}/${post.slug}/comments`, {\n            body: newComment\n        });\n        setNewComment('');\n        revalidate();\n    } catch (error) {\n        console.log(error);\n    }\n  }\n\n  return (\n    <>\n      <Head>\n        <title>{post?.title}</title>\n        <meta name=\"description\" content={description}>\n        </meta>\n        <meta property=\"og:description\" content={description} />\n        <meta property=\"og:title\" content={post?.title} />\n        <meta property=\"twitter:title\" content={post?.title} />\n        <meta property=\"twitter:description\" content={description} />\n      </Head>\n      <Link href={`/r/${sub}`}>\n        <a>\n          <div className=\"flex items-center w-full h-20 p-8 bg-blue-500\">\n            <div className=\"container flex\">\n              {post && (\n                <div className=\"w-8 h-8 mr-2 overflow-hidden rounded-full\">\n                  <Image\n                    src={post.sub.imageUrl}\n                    height={(8 * 16) / 4}\n                    width={(8 * 16) / 4}\n                  />\n                </div>\n              )}\n              <p className=\"text-xl font-semibold text-white\">/r/{sub}</p>\n            </div>\n          </div>\n        </a>\n      </Link>\n      <div className=\"container flex pt-5\">\n        {/* Post */}\n        <div className=\"w-160\">\n          <div className=\"bg-white rounded\">\n            {post && (\n                <Fragment>\n              <div className=\"flex\">\n                {/* Vote section */}\n                <div className=\"flex-shrink-0 w-10 py-2 text-center rounded-l\">\n                  {/* Upvote */}\n                  <div\n                    className=\"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-red-500\"\n                    onClick={() => vote(1)}\n                  >\n                    <i\n                      className={classNames('icon-arrow-up', {\n                        'text-red-500': post.userVote === 1,\n                      })}\n                    ></i>\n                  </div>\n                  <p className=\"text-xs font-bold\">{post.voteScore}</p>\n                  {/* Downvote */}\n                  <div\n                    className=\"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-blue-600\"\n                    onClick={() => vote(-1)}\n                  >\n                    <i\n                      className={classNames('icon-arrow-down', {\n                        'text-blue-600': post.userVote === -1,\n                      })}\n                    ></i>\n                  </div>\n                </div>\n                <div className=\"py-2 pr-2\">\n                  <div className=\"flex items-center\">\n                    <p className=\"text-xs text-gray-500\">\n                      Posted by\n                      <Link href={`/u/${post.username}`}>\n                        <a className=\"mx-1 hover:underline\">\n                          /u/{post.username}\n                        </a>\n                      </Link>\n                      <Link href={post.url}>\n                        <a className=\"mx-1 hover:underline\">\n                          {dayjs(post.createdAt).fromNow()}\n                        </a>\n                      </Link>\n                    </p>\n                  </div>\n                  {/* Post title */}\n                  <h1 className=\"my-1 text-xl font-medium\">{post.title}</h1>\n                  {/* Post body */}\n                  <p className=\"my-3 text-sm\">{post.body}</p>\n                  {/* Actions */}\n                  <div className=\"flex\">\n                    <Link href={post.url}>\n                      <a>\n                        <ActionButton>\n                          <i className=\"mr-1 fas fa-comment-alt fa-xs\"></i>\n                          <span className=\"font-bold\">\n                            {post.commentCount} Comments\n                          </span>\n                        </ActionButton>\n                      </a>\n                    </Link>\n                    <ActionButton>\n                      <i className=\"mr-1 fas fa-share fa-xs\"></i>\n                      <span className=\"font-bold\">Share</span>\n                    </ActionButton>\n                    <ActionButton>\n                      <i className=\"mr-1 fas fa-bookmark fa-xs\"></i>\n                      <span className=\"font-bold\">Save</span>\n                    </ActionButton>\n                  </div>\n                </div>\n              </div>\n              {/* comment input area */}\n              <div className=\"pl-10 pr-6 mb-4\">\n                  {authenticated ? (\n                      <div>\n                          <p className=\"mb-1 text-xs\">\n                            Comment as \n                            <Link href={`/u/${user.username}`}>\n                                <a className=\"ml-1 font-semibold text-blue-500\">\n                                    {user.username}\n                                </a>\n                            </Link>\n                          </p>\n                          <form onSubmit={submitComment}>\n                            <textarea className=\"w-full p-3 border border-gray-300 rounded focus:outline-none focus:border-gray-600\"\n                                onChange={e => setNewComment(e.target.value)}\n                                value={newComment}\n                            >\n                            </textarea>\n                            <div className=\"flex justify-end\">\n                                <button className=\"px-3 py-1 blue button\" disabled={newComment.trim() === ''}>\n                                    Comment\n                                </button>\n                            </div>\n                          </form>\n                      </div>\n                  ): (\n                    <div className=\"flex items-center justify-between px-2 py-4 border border-gray-200\">\n                        <p className=\"font-semibold text-gray-400\">\n                            Log in or Sign up to leave a comment\n                        </p>\n                        <div>\n                            <Link href=\"/login\">\n                                <a className=\"px-4 py-1 mr-4 hollow blue button\">\n                                    Login\n                                </a>\n                            </Link>\n                            <Link href=\"/register\">\n                                <a className=\"px-4 py-1 blue button\">\n                                    Sign up\n                                </a>\n                            </Link>\n                        </div>\n                    </div>\n                  )}\n              </div>\n              <hr/>\n              {comments?.map(comment => (\n                  <div className=\"flex\" key={comment.identifier}>\n                    <div className=\"flex-shrink-0 w-10 py-2 text-center rounded-l\">\n                  {/* Upvote */}\n                  <div\n                    className=\"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-red-500\"\n                    onClick={() => vote(1, comment)}\n                  >\n                    <i\n                      className={classNames('icon-arrow-up', {\n                        'text-red-500': comment.userVote === 1,\n                      })}\n                    ></i>\n                  </div>\n                  <p className=\"text-xs font-bold\">{comment.voteScore}</p>\n                  {/* Downvote */}\n                  <div\n                    className=\"w-6 mx-auto text-gray-400 rounded cursor-pointer hover:bg-gray-300 hover:text-blue-600\"\n                    onClick={() => vote(-1, comment)}\n                  >\n                    <i\n                      className={classNames('icon-arrow-down', {\n                        'text-blue-600': comment.userVote === -1,\n                      })}\n                    ></i>\n                  </div>\n                </div>\n                <div className=\"py-2 pr-2\">\n                    <p className=\"mb-1 text-xs leading-none\">\n                        <Link href={`/u/${comment.username}`}>\n                            <a className=\"mr-1 font-bold hover:underline\">\n                                {comment.username}\n                            </a>\n                        </Link>\n                        <span className=\"text-gray-600\">\n                            {`\n                                ${comment.voteScore}\n                                points .\n                                ${dayjs(comment.createdAt).fromNow()}\n                            `}\n                        </span>\n                    </p>\n                    <p>{comment.body}</p>\n                </div>\n                  </div>\n              ))}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {/* Sidebar */}\n        {post && <Sidebar sub={post.sub} />}\n      </div>\n    </>\n  )\n}"]},"metadata":{},"sourceType":"module"}