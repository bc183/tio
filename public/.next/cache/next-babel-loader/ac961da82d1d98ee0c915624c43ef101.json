{"ast":null,"code":"import _regeneratorRuntime from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport './iconlabel.css';\nimport * as dom from '../../dom.js';\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { equals } from '../../../common/objects.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport { isFunction, isString } from '../../../common/types.js';\nimport { domEvent } from '../../event.js';\nimport { localize } from '../../../../nls.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\n\nvar FastLabelNode = /*#__PURE__*/function () {\n  function FastLabelNode(_element) {\n    _classCallCheck(this, FastLabelNode);\n\n    this._element = _element;\n  }\n\n  _createClass(FastLabelNode, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.disposed = true;\n    }\n  }, {\n    key: \"element\",\n    get: function get() {\n      return this._element;\n    }\n  }, {\n    key: \"textContent\",\n    set: function set(content) {\n      if (this.disposed || content === this._textContent) {\n        return;\n      }\n\n      this._textContent = content;\n      this._element.textContent = content;\n    }\n  }, {\n    key: \"className\",\n    set: function set(className) {\n      if (this.disposed || className === this._className) {\n        return;\n      }\n\n      this._className = className;\n      this._element.className = className;\n    }\n  }, {\n    key: \"empty\",\n    set: function set(empty) {\n      if (this.disposed || empty === this._empty) {\n        return;\n      }\n\n      this._empty = empty;\n      this._element.style.marginLeft = empty ? '0' : '';\n    }\n  }]);\n\n  return FastLabelNode;\n}();\n\nexport var IconLabel = /*#__PURE__*/function (_Disposable) {\n  _inherits(IconLabel, _Disposable);\n\n  var _super = _createSuper(IconLabel);\n\n  function IconLabel(container, options) {\n    var _this;\n\n    _classCallCheck(this, IconLabel);\n\n    _this = _super.call(this);\n    _this.hoverDelegate = undefined;\n    _this.customHovers = new Map();\n    _this.domNode = _this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\n    _this.labelContainer = dom.append(_this.domNode.element, dom.$('.monaco-icon-label-container'));\n    var nameContainer = dom.append(_this.labelContainer, dom.$('span.monaco-icon-name-container'));\n    _this.descriptionContainer = _this._register(new FastLabelNode(dom.append(_this.labelContainer, dom.$('span.monaco-icon-description-container'))));\n\n    if (options === null || options === void 0 ? void 0 : options.supportHighlights) {\n      _this.nameNode = new LabelWithHighlights(nameContainer, !!options.supportIcons);\n    } else {\n      _this.nameNode = new Label(nameContainer);\n    }\n\n    if (options === null || options === void 0 ? void 0 : options.supportDescriptionHighlights) {\n      _this.descriptionNodeFactory = function () {\n        return new HighlightedLabel(dom.append(_this.descriptionContainer.element, dom.$('span.label-description')), !!options.supportIcons);\n      };\n    } else {\n      _this.descriptionNodeFactory = function () {\n        return _this._register(new FastLabelNode(dom.append(_this.descriptionContainer.element, dom.$('span.label-description'))));\n      };\n    }\n\n    if (options === null || options === void 0 ? void 0 : options.hoverDelegate) {\n      _this.hoverDelegate = options.hoverDelegate;\n    }\n\n    return _this;\n  }\n\n  _createClass(IconLabel, [{\n    key: \"setLabel\",\n    value: function setLabel(label, description, options) {\n      var classes = ['monaco-icon-label'];\n\n      if (options) {\n        if (options.extraClasses) {\n          classes.push.apply(classes, _toConsumableArray(options.extraClasses));\n        }\n\n        if (options.italic) {\n          classes.push('italic');\n        }\n\n        if (options.strikethrough) {\n          classes.push('strikethrough');\n        }\n      }\n\n      this.domNode.className = classes.join(' ');\n      this.setupHover(this.labelContainer, options === null || options === void 0 ? void 0 : options.title);\n      this.nameNode.setLabel(label, options);\n\n      if (description || this.descriptionNode) {\n        if (!this.descriptionNode) {\n          this.descriptionNode = this.descriptionNodeFactory(); // description node is created lazily on demand\n        }\n\n        if (this.descriptionNode instanceof HighlightedLabel) {\n          this.descriptionNode.set(description || '', options ? options.descriptionMatches : undefined);\n          this.setupHover(this.descriptionNode.element, options === null || options === void 0 ? void 0 : options.descriptionTitle);\n        } else {\n          this.descriptionNode.textContent = description || '';\n          this.setupHover(this.descriptionNode.element, (options === null || options === void 0 ? void 0 : options.descriptionTitle) || '');\n          this.descriptionNode.empty = !description;\n        }\n      }\n    }\n  }, {\n    key: \"setupHover\",\n    value: function setupHover(htmlElement, tooltip) {\n      var previousCustomHover = this.customHovers.get(htmlElement);\n\n      if (previousCustomHover) {\n        previousCustomHover.dispose();\n        this.customHovers[\"delete\"](htmlElement);\n      }\n\n      if (!tooltip) {\n        htmlElement.removeAttribute('title');\n        return;\n      }\n\n      if (!this.hoverDelegate) {\n        return this.setupNativeHover(htmlElement, tooltip);\n      } else {\n        return this.setupCustomHover(this.hoverDelegate, htmlElement, tooltip);\n      }\n    }\n  }, {\n    key: \"getTooltipForCustom\",\n    value: function getTooltipForCustom(markdownTooltip) {\n      var _this2 = this;\n\n      if (isString(markdownTooltip)) {\n        return function () {\n          return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    return _context.abrupt(\"return\", markdownTooltip);\n\n                  case 1:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n        };\n      } else if (isFunction(markdownTooltip.markdown)) {\n        return markdownTooltip.markdown;\n      } else {\n        var markdown = markdownTooltip.markdown;\n        return function () {\n          return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    return _context2.abrupt(\"return\", markdown);\n\n                  case 1:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          }));\n        };\n      }\n    }\n  }, {\n    key: \"setupCustomHover\",\n    value: function setupCustomHover(hoverDelegate, htmlElement, markdownTooltip) {\n      htmlElement.setAttribute('title', '');\n      htmlElement.removeAttribute('title');\n      var tooltip = this.getTooltipForCustom(markdownTooltip); // Testing has indicated that on Windows and Linux 500 ms matches the native hovers most closely.\n      // On Mac, the delay is 1500.\n\n      var hoverDelay = isMacintosh ? 1500 : 500;\n      var hoverOptions;\n      var mouseX;\n      var isHovering = false;\n      var tokenSource;\n\n      function mouseOver(e) {\n        var _this3 = this;\n\n        if (isHovering) {\n          return;\n        }\n\n        tokenSource = new CancellationTokenSource();\n\n        function mouseLeaveOrDown(e) {\n          isHovering = false;\n          hoverOptions = undefined;\n          tokenSource.dispose(true);\n          mouseLeaveDisposable.dispose();\n          mouseDownDisposable.dispose();\n        }\n\n        var mouseLeaveDisposable = domEvent(htmlElement, dom.EventType.MOUSE_LEAVE, true)(mouseLeaveOrDown.bind(htmlElement));\n        var mouseDownDisposable = domEvent(htmlElement, dom.EventType.MOUSE_DOWN, true)(mouseLeaveOrDown.bind(htmlElement));\n        isHovering = true;\n\n        function mouseMove(e) {\n          mouseX = e.x;\n        }\n\n        var mouseMoveDisposable = domEvent(htmlElement, dom.EventType.MOUSE_MOVE, true)(mouseMove.bind(htmlElement));\n        setTimeout(function () {\n          return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n            var target, resolvedTooltip;\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    if (!(isHovering && tooltip)) {\n                      _context3.next = 10;\n                      break;\n                    }\n\n                    if (hoverOptions) {\n                      _context3.next = 9;\n                      break;\n                    }\n\n                    target = {\n                      targetElements: [this],\n                      dispose: function dispose() {}\n                    };\n                    hoverOptions = {\n                      text: localize('iconLabel.loading', \"Loading...\"),\n                      target: target,\n                      anchorPosition: 0\n                      /* BELOW */\n\n                    };\n                    IconLabel.adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering);\n                    _context3.next = 7;\n                    return tooltip(tokenSource.token);\n\n                  case 7:\n                    resolvedTooltip = _context3.sent;\n\n                    if (resolvedTooltip) {\n                      hoverOptions = {\n                        text: resolvedTooltip,\n                        target: target,\n                        anchorPosition: 0\n                        /* BELOW */\n\n                      };\n                    }\n\n                  case 9:\n                    // awaiting the tooltip could take a while. Make sure we're still hovering.\n                    IconLabel.adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering);\n\n                  case 10:\n                    mouseMoveDisposable.dispose();\n\n                  case 11:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3, this);\n          }));\n        }, hoverDelay);\n      }\n\n      var mouseOverDisposable = this._register(domEvent(htmlElement, dom.EventType.MOUSE_OVER, true)(mouseOver.bind(htmlElement)));\n\n      this.customHovers.set(htmlElement, mouseOverDisposable);\n    }\n  }, {\n    key: \"setupNativeHover\",\n    value: function setupNativeHover(htmlElement, tooltip) {\n      var stringTooltip = '';\n\n      if (isString(tooltip)) {\n        stringTooltip = tooltip;\n      } else if (tooltip === null || tooltip === void 0 ? void 0 : tooltip.markdownNotSupportedFallback) {\n        stringTooltip = tooltip.markdownNotSupportedFallback;\n      }\n\n      htmlElement.title = stringTooltip;\n    }\n  }], [{\n    key: \"adjustXAndShowCustomHover\",\n    value: function adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering) {\n      if (hoverOptions && isHovering) {\n        if (mouseX !== undefined) {\n          hoverOptions.target.x = mouseX + 10;\n        }\n\n        hoverDelegate.showHover(hoverOptions);\n      }\n    }\n  }]);\n\n  return IconLabel;\n}(Disposable);\n\nvar Label = /*#__PURE__*/function () {\n  function Label(container) {\n    _classCallCheck(this, Label);\n\n    this.container = container;\n    this.label = undefined;\n    this.singleLabel = undefined;\n  }\n\n  _createClass(Label, [{\n    key: \"setLabel\",\n    value: function setLabel(label, options) {\n      if (this.label === label && equals(this.options, options)) {\n        return;\n      }\n\n      this.label = label;\n      this.options = options;\n\n      if (typeof label === 'string') {\n        if (!this.singleLabel) {\n          this.container.innerText = '';\n          this.container.classList.remove('multiple');\n          this.singleLabel = dom.append(this.container, dom.$('a.label-name', {\n            id: options === null || options === void 0 ? void 0 : options.domId\n          }));\n        }\n\n        this.singleLabel.textContent = label;\n      } else {\n        this.container.innerText = '';\n        this.container.classList.add('multiple');\n        this.singleLabel = undefined;\n\n        for (var i = 0; i < label.length; i++) {\n          var l = label[i];\n          var id = (options === null || options === void 0 ? void 0 : options.domId) && \"\".concat(options === null || options === void 0 ? void 0 : options.domId, \"_\").concat(i);\n          dom.append(this.container, dom.$('a.label-name', {\n            id: id,\n            'data-icon-label-count': label.length,\n            'data-icon-label-index': i,\n            'role': 'treeitem'\n          }, l));\n\n          if (i < label.length - 1) {\n            dom.append(this.container, dom.$('span.label-separator', undefined, (options === null || options === void 0 ? void 0 : options.separator) || '/'));\n          }\n        }\n      }\n    }\n  }]);\n\n  return Label;\n}();\n\nfunction splitMatches(labels, separator, matches) {\n  if (!matches) {\n    return undefined;\n  }\n\n  var labelStart = 0;\n  return labels.map(function (label) {\n    var labelRange = {\n      start: labelStart,\n      end: labelStart + label.length\n    };\n    var result = matches.map(function (match) {\n      return Range.intersect(labelRange, match);\n    }).filter(function (range) {\n      return !Range.isEmpty(range);\n    }).map(function (_ref) {\n      var start = _ref.start,\n          end = _ref.end;\n      return {\n        start: start - labelStart,\n        end: end - labelStart\n      };\n    });\n    labelStart = labelRange.end + separator.length;\n    return result;\n  });\n}\n\nvar LabelWithHighlights = /*#__PURE__*/function () {\n  function LabelWithHighlights(container, supportIcons) {\n    _classCallCheck(this, LabelWithHighlights);\n\n    this.container = container;\n    this.supportIcons = supportIcons;\n    this.label = undefined;\n    this.singleLabel = undefined;\n  }\n\n  _createClass(LabelWithHighlights, [{\n    key: \"setLabel\",\n    value: function setLabel(label, options) {\n      if (this.label === label && equals(this.options, options)) {\n        return;\n      }\n\n      this.label = label;\n      this.options = options;\n\n      if (typeof label === 'string') {\n        if (!this.singleLabel) {\n          this.container.innerText = '';\n          this.container.classList.remove('multiple');\n          this.singleLabel = new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', {\n            id: options === null || options === void 0 ? void 0 : options.domId\n          })), this.supportIcons);\n        }\n\n        this.singleLabel.set(label, options === null || options === void 0 ? void 0 : options.matches, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n      } else {\n        this.container.innerText = '';\n        this.container.classList.add('multiple');\n        this.singleLabel = undefined;\n        var separator = (options === null || options === void 0 ? void 0 : options.separator) || '/';\n        var matches = splitMatches(label, separator, options === null || options === void 0 ? void 0 : options.matches);\n\n        for (var i = 0; i < label.length; i++) {\n          var l = label[i];\n          var m = matches ? matches[i] : undefined;\n          var id = (options === null || options === void 0 ? void 0 : options.domId) && \"\".concat(options === null || options === void 0 ? void 0 : options.domId, \"_\").concat(i);\n          var name = dom.$('a.label-name', {\n            id: id,\n            'data-icon-label-count': label.length,\n            'data-icon-label-index': i,\n            'role': 'treeitem'\n          });\n          var highlightedLabel = new HighlightedLabel(dom.append(this.container, name), this.supportIcons);\n          highlightedLabel.set(l, m, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n\n          if (i < label.length - 1) {\n            dom.append(name, dom.$('span.label-separator', undefined, separator));\n          }\n        }\n      }\n    }\n  }]);\n\n  return LabelWithHighlights;\n}();","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","HighlightedLabel","Disposable","Range","equals","isMacintosh","isFunction","isString","domEvent","localize","CancellationTokenSource","FastLabelNode","_element","disposed","content","_textContent","textContent","className","_className","empty","_empty","style","marginLeft","IconLabel","container","options","hoverDelegate","undefined","customHovers","Map","domNode","_register","append","$","labelContainer","element","nameContainer","descriptionContainer","supportHighlights","nameNode","LabelWithHighlights","supportIcons","Label","supportDescriptionHighlights","descriptionNodeFactory","label","description","classes","extraClasses","push","italic","strikethrough","join","setupHover","title","setLabel","descriptionNode","set","descriptionMatches","descriptionTitle","htmlElement","tooltip","previousCustomHover","get","dispose","removeAttribute","setupNativeHover","setupCustomHover","markdownTooltip","markdown","setAttribute","getTooltipForCustom","hoverDelay","hoverOptions","mouseX","isHovering","tokenSource","mouseOver","mouseLeaveOrDown","mouseLeaveDisposable","mouseDownDisposable","EventType","MOUSE_LEAVE","bind","MOUSE_DOWN","mouseMove","x","mouseMoveDisposable","MOUSE_MOVE","setTimeout","target","targetElements","text","anchorPosition","adjustXAndShowCustomHover","token","resolvedTooltip","mouseOverDisposable","MOUSE_OVER","stringTooltip","markdownNotSupportedFallback","showHover","singleLabel","innerText","classList","remove","id","domId","add","i","length","l","separator","splitMatches","labels","matches","labelStart","map","labelRange","start","end","match","intersect","filter","range","isEmpty","labelEscapeNewLines","m","name","highlightedLabel"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport './iconlabel.css';\r\nimport * as dom from '../../dom.js';\r\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport { equals } from '../../../common/objects.js';\r\nimport { isMacintosh } from '../../../common/platform.js';\r\nimport { isFunction, isString } from '../../../common/types.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\r\nclass FastLabelNode {\r\n    constructor(_element) {\r\n        this._element = _element;\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    set textContent(content) {\r\n        if (this.disposed || content === this._textContent) {\r\n            return;\r\n        }\r\n        this._textContent = content;\r\n        this._element.textContent = content;\r\n    }\r\n    set className(className) {\r\n        if (this.disposed || className === this._className) {\r\n            return;\r\n        }\r\n        this._className = className;\r\n        this._element.className = className;\r\n    }\r\n    set empty(empty) {\r\n        if (this.disposed || empty === this._empty) {\r\n            return;\r\n        }\r\n        this._empty = empty;\r\n        this._element.style.marginLeft = empty ? '0' : '';\r\n    }\r\n    dispose() {\r\n        this.disposed = true;\r\n    }\r\n}\r\nexport class IconLabel extends Disposable {\r\n    constructor(container, options) {\r\n        super();\r\n        this.hoverDelegate = undefined;\r\n        this.customHovers = new Map();\r\n        this.domNode = this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\r\n        this.labelContainer = dom.append(this.domNode.element, dom.$('.monaco-icon-label-container'));\r\n        const nameContainer = dom.append(this.labelContainer, dom.$('span.monaco-icon-name-container'));\r\n        this.descriptionContainer = this._register(new FastLabelNode(dom.append(this.labelContainer, dom.$('span.monaco-icon-description-container'))));\r\n        if (options === null || options === void 0 ? void 0 : options.supportHighlights) {\r\n            this.nameNode = new LabelWithHighlights(nameContainer, !!options.supportIcons);\r\n        }\r\n        else {\r\n            this.nameNode = new Label(nameContainer);\r\n        }\r\n        if (options === null || options === void 0 ? void 0 : options.supportDescriptionHighlights) {\r\n            this.descriptionNodeFactory = () => new HighlightedLabel(dom.append(this.descriptionContainer.element, dom.$('span.label-description')), !!options.supportIcons);\r\n        }\r\n        else {\r\n            this.descriptionNodeFactory = () => this._register(new FastLabelNode(dom.append(this.descriptionContainer.element, dom.$('span.label-description'))));\r\n        }\r\n        if (options === null || options === void 0 ? void 0 : options.hoverDelegate) {\r\n            this.hoverDelegate = options.hoverDelegate;\r\n        }\r\n    }\r\n    setLabel(label, description, options) {\r\n        const classes = ['monaco-icon-label'];\r\n        if (options) {\r\n            if (options.extraClasses) {\r\n                classes.push(...options.extraClasses);\r\n            }\r\n            if (options.italic) {\r\n                classes.push('italic');\r\n            }\r\n            if (options.strikethrough) {\r\n                classes.push('strikethrough');\r\n            }\r\n        }\r\n        this.domNode.className = classes.join(' ');\r\n        this.setupHover(this.labelContainer, options === null || options === void 0 ? void 0 : options.title);\r\n        this.nameNode.setLabel(label, options);\r\n        if (description || this.descriptionNode) {\r\n            if (!this.descriptionNode) {\r\n                this.descriptionNode = this.descriptionNodeFactory(); // description node is created lazily on demand\r\n            }\r\n            if (this.descriptionNode instanceof HighlightedLabel) {\r\n                this.descriptionNode.set(description || '', options ? options.descriptionMatches : undefined);\r\n                this.setupHover(this.descriptionNode.element, options === null || options === void 0 ? void 0 : options.descriptionTitle);\r\n            }\r\n            else {\r\n                this.descriptionNode.textContent = description || '';\r\n                this.setupHover(this.descriptionNode.element, (options === null || options === void 0 ? void 0 : options.descriptionTitle) || '');\r\n                this.descriptionNode.empty = !description;\r\n            }\r\n        }\r\n    }\r\n    setupHover(htmlElement, tooltip) {\r\n        const previousCustomHover = this.customHovers.get(htmlElement);\r\n        if (previousCustomHover) {\r\n            previousCustomHover.dispose();\r\n            this.customHovers.delete(htmlElement);\r\n        }\r\n        if (!tooltip) {\r\n            htmlElement.removeAttribute('title');\r\n            return;\r\n        }\r\n        if (!this.hoverDelegate) {\r\n            return this.setupNativeHover(htmlElement, tooltip);\r\n        }\r\n        else {\r\n            return this.setupCustomHover(this.hoverDelegate, htmlElement, tooltip);\r\n        }\r\n    }\r\n    static adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering) {\r\n        if (hoverOptions && isHovering) {\r\n            if (mouseX !== undefined) {\r\n                hoverOptions.target.x = mouseX + 10;\r\n            }\r\n            hoverDelegate.showHover(hoverOptions);\r\n        }\r\n    }\r\n    getTooltipForCustom(markdownTooltip) {\r\n        if (isString(markdownTooltip)) {\r\n            return () => __awaiter(this, void 0, void 0, function* () { return markdownTooltip; });\r\n        }\r\n        else if (isFunction(markdownTooltip.markdown)) {\r\n            return markdownTooltip.markdown;\r\n        }\r\n        else {\r\n            const markdown = markdownTooltip.markdown;\r\n            return () => __awaiter(this, void 0, void 0, function* () { return markdown; });\r\n        }\r\n    }\r\n    setupCustomHover(hoverDelegate, htmlElement, markdownTooltip) {\r\n        htmlElement.setAttribute('title', '');\r\n        htmlElement.removeAttribute('title');\r\n        let tooltip = this.getTooltipForCustom(markdownTooltip);\r\n        // Testing has indicated that on Windows and Linux 500 ms matches the native hovers most closely.\r\n        // On Mac, the delay is 1500.\r\n        const hoverDelay = isMacintosh ? 1500 : 500;\r\n        let hoverOptions;\r\n        let mouseX;\r\n        let isHovering = false;\r\n        let tokenSource;\r\n        function mouseOver(e) {\r\n            if (isHovering) {\r\n                return;\r\n            }\r\n            tokenSource = new CancellationTokenSource();\r\n            function mouseLeaveOrDown(e) {\r\n                isHovering = false;\r\n                hoverOptions = undefined;\r\n                tokenSource.dispose(true);\r\n                mouseLeaveDisposable.dispose();\r\n                mouseDownDisposable.dispose();\r\n            }\r\n            const mouseLeaveDisposable = domEvent(htmlElement, dom.EventType.MOUSE_LEAVE, true)(mouseLeaveOrDown.bind(htmlElement));\r\n            const mouseDownDisposable = domEvent(htmlElement, dom.EventType.MOUSE_DOWN, true)(mouseLeaveOrDown.bind(htmlElement));\r\n            isHovering = true;\r\n            function mouseMove(e) {\r\n                mouseX = e.x;\r\n            }\r\n            const mouseMoveDisposable = domEvent(htmlElement, dom.EventType.MOUSE_MOVE, true)(mouseMove.bind(htmlElement));\r\n            setTimeout(() => __awaiter(this, void 0, void 0, function* () {\r\n                if (isHovering && tooltip) {\r\n                    // Re-use the already computed hover options if they exist.\r\n                    if (!hoverOptions) {\r\n                        const target = {\r\n                            targetElements: [this],\r\n                            dispose: () => { }\r\n                        };\r\n                        hoverOptions = {\r\n                            text: localize('iconLabel.loading', \"Loading...\"),\r\n                            target,\r\n                            anchorPosition: 0 /* BELOW */\r\n                        };\r\n                        IconLabel.adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering);\r\n                        const resolvedTooltip = yield tooltip(tokenSource.token);\r\n                        if (resolvedTooltip) {\r\n                            hoverOptions = {\r\n                                text: resolvedTooltip,\r\n                                target,\r\n                                anchorPosition: 0 /* BELOW */\r\n                            };\r\n                        }\r\n                    }\r\n                    // awaiting the tooltip could take a while. Make sure we're still hovering.\r\n                    IconLabel.adjustXAndShowCustomHover(hoverOptions, mouseX, hoverDelegate, isHovering);\r\n                }\r\n                mouseMoveDisposable.dispose();\r\n            }), hoverDelay);\r\n        }\r\n        const mouseOverDisposable = this._register(domEvent(htmlElement, dom.EventType.MOUSE_OVER, true)(mouseOver.bind(htmlElement)));\r\n        this.customHovers.set(htmlElement, mouseOverDisposable);\r\n    }\r\n    setupNativeHover(htmlElement, tooltip) {\r\n        let stringTooltip = '';\r\n        if (isString(tooltip)) {\r\n            stringTooltip = tooltip;\r\n        }\r\n        else if (tooltip === null || tooltip === void 0 ? void 0 : tooltip.markdownNotSupportedFallback) {\r\n            stringTooltip = tooltip.markdownNotSupportedFallback;\r\n        }\r\n        htmlElement.title = stringTooltip;\r\n    }\r\n}\r\nclass Label {\r\n    constructor(container) {\r\n        this.container = container;\r\n        this.label = undefined;\r\n        this.singleLabel = undefined;\r\n    }\r\n    setLabel(label, options) {\r\n        if (this.label === label && equals(this.options, options)) {\r\n            return;\r\n        }\r\n        this.label = label;\r\n        this.options = options;\r\n        if (typeof label === 'string') {\r\n            if (!this.singleLabel) {\r\n                this.container.innerText = '';\r\n                this.container.classList.remove('multiple');\r\n                this.singleLabel = dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId }));\r\n            }\r\n            this.singleLabel.textContent = label;\r\n        }\r\n        else {\r\n            this.container.innerText = '';\r\n            this.container.classList.add('multiple');\r\n            this.singleLabel = undefined;\r\n            for (let i = 0; i < label.length; i++) {\r\n                const l = label[i];\r\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\r\n                dom.append(this.container, dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' }, l));\r\n                if (i < label.length - 1) {\r\n                    dom.append(this.container, dom.$('span.label-separator', undefined, (options === null || options === void 0 ? void 0 : options.separator) || '/'));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction splitMatches(labels, separator, matches) {\r\n    if (!matches) {\r\n        return undefined;\r\n    }\r\n    let labelStart = 0;\r\n    return labels.map(label => {\r\n        const labelRange = { start: labelStart, end: labelStart + label.length };\r\n        const result = matches\r\n            .map(match => Range.intersect(labelRange, match))\r\n            .filter(range => !Range.isEmpty(range))\r\n            .map(({ start, end }) => ({ start: start - labelStart, end: end - labelStart }));\r\n        labelStart = labelRange.end + separator.length;\r\n        return result;\r\n    });\r\n}\r\nclass LabelWithHighlights {\r\n    constructor(container, supportIcons) {\r\n        this.container = container;\r\n        this.supportIcons = supportIcons;\r\n        this.label = undefined;\r\n        this.singleLabel = undefined;\r\n    }\r\n    setLabel(label, options) {\r\n        if (this.label === label && equals(this.options, options)) {\r\n            return;\r\n        }\r\n        this.label = label;\r\n        this.options = options;\r\n        if (typeof label === 'string') {\r\n            if (!this.singleLabel) {\r\n                this.container.innerText = '';\r\n                this.container.classList.remove('multiple');\r\n                this.singleLabel = new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId })), this.supportIcons);\r\n            }\r\n            this.singleLabel.set(label, options === null || options === void 0 ? void 0 : options.matches, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\r\n        }\r\n        else {\r\n            this.container.innerText = '';\r\n            this.container.classList.add('multiple');\r\n            this.singleLabel = undefined;\r\n            const separator = (options === null || options === void 0 ? void 0 : options.separator) || '/';\r\n            const matches = splitMatches(label, separator, options === null || options === void 0 ? void 0 : options.matches);\r\n            for (let i = 0; i < label.length; i++) {\r\n                const l = label[i];\r\n                const m = matches ? matches[i] : undefined;\r\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\r\n                const name = dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' });\r\n                const highlightedLabel = new HighlightedLabel(dom.append(this.container, name), this.supportIcons);\r\n                highlightedLabel.set(l, m, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\r\n                if (i < label.length - 1) {\r\n                    dom.append(name, dom.$('span.label-separator', undefined, separator));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}