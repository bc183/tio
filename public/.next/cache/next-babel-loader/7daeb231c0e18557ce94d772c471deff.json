{"ast":null,"code":"import _slicedToArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _toConsumableArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { ThemeIcon } from '../../theme/common/themeService.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { CSSIcon } from '../../../base/common/codicons.js';\nexport function isIMenuItem(item) {\n  return item.command !== undefined;\n}\nexport var MenuId = function MenuId(debugName) {\n  _classCallCheck(this, MenuId);\n\n  this.id = MenuId._idPool++;\n  this._debugName = debugName;\n};\nMenuId._idPool = 0;\nMenuId.CommandPalette = new MenuId('CommandPalette');\nMenuId.EditorContext = new MenuId('EditorContext');\nMenuId.EditorContextPeek = new MenuId('EditorContextPeek');\nMenuId.MenubarEditMenu = new MenuId('MenubarEditMenu');\nMenuId.MenubarGoMenu = new MenuId('MenubarGoMenu');\nMenuId.MenubarSelectionMenu = new MenuId('MenubarSelectionMenu');\nexport var IMenuService = createDecorator('menuService');\nexport var MenuRegistry = new ( /*#__PURE__*/function () {\n  function _class() {\n    _classCallCheck(this, _class);\n\n    this._commands = new Map();\n    this._menuItems = new Map();\n    this._onDidChangeMenu = new Emitter();\n    this.onDidChangeMenu = this._onDidChangeMenu.event;\n    this._commandPaletteChangeEvent = {\n      has: function has(id) {\n        return id === MenuId.CommandPalette;\n      }\n    };\n  }\n\n  _createClass(_class, [{\n    key: \"addCommand\",\n    value: function addCommand(command) {\n      return this.addCommands(Iterable.single(command));\n    }\n  }, {\n    key: \"addCommands\",\n    value: function addCommands(commands) {\n      var _this = this;\n\n      var _iterator = _createForOfIteratorHelper(commands),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var command = _step.value;\n\n          this._commands.set(command.id, command);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this._onDidChangeMenu.fire(this._commandPaletteChangeEvent);\n\n      return toDisposable(function () {\n        var didChange = false;\n\n        var _iterator2 = _createForOfIteratorHelper(commands),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var command = _step2.value;\n            didChange = _this._commands[\"delete\"](command.id) || didChange;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        if (didChange) {\n          _this._onDidChangeMenu.fire(_this._commandPaletteChangeEvent);\n        }\n      });\n    }\n  }, {\n    key: \"getCommand\",\n    value: function getCommand(id) {\n      return this._commands.get(id);\n    }\n  }, {\n    key: \"getCommands\",\n    value: function getCommands() {\n      var map = new Map();\n\n      this._commands.forEach(function (value, key) {\n        return map.set(key, value);\n      });\n\n      return map;\n    }\n  }, {\n    key: \"appendMenuItem\",\n    value: function appendMenuItem(id, item) {\n      return this.appendMenuItems(Iterable.single({\n        id: id,\n        item: item\n      }));\n    }\n  }, {\n    key: \"appendMenuItems\",\n    value: function appendMenuItems(items) {\n      var _this2 = this;\n\n      var changedIds = new Set();\n      var toRemove = new LinkedList();\n\n      var _iterator3 = _createForOfIteratorHelper(items),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _step3$value = _step3.value,\n              id = _step3$value.id,\n              item = _step3$value.item;\n\n          var list = this._menuItems.get(id);\n\n          if (!list) {\n            list = new LinkedList();\n\n            this._menuItems.set(id, list);\n          }\n\n          toRemove.push(list.push(item));\n          changedIds.add(id);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this._onDidChangeMenu.fire(changedIds);\n\n      return toDisposable(function () {\n        if (toRemove.size > 0) {\n          var _iterator4 = _createForOfIteratorHelper(toRemove),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var fn = _step4.value;\n              fn();\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          _this2._onDidChangeMenu.fire(changedIds);\n\n          toRemove.clear();\n        }\n      });\n    }\n  }, {\n    key: \"getMenuItems\",\n    value: function getMenuItems(id) {\n      var result;\n\n      if (this._menuItems.has(id)) {\n        result = _toConsumableArray(this._menuItems.get(id));\n      } else {\n        result = [];\n      }\n\n      if (id === MenuId.CommandPalette) {\n        // CommandPalette is special because it shows\n        // all commands by default\n        this._appendImplicitItems(result);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_appendImplicitItems\",\n    value: function _appendImplicitItems(result) {\n      var set = new Set();\n\n      var _iterator5 = _createForOfIteratorHelper(result),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var item = _step5.value;\n\n          if (isIMenuItem(item)) {\n            set.add(item.command.id);\n\n            if (item.alt) {\n              set.add(item.alt.id);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      this._commands.forEach(function (command, id) {\n        if (!set.has(id)) {\n          result.push({\n            command: command\n          });\n        }\n      });\n    }\n  }]);\n\n  return _class;\n}())();\nexport var SubmenuItemAction = /*#__PURE__*/function (_SubmenuAction) {\n  _inherits(SubmenuItemAction, _SubmenuAction);\n\n  var _super = _createSuper(SubmenuItemAction);\n\n  function SubmenuItemAction(item, menuService, contextKeyService, options) {\n    var _this3;\n\n    _classCallCheck(this, SubmenuItemAction);\n\n    var result = [];\n    var menu = menuService.createMenu(item.submenu, contextKeyService);\n    var groups = menu.getActions(options);\n    menu.dispose();\n\n    var _iterator6 = _createForOfIteratorHelper(groups),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var group = _step6.value;\n\n        var _group = _slicedToArray(group, 2),\n            actions = _group[1];\n\n        if (actions.length > 0) {\n          result.push.apply(result, _toConsumableArray(actions));\n          result.push(new Separator());\n        }\n      }\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    if (result.length) {\n      result.pop(); // remove last separator\n    }\n\n    _this3 = _super.call(this, \"submenuitem.\".concat(item.submenu.id), typeof item.title === 'string' ? item.title : item.title.value, result, 'submenu');\n    _this3.item = item;\n    return _this3;\n  }\n\n  return SubmenuItemAction;\n}(SubmenuAction); // implements IAction, does NOT extend Action, so that no one\n// subscribes to events of Action or modified properties\n\nvar MenuItemAction = /*#__PURE__*/function () {\n  function MenuItemAction(item, alt, options, contextKeyService, _commandService) {\n    _classCallCheck(this, MenuItemAction);\n\n    var _a;\n\n    this._commandService = _commandService;\n    this.id = item.id;\n    this.label = typeof item.title === 'string' ? item.title : item.title.value;\n    this.tooltip = (_a = item.tooltip) !== null && _a !== void 0 ? _a : '';\n    this.enabled = !item.precondition || contextKeyService.contextMatchesRules(item.precondition);\n    this.checked = false;\n\n    if (item.toggled) {\n      var toggled = item.toggled.condition ? item.toggled : {\n        condition: item.toggled\n      };\n      this.checked = contextKeyService.contextMatchesRules(toggled.condition);\n\n      if (this.checked && toggled.tooltip) {\n        this.tooltip = typeof toggled.tooltip === 'string' ? toggled.tooltip : toggled.tooltip.value;\n      }\n    }\n\n    this.item = item;\n    this.alt = alt ? new MenuItemAction(alt, undefined, options, contextKeyService, _commandService) : undefined;\n    this._options = options;\n\n    if (ThemeIcon.isThemeIcon(item.icon)) {\n      this[\"class\"] = CSSIcon.asClassName(item.icon);\n    }\n  }\n\n  _createClass(MenuItemAction, [{\n    key: \"dispose\",\n    value: function dispose() {// there is NOTHING to dispose and the MenuItemAction should\n      // never have anything to dispose as it is a convenience type\n      // to bridge into the rendering world.\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this$_commandService;\n\n      var _a, _b;\n\n      var runArgs = [];\n\n      if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.arg) {\n        runArgs = [].concat(_toConsumableArray(runArgs), [this._options.arg]);\n      }\n\n      if ((_b = this._options) === null || _b === void 0 ? void 0 : _b.shouldForwardArgs) {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        runArgs = [].concat(_toConsumableArray(runArgs), args);\n      }\n\n      return (_this$_commandService = this._commandService).executeCommand.apply(_this$_commandService, [this.id].concat(_toConsumableArray(runArgs)));\n    }\n  }]);\n\n  return MenuItemAction;\n}();\n\nMenuItemAction = __decorate([__param(3, IContextKeyService), __param(4, ICommandService)], MenuItemAction);\nexport { MenuItemAction }; //#endregion","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/platform/actions/common/actions.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","Separator","SubmenuAction","createDecorator","IContextKeyService","ICommandService","toDisposable","Emitter","ThemeIcon","Iterable","LinkedList","CSSIcon","isIMenuItem","item","command","undefined","MenuId","debugName","id","_idPool","_debugName","CommandPalette","EditorContext","EditorContextPeek","MenubarEditMenu","MenubarGoMenu","MenubarSelectionMenu","IMenuService","MenuRegistry","_commands","Map","_menuItems","_onDidChangeMenu","onDidChangeMenu","event","_commandPaletteChangeEvent","has","addCommands","single","commands","set","fire","didChange","get","map","forEach","value","appendMenuItems","items","changedIds","Set","toRemove","list","push","add","size","fn","clear","result","_appendImplicitItems","alt","SubmenuItemAction","menuService","contextKeyService","options","menu","createMenu","submenu","groups","getActions","dispose","group","actions","pop","title","MenuItemAction","_commandService","_a","label","tooltip","enabled","precondition","contextMatchesRules","checked","toggled","condition","_options","isThemeIcon","icon","asClassName","_b","runArgs","arg","shouldForwardArgs","args","executeCommand"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Separator, SubmenuAction } from '../../../base/common/actions.js';\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { ICommandService } from '../../commands/common/commands.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { ThemeIcon } from '../../theme/common/themeService.js';\r\nimport { Iterable } from '../../../base/common/iterator.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { CSSIcon } from '../../../base/common/codicons.js';\r\nexport function isIMenuItem(item) {\r\n    return item.command !== undefined;\r\n}\r\nexport class MenuId {\r\n    constructor(debugName) {\r\n        this.id = MenuId._idPool++;\r\n        this._debugName = debugName;\r\n    }\r\n}\r\nMenuId._idPool = 0;\r\nMenuId.CommandPalette = new MenuId('CommandPalette');\r\nMenuId.EditorContext = new MenuId('EditorContext');\r\nMenuId.EditorContextPeek = new MenuId('EditorContextPeek');\r\nMenuId.MenubarEditMenu = new MenuId('MenubarEditMenu');\r\nMenuId.MenubarGoMenu = new MenuId('MenubarGoMenu');\r\nMenuId.MenubarSelectionMenu = new MenuId('MenubarSelectionMenu');\r\nexport const IMenuService = createDecorator('menuService');\r\nexport const MenuRegistry = new class {\r\n    constructor() {\r\n        this._commands = new Map();\r\n        this._menuItems = new Map();\r\n        this._onDidChangeMenu = new Emitter();\r\n        this.onDidChangeMenu = this._onDidChangeMenu.event;\r\n        this._commandPaletteChangeEvent = {\r\n            has: id => id === MenuId.CommandPalette\r\n        };\r\n    }\r\n    addCommand(command) {\r\n        return this.addCommands(Iterable.single(command));\r\n    }\r\n    addCommands(commands) {\r\n        for (const command of commands) {\r\n            this._commands.set(command.id, command);\r\n        }\r\n        this._onDidChangeMenu.fire(this._commandPaletteChangeEvent);\r\n        return toDisposable(() => {\r\n            let didChange = false;\r\n            for (const command of commands) {\r\n                didChange = this._commands.delete(command.id) || didChange;\r\n            }\r\n            if (didChange) {\r\n                this._onDidChangeMenu.fire(this._commandPaletteChangeEvent);\r\n            }\r\n        });\r\n    }\r\n    getCommand(id) {\r\n        return this._commands.get(id);\r\n    }\r\n    getCommands() {\r\n        const map = new Map();\r\n        this._commands.forEach((value, key) => map.set(key, value));\r\n        return map;\r\n    }\r\n    appendMenuItem(id, item) {\r\n        return this.appendMenuItems(Iterable.single({ id, item }));\r\n    }\r\n    appendMenuItems(items) {\r\n        const changedIds = new Set();\r\n        const toRemove = new LinkedList();\r\n        for (const { id, item } of items) {\r\n            let list = this._menuItems.get(id);\r\n            if (!list) {\r\n                list = new LinkedList();\r\n                this._menuItems.set(id, list);\r\n            }\r\n            toRemove.push(list.push(item));\r\n            changedIds.add(id);\r\n        }\r\n        this._onDidChangeMenu.fire(changedIds);\r\n        return toDisposable(() => {\r\n            if (toRemove.size > 0) {\r\n                for (let fn of toRemove) {\r\n                    fn();\r\n                }\r\n                this._onDidChangeMenu.fire(changedIds);\r\n                toRemove.clear();\r\n            }\r\n        });\r\n    }\r\n    getMenuItems(id) {\r\n        let result;\r\n        if (this._menuItems.has(id)) {\r\n            result = [...this._menuItems.get(id)];\r\n        }\r\n        else {\r\n            result = [];\r\n        }\r\n        if (id === MenuId.CommandPalette) {\r\n            // CommandPalette is special because it shows\r\n            // all commands by default\r\n            this._appendImplicitItems(result);\r\n        }\r\n        return result;\r\n    }\r\n    _appendImplicitItems(result) {\r\n        const set = new Set();\r\n        for (const item of result) {\r\n            if (isIMenuItem(item)) {\r\n                set.add(item.command.id);\r\n                if (item.alt) {\r\n                    set.add(item.alt.id);\r\n                }\r\n            }\r\n        }\r\n        this._commands.forEach((command, id) => {\r\n            if (!set.has(id)) {\r\n                result.push({ command });\r\n            }\r\n        });\r\n    }\r\n};\r\nexport class SubmenuItemAction extends SubmenuAction {\r\n    constructor(item, menuService, contextKeyService, options) {\r\n        const result = [];\r\n        const menu = menuService.createMenu(item.submenu, contextKeyService);\r\n        const groups = menu.getActions(options);\r\n        menu.dispose();\r\n        for (let group of groups) {\r\n            const [, actions] = group;\r\n            if (actions.length > 0) {\r\n                result.push(...actions);\r\n                result.push(new Separator());\r\n            }\r\n        }\r\n        if (result.length) {\r\n            result.pop(); // remove last separator\r\n        }\r\n        super(`submenuitem.${item.submenu.id}`, typeof item.title === 'string' ? item.title : item.title.value, result, 'submenu');\r\n        this.item = item;\r\n    }\r\n}\r\n// implements IAction, does NOT extend Action, so that no one\r\n// subscribes to events of Action or modified properties\r\nlet MenuItemAction = class MenuItemAction {\r\n    constructor(item, alt, options, contextKeyService, _commandService) {\r\n        var _a;\r\n        this._commandService = _commandService;\r\n        this.id = item.id;\r\n        this.label = typeof item.title === 'string' ? item.title : item.title.value;\r\n        this.tooltip = (_a = item.tooltip) !== null && _a !== void 0 ? _a : '';\r\n        this.enabled = !item.precondition || contextKeyService.contextMatchesRules(item.precondition);\r\n        this.checked = false;\r\n        if (item.toggled) {\r\n            const toggled = (item.toggled.condition ? item.toggled : { condition: item.toggled });\r\n            this.checked = contextKeyService.contextMatchesRules(toggled.condition);\r\n            if (this.checked && toggled.tooltip) {\r\n                this.tooltip = typeof toggled.tooltip === 'string' ? toggled.tooltip : toggled.tooltip.value;\r\n            }\r\n        }\r\n        this.item = item;\r\n        this.alt = alt ? new MenuItemAction(alt, undefined, options, contextKeyService, _commandService) : undefined;\r\n        this._options = options;\r\n        if (ThemeIcon.isThemeIcon(item.icon)) {\r\n            this.class = CSSIcon.asClassName(item.icon);\r\n        }\r\n    }\r\n    dispose() {\r\n        // there is NOTHING to dispose and the MenuItemAction should\r\n        // never have anything to dispose as it is a convenience type\r\n        // to bridge into the rendering world.\r\n    }\r\n    run(...args) {\r\n        var _a, _b;\r\n        let runArgs = [];\r\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.arg) {\r\n            runArgs = [...runArgs, this._options.arg];\r\n        }\r\n        if ((_b = this._options) === null || _b === void 0 ? void 0 : _b.shouldForwardArgs) {\r\n            runArgs = [...runArgs, ...args];\r\n        }\r\n        return this._commandService.executeCommand(this.id, ...runArgs);\r\n    }\r\n};\r\nMenuItemAction = __decorate([\r\n    __param(3, IContextKeyService),\r\n    __param(4, ICommandService)\r\n], MenuItemAction);\r\nexport { MenuItemAction };\r\n//#endregion\r\n"]},"metadata":{},"sourceType":"module"}