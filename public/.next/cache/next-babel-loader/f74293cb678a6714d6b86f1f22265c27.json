{"ast":null,"code":"import _toConsumableArray from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bar007/Desktop/projects/tio/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../../nls.js';\nimport * as strings from '../../../common/strings.js';\nimport { SubmenuAction, Separator, EmptySubmenuAction } from '../../../common/actions.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { EventType, EventHelper, removeTabIndexAndUpdateFocus, isAncestor, addDisposableListener, append, $, clearNode, createStyleSheet, isInShadowDOM, getActiveElement, Dimension } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { layout } from '../contextview/contextview.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport { Codicon, registerCodicon } from '../../../common/codicons.js';\nimport { BaseActionViewItem, ActionViewItem } from '../actionbar/actionViewItems.js';\nimport { formatRule } from '../codicons/codiconStyles.js';\nimport { isFirefox } from '../../browser.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nexport var MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport var MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nvar menuSelectionIcon = registerCodicon('menu-selection', Codicon.check);\nvar menuSubmenuIcon = registerCodicon('menu-submenu', Codicon.chevronRight);\nexport var Direction;\n\n(function (Direction) {\n  Direction[Direction[\"Right\"] = 0] = \"Right\";\n  Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\n\nexport var Menu = /*#__PURE__*/function (_ActionBar) {\n  _inherits(Menu, _ActionBar);\n\n  var _super = _createSuper(Menu);\n\n  function Menu(container, actions) {\n    var _this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Menu);\n\n    container.classList.add('monaco-menu-container');\n    container.setAttribute('role', 'presentation');\n    var menuElement = document.createElement('div');\n    menuElement.classList.add('monaco-menu');\n    menuElement.setAttribute('role', 'presentation');\n    _this = _super.call(this, menuElement, {\n      orientation: 2\n      /* VERTICAL */\n      ,\n      actionViewItemProvider: function actionViewItemProvider(action) {\n        return _this.doGetActionViewItem(action, options, parentData);\n      },\n      context: options.context,\n      actionRunner: options.actionRunner,\n      ariaLabel: options.ariaLabel,\n      triggerKeys: {\n        keys: [3\n        /* Enter */\n        ].concat(_toConsumableArray(isMacintosh || isLinux ? [10\n        /* Space */\n        ] : [])),\n        keyDown: true\n      }\n    });\n    _this.menuElement = menuElement;\n\n    _this.actionsList.setAttribute('role', 'menu');\n\n    _this.actionsList.tabIndex = 0;\n    _this.menuDisposables = _this._register(new DisposableStore());\n\n    _this.initializeStyleSheet(container);\n\n    addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n      var event = new StandardKeyboardEvent(e); // Stop tab navigation of menus\n\n      if (event.equals(2\n      /* Tab */\n      )) {\n        e.preventDefault();\n      }\n    });\n\n    if (options.enableMnemonics) {\n      _this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n        var key = e.key.toLocaleLowerCase();\n\n        if (_this.mnemonics.has(key)) {\n          EventHelper.stop(e, true);\n\n          var _actions = _this.mnemonics.get(key);\n\n          if (_actions.length === 1) {\n            if (_actions[0] instanceof SubmenuMenuActionViewItem && _actions[0].container) {\n              _this.focusItemByElement(_actions[0].container);\n            }\n\n            _actions[0].onClick(e);\n          }\n\n          if (_actions.length > 1) {\n            var action = _actions.shift();\n\n            if (action && action.container) {\n              _this.focusItemByElement(action.container);\n\n              _actions.push(action);\n            }\n\n            _this.mnemonics.set(key, _actions);\n          }\n        }\n      }));\n    }\n\n    if (isLinux) {\n      _this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\n        var event = new StandardKeyboardEvent(e);\n\n        if (event.equals(14\n        /* Home */\n        ) || event.equals(11\n        /* PageUp */\n        )) {\n          _this.focusedItem = _this.viewItems.length - 1;\n\n          _this.focusNext();\n\n          EventHelper.stop(e, true);\n        } else if (event.equals(13\n        /* End */\n        ) || event.equals(12\n        /* PageDown */\n        )) {\n          _this.focusedItem = 0;\n\n          _this.focusPrevious();\n\n          EventHelper.stop(e, true);\n        }\n      }));\n    }\n\n    _this._register(addDisposableListener(_this.domNode, EventType.MOUSE_OUT, function (e) {\n      var relatedTarget = e.relatedTarget;\n\n      if (!isAncestor(relatedTarget, _this.domNode)) {\n        _this.focusedItem = undefined;\n\n        _this.updateFocus();\n\n        e.stopPropagation();\n      }\n    }));\n\n    _this._register(addDisposableListener(_this.actionsList, EventType.MOUSE_OVER, function (e) {\n      var target = e.target;\n\n      if (!target || !isAncestor(target, _this.actionsList) || target === _this.actionsList) {\n        return;\n      }\n\n      while (target.parentElement !== _this.actionsList && target.parentElement !== null) {\n        target = target.parentElement;\n      }\n\n      if (target.classList.contains('action-item')) {\n        var lastFocusedItem = _this.focusedItem;\n\n        _this.setFocusedItem(target);\n\n        if (lastFocusedItem !== _this.focusedItem) {\n          _this.updateFocus();\n        }\n      }\n    }));\n\n    var parentData = {\n      parent: _assertThisInitialized(_this)\n    };\n    _this.mnemonics = new Map(); // Scroll Logic\n\n    _this.scrollableElement = _this._register(new DomScrollableElement(menuElement, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: 2\n      /* Hidden */\n      ,\n      vertical: 3\n      /* Visible */\n      ,\n      verticalScrollbarSize: 7,\n      handleMouseWheel: true,\n      useShadows: true\n    }));\n\n    var scrollElement = _this.scrollableElement.getDomNode();\n\n    scrollElement.style.position = '';\n\n    _this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, function (e) {\n      // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n      // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n      e.preventDefault();\n    }));\n\n    menuElement.style.maxHeight = \"\".concat(Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35), \"px\");\n    actions = actions.filter(function (a) {\n      var _a;\n\n      if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n        console.warn(\"Found submenu cycle: \".concat(a.id));\n        return false;\n      }\n\n      return true;\n    });\n\n    _this.push(actions, {\n      icon: true,\n      label: true,\n      isMenu: true\n    });\n\n    container.appendChild(_this.scrollableElement.getDomNode());\n\n    _this.scrollableElement.scanDomNode();\n\n    _this.viewItems.filter(function (item) {\n      return !(item instanceof MenuSeparatorActionViewItem);\n    }).forEach(function (item, index, array) {\n      item.updatePositionInSet(index + 1, array.length);\n    });\n\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: \"initializeStyleSheet\",\n    value: function initializeStyleSheet(container) {\n      if (isInShadowDOM(container)) {\n        this.styleSheet = createStyleSheet(container);\n        this.styleSheet.textContent = MENU_WIDGET_CSS;\n      } else {\n        if (!Menu.globalStyleSheet) {\n          Menu.globalStyleSheet = createStyleSheet();\n          Menu.globalStyleSheet.textContent = MENU_WIDGET_CSS;\n        }\n\n        this.styleSheet = Menu.globalStyleSheet;\n      }\n    }\n  }, {\n    key: \"style\",\n    value: function style(_style) {\n      var container = this.getContainer();\n      var fgColor = _style.foregroundColor ? \"\".concat(_style.foregroundColor) : '';\n      var bgColor = _style.backgroundColor ? \"\".concat(_style.backgroundColor) : '';\n      var border = _style.borderColor ? \"1px solid \".concat(_style.borderColor) : '';\n      var shadow = _style.shadowColor ? \"0 2px 4px \".concat(_style.shadowColor) : '';\n      container.style.border = border;\n      this.domNode.style.color = fgColor;\n      this.domNode.style.backgroundColor = bgColor;\n      container.style.boxShadow = shadow;\n\n      if (this.viewItems) {\n        this.viewItems.forEach(function (item) {\n          if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\n            item.style(_style);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.scrollableElement.getDomNode();\n    }\n  }, {\n    key: \"focusItemByElement\",\n    value: function focusItemByElement(element) {\n      var lastFocusedItem = this.focusedItem;\n      this.setFocusedItem(element);\n\n      if (lastFocusedItem !== this.focusedItem) {\n        this.updateFocus();\n      }\n    }\n  }, {\n    key: \"setFocusedItem\",\n    value: function setFocusedItem(element) {\n      for (var i = 0; i < this.actionsList.children.length; i++) {\n        var elem = this.actionsList.children[i];\n\n        if (element === elem) {\n          this.focusedItem = i;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"updateFocus\",\n    value: function updateFocus(fromRight) {\n      _get(_getPrototypeOf(Menu.prototype), \"updateFocus\", this).call(this, fromRight, true);\n\n      if (typeof this.focusedItem !== 'undefined') {\n        // Workaround for #80047 caused by an issue in chromium\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n        // When that's fixed, just call this.scrollableElement.scanDomNode()\n        this.scrollableElement.setScrollPosition({\n          scrollTop: Math.round(this.menuElement.scrollTop)\n        });\n      }\n    }\n  }, {\n    key: \"doGetActionViewItem\",\n    value: function doGetActionViewItem(action, options, parentData) {\n      if (action instanceof Separator) {\n        return new MenuSeparatorActionViewItem(options.context, action, {\n          icon: true\n        });\n      } else if (action instanceof SubmenuAction) {\n        var menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), {\n          submenuIds: new Set([].concat(_toConsumableArray(options.submenuIds || []), [action.id]))\n        }));\n\n        if (options.enableMnemonics) {\n          var mnemonic = menuActionViewItem.getMnemonic();\n\n          if (mnemonic && menuActionViewItem.isEnabled()) {\n            var actionViewItems = [];\n\n            if (this.mnemonics.has(mnemonic)) {\n              actionViewItems = this.mnemonics.get(mnemonic);\n            }\n\n            actionViewItems.push(menuActionViewItem);\n            this.mnemonics.set(mnemonic, actionViewItems);\n          }\n        }\n\n        return menuActionViewItem;\n      } else {\n        var menuItemOptions = {\n          enableMnemonics: options.enableMnemonics,\n          useEventAsContext: options.useEventAsContext\n        };\n\n        if (options.getKeyBinding) {\n          var keybinding = options.getKeyBinding(action);\n\n          if (keybinding) {\n            var keybindingLabel = keybinding.getLabel();\n\n            if (keybindingLabel) {\n              menuItemOptions.keybinding = keybindingLabel;\n            }\n          }\n        }\n\n        var _menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\n\n        if (options.enableMnemonics) {\n          var _mnemonic = _menuActionViewItem.getMnemonic();\n\n          if (_mnemonic && _menuActionViewItem.isEnabled()) {\n            var _actionViewItems = [];\n\n            if (this.mnemonics.has(_mnemonic)) {\n              _actionViewItems = this.mnemonics.get(_mnemonic);\n            }\n\n            _actionViewItems.push(_menuActionViewItem);\n\n            this.mnemonics.set(_mnemonic, _actionViewItems);\n          }\n        }\n\n        return _menuActionViewItem;\n      }\n    }\n  }, {\n    key: \"onScroll\",\n    get: function get() {\n      return this.scrollableElement.onScroll;\n    }\n  }]);\n\n  return Menu;\n}(ActionBar);\n\nvar BaseMenuActionViewItem = /*#__PURE__*/function (_BaseActionViewItem) {\n  _inherits(BaseMenuActionViewItem, _BaseActionViewItem);\n\n  var _super2 = _createSuper(BaseMenuActionViewItem);\n\n  function BaseMenuActionViewItem(ctx, action) {\n    var _this2;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, BaseMenuActionViewItem);\n\n    options.isMenu = true;\n    _this2 = _super2.call(this, action, action, options);\n    _this2.options = options;\n    _this2.options.icon = options.icon !== undefined ? options.icon : false;\n    _this2.options.label = options.label !== undefined ? options.label : true;\n    _this2.cssClass = ''; // Set mnemonic\n\n    if (_this2.options.label && options.enableMnemonics) {\n      var label = _this2.getAction().label;\n\n      if (label) {\n        var matches = MENU_MNEMONIC_REGEX.exec(label);\n\n        if (matches) {\n          _this2.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n        }\n      }\n    } // Add mouse up listener later to avoid accidental clicks\n\n\n    _this2.runOnceToEnableMouseUp = new RunOnceScheduler(function () {\n      if (!_this2.element) {\n        return;\n      }\n\n      _this2._register(addDisposableListener(_this2.element, EventType.MOUSE_UP, function (e) {\n        // removed default prevention as it conflicts\n        // with BaseActionViewItem #101537\n        // add back if issues arise and link new issue\n        EventHelper.stop(e, true); // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n        // > Writing to the clipboard\n        // > You can use the \"cut\" and \"copy\" commands without any special\n        // permission if you are using them in a short-lived event handler\n        // for a user action (for example, a click handler).\n        // => to get the Copy and Paste context menu actions working on Firefox,\n        // there should be no timeout here\n\n        if (isFirefox) {\n          var mouseEvent = new StandardMouseEvent(e); // Allowing right click to trigger the event causes the issue described below,\n          // but since the solution below does not work in FF, we must disable right click\n\n          if (mouseEvent.rightButton) {\n            return;\n          }\n\n          _this2.onClick(e);\n        } // In all other cases, set timout to allow context menu cancellation to trigger\n        // otherwise the action will destroy the menu and a second context menu\n        // will still trigger for right click.\n        else {\n            setTimeout(function () {\n              _this2.onClick(e);\n            }, 0);\n          }\n      }));\n\n      _this2._register(addDisposableListener(_this2.element, EventType.CONTEXT_MENU, function (e) {\n        EventHelper.stop(e, true);\n      }));\n    }, 100);\n\n    _this2._register(_this2.runOnceToEnableMouseUp);\n\n    return _this2;\n  }\n\n  _createClass(BaseMenuActionViewItem, [{\n    key: \"render\",\n    value: function render(container) {\n      _get(_getPrototypeOf(BaseMenuActionViewItem.prototype), \"render\", this).call(this, container);\n\n      if (!this.element) {\n        return;\n      }\n\n      this.container = container;\n      this.item = append(this.element, $('a.action-menu-item'));\n\n      if (this._action.id === Separator.ID) {\n        // A separator is a presentation item\n        this.item.setAttribute('role', 'presentation');\n      } else {\n        this.item.setAttribute('role', 'menuitem');\n\n        if (this.mnemonic) {\n          this.item.setAttribute('aria-keyshortcuts', \"\".concat(this.mnemonic));\n        }\n      }\n\n      this.check = append(this.item, $('span.menu-item-check' + menuSelectionIcon.cssSelector));\n      this.check.setAttribute('role', 'none');\n      this.label = append(this.item, $('span.action-label'));\n\n      if (this.options.label && this.options.keybinding) {\n        append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n      } // Adds mouse up listener to actually run the action\n\n\n      this.runOnceToEnableMouseUp.schedule();\n      this.updateClass();\n      this.updateLabel();\n      this.updateTooltip();\n      this.updateEnabled();\n      this.updateChecked();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      _get(_getPrototypeOf(BaseMenuActionViewItem.prototype), \"blur\", this).call(this);\n\n      this.applyStyle();\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      _get(_getPrototypeOf(BaseMenuActionViewItem.prototype), \"focus\", this).call(this);\n\n      if (this.item) {\n        this.item.focus();\n      }\n\n      this.applyStyle();\n    }\n  }, {\n    key: \"updatePositionInSet\",\n    value: function updatePositionInSet(pos, setSize) {\n      if (this.item) {\n        this.item.setAttribute('aria-posinset', \"\".concat(pos));\n        this.item.setAttribute('aria-setsize', \"\".concat(setSize));\n      }\n    }\n  }, {\n    key: \"updateLabel\",\n    value: function updateLabel() {\n      if (!this.label) {\n        return;\n      }\n\n      if (this.options.label) {\n        clearNode(this.label);\n        var label = stripIcons(this.getAction().label);\n\n        if (label) {\n          var cleanLabel = cleanMnemonic(label);\n\n          if (!this.options.enableMnemonics) {\n            label = cleanLabel;\n          }\n\n          this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n          var matches = MENU_MNEMONIC_REGEX.exec(label);\n\n          if (matches) {\n            label = strings.escape(label); // This is global, reset it\n\n            MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n            var escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label); // We can't use negative lookbehind so if we match our negative and skip\n\n            while (escMatch && escMatch[1]) {\n              escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n            }\n\n            var replaceDoubleEscapes = function replaceDoubleEscapes(str) {\n              return str.replace(/&amp;&amp;/g, '&amp;');\n            };\n\n            if (escMatch) {\n              this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', {\n                'aria-hidden': 'true'\n              }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n            } else {\n              this.label.innerText = replaceDoubleEscapes(label).trim();\n            }\n\n            if (this.item) {\n              this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n            }\n          } else {\n            this.label.innerText = label.replace(/&&/g, '&').trim();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateTooltip\",\n    value: function updateTooltip() {\n      var title = null;\n\n      if (this.getAction().tooltip) {\n        title = this.getAction().tooltip;\n      } else if (!this.options.label && this.getAction().label && this.options.icon) {\n        title = this.getAction().label;\n\n        if (this.options.keybinding) {\n          title = nls.localize({\n            key: 'titleLabel',\n            comment: ['action title', 'action keybinding']\n          }, \"{0} ({1})\", title, this.options.keybinding);\n        }\n      }\n\n      if (title && this.item) {\n        this.item.title = title;\n      }\n    }\n  }, {\n    key: \"updateClass\",\n    value: function updateClass() {\n      if (this.cssClass && this.item) {\n        var _this$item$classList;\n\n        (_this$item$classList = this.item.classList).remove.apply(_this$item$classList, _toConsumableArray(this.cssClass.split(' ')));\n      }\n\n      if (this.options.icon && this.label) {\n        this.cssClass = this.getAction()[\"class\"] || '';\n        this.label.classList.add('icon');\n\n        if (this.cssClass) {\n          var _this$label$classList;\n\n          (_this$label$classList = this.label.classList).add.apply(_this$label$classList, _toConsumableArray(this.cssClass.split(' ')));\n        }\n\n        this.updateEnabled();\n      } else if (this.label) {\n        this.label.classList.remove('icon');\n      }\n    }\n  }, {\n    key: \"updateEnabled\",\n    value: function updateEnabled() {\n      if (this.getAction().enabled) {\n        if (this.element) {\n          this.element.classList.remove('disabled');\n        }\n\n        if (this.item) {\n          this.item.classList.remove('disabled');\n          this.item.tabIndex = 0;\n        }\n      } else {\n        if (this.element) {\n          this.element.classList.add('disabled');\n        }\n\n        if (this.item) {\n          this.item.classList.add('disabled');\n          removeTabIndexAndUpdateFocus(this.item);\n        }\n      }\n    }\n  }, {\n    key: \"updateChecked\",\n    value: function updateChecked() {\n      if (!this.item) {\n        return;\n      }\n\n      if (this.getAction().checked) {\n        this.item.classList.add('checked');\n        this.item.setAttribute('role', 'menuitemcheckbox');\n        this.item.setAttribute('aria-checked', 'true');\n      } else {\n        this.item.classList.remove('checked');\n        this.item.setAttribute('role', 'menuitem');\n        this.item.setAttribute('aria-checked', 'false');\n      }\n    }\n  }, {\n    key: \"getMnemonic\",\n    value: function getMnemonic() {\n      return this.mnemonic;\n    }\n  }, {\n    key: \"applyStyle\",\n    value: function applyStyle() {\n      if (!this.menuStyle) {\n        return;\n      }\n\n      var isSelected = this.element && this.element.classList.contains('focused');\n      var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n      var bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n      var border = isSelected && this.menuStyle.selectionBorderColor ? \"thin solid \".concat(this.menuStyle.selectionBorderColor) : '';\n\n      if (this.item) {\n        this.item.style.color = fgColor ? fgColor.toString() : '';\n        this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\n      }\n\n      if (this.check) {\n        this.check.style.color = fgColor ? fgColor.toString() : '';\n      }\n\n      if (this.container) {\n        this.container.style.border = border;\n      }\n    }\n  }, {\n    key: \"style\",\n    value: function style(_style2) {\n      this.menuStyle = _style2;\n      this.applyStyle();\n    }\n  }]);\n\n  return BaseMenuActionViewItem;\n}(BaseActionViewItem);\n\nvar SubmenuMenuActionViewItem = /*#__PURE__*/function (_BaseMenuActionViewIt) {\n  _inherits(SubmenuMenuActionViewItem, _BaseMenuActionViewIt);\n\n  var _super3 = _createSuper(SubmenuMenuActionViewItem);\n\n  function SubmenuMenuActionViewItem(action, submenuActions, parentData, submenuOptions) {\n    var _this3;\n\n    _classCallCheck(this, SubmenuMenuActionViewItem);\n\n    _this3 = _super3.call(this, action, action, submenuOptions);\n    _this3.submenuActions = submenuActions;\n    _this3.parentData = parentData;\n    _this3.submenuOptions = submenuOptions;\n    _this3.mysubmenu = null;\n    _this3.submenuDisposables = _this3._register(new DisposableStore());\n    _this3.mouseOver = false;\n    _this3.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n    _this3.showScheduler = new RunOnceScheduler(function () {\n      if (_this3.mouseOver) {\n        _this3.cleanupExistingSubmenu(false);\n\n        _this3.createSubmenu(false);\n      }\n    }, 250);\n    _this3.hideScheduler = new RunOnceScheduler(function () {\n      if (_this3.element && !isAncestor(getActiveElement(), _this3.element) && _this3.parentData.submenu === _this3.mysubmenu) {\n        _this3.parentData.parent.focus(false);\n\n        _this3.cleanupExistingSubmenu(true);\n      }\n    }, 750);\n    return _this3;\n  }\n\n  _createClass(SubmenuMenuActionViewItem, [{\n    key: \"render\",\n    value: function render(container) {\n      var _this4 = this;\n\n      _get(_getPrototypeOf(SubmenuMenuActionViewItem.prototype), \"render\", this).call(this, container);\n\n      if (!this.element) {\n        return;\n      }\n\n      if (this.item) {\n        this.item.classList.add('monaco-submenu-item');\n        this.item.tabIndex = 0;\n        this.item.setAttribute('aria-haspopup', 'true');\n        this.updateAriaExpanded('false');\n        this.submenuIndicator = append(this.item, $('span.submenu-indicator' + menuSubmenuIcon.cssSelector));\n        this.submenuIndicator.setAttribute('aria-hidden', 'true');\n      }\n\n      this._register(addDisposableListener(this.element, EventType.KEY_UP, function (e) {\n        var event = new StandardKeyboardEvent(e);\n\n        if (event.equals(17\n        /* RightArrow */\n        ) || event.equals(3\n        /* Enter */\n        )) {\n          EventHelper.stop(e, true);\n\n          _this4.createSubmenu(true);\n        }\n      }));\n\n      this._register(addDisposableListener(this.element, EventType.KEY_DOWN, function (e) {\n        var event = new StandardKeyboardEvent(e);\n\n        if (getActiveElement() === _this4.item) {\n          if (event.equals(17\n          /* RightArrow */\n          ) || event.equals(3\n          /* Enter */\n          )) {\n            EventHelper.stop(e, true);\n          }\n        }\n      }));\n\n      this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, function (e) {\n        if (!_this4.mouseOver) {\n          _this4.mouseOver = true;\n\n          _this4.showScheduler.schedule();\n        }\n      }));\n\n      this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, function (e) {\n        _this4.mouseOver = false;\n      }));\n\n      this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, function (e) {\n        if (_this4.element && !isAncestor(getActiveElement(), _this4.element)) {\n          _this4.hideScheduler.schedule();\n        }\n      }));\n\n      this._register(this.parentData.parent.onScroll(function () {\n        _this4.parentData.parent.focus(false);\n\n        _this4.cleanupExistingSubmenu(false);\n      }));\n    }\n  }, {\n    key: \"updateEnabled\",\n    value: function updateEnabled() {// override on submenu entry\n      // native menus do not observe enablement on sumbenus\n      // we mimic that behavior\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      // stop clicking from trying to run an action\n      EventHelper.stop(e, true);\n      this.cleanupExistingSubmenu(false);\n      this.createSubmenu(true);\n    }\n  }, {\n    key: \"cleanupExistingSubmenu\",\n    value: function cleanupExistingSubmenu(force) {\n      if (this.parentData.submenu && (force || this.parentData.submenu !== this.mysubmenu)) {\n        // disposal may throw if the submenu has already been removed\n        try {\n          this.parentData.submenu.dispose();\n        } catch (_a) {}\n\n        this.parentData.submenu = undefined;\n        this.updateAriaExpanded('false');\n\n        if (this.submenuContainer) {\n          this.submenuDisposables.clear();\n          this.submenuContainer = undefined;\n        }\n      }\n    }\n  }, {\n    key: \"calculateSubmenuMenuLayout\",\n    value: function calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n      var ret = {\n        top: 0,\n        left: 0\n      }; // Start with horizontal\n\n      ret.left = layout(windowDimensions.width, submenu.width, {\n        position: expandDirection === Direction.Right ? 0\n        /* Before */\n        : 1\n        /* After */\n        ,\n        offset: entry.left,\n        size: entry.width\n      }); // We don't have enough room to layout the menu fully, so we are overlapping the menu\n\n      if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n        if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n          ret.left = entry.left + 10;\n        }\n\n        entry.top += 10;\n        entry.height = 0;\n      } // Now that we have a horizontal position, try layout vertically\n\n\n      ret.top = layout(windowDimensions.height, submenu.height, {\n        position: 0\n        /* Before */\n        ,\n        offset: entry.top,\n        size: 0\n      }); // We didn't have enough room below, but we did above, so we shift down to align the menu\n\n      if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n        ret.top += entry.height;\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"createSubmenu\",\n    value: function createSubmenu() {\n      var _this5 = this;\n\n      var selectFirstItem = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this.element) {\n        return;\n      }\n\n      if (!this.parentData.submenu) {\n        this.updateAriaExpanded('true');\n        this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n        this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view'); // Set the top value of the menu container before construction\n        // This allows the menu constructor to calculate the proper max height\n\n        var computedStyles = getComputedStyle(this.parentData.parent.domNode);\n        var paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0; // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n\n        this.submenuContainer.style.zIndex = '1';\n        this.submenuContainer.style.position = 'fixed';\n        this.submenuContainer.style.top = '0';\n        this.submenuContainer.style.left = '0';\n        this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions);\n\n        if (this.menuStyle) {\n          this.parentData.submenu.style(this.menuStyle);\n        } // layout submenu\n\n\n        var entryBox = this.element.getBoundingClientRect();\n        var entryBoxUpdated = {\n          top: entryBox.top - paddingTop,\n          left: entryBox.left,\n          height: entryBox.height + 2 * paddingTop,\n          width: entryBox.width\n        };\n        var viewBox = this.submenuContainer.getBoundingClientRect();\n\n        var _this$calculateSubmen = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection),\n            top = _this$calculateSubmen.top,\n            left = _this$calculateSubmen.left;\n\n        this.submenuContainer.style.left = \"\".concat(left, \"px\");\n        this.submenuContainer.style.top = \"\".concat(top, \"px\");\n        this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, function (e) {\n          var event = new StandardKeyboardEvent(e);\n\n          if (event.equals(15\n          /* LeftArrow */\n          )) {\n            EventHelper.stop(e, true);\n\n            _this5.parentData.parent.focus();\n\n            _this5.cleanupExistingSubmenu(true);\n          }\n        }));\n        this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, function (e) {\n          var event = new StandardKeyboardEvent(e);\n\n          if (event.equals(15\n          /* LeftArrow */\n          )) {\n            EventHelper.stop(e, true);\n          }\n        }));\n        this.submenuDisposables.add(this.parentData.submenu.onDidCancel(function () {\n          _this5.parentData.parent.focus();\n\n          _this5.cleanupExistingSubmenu(true);\n        }));\n        this.parentData.submenu.focus(selectFirstItem);\n        this.mysubmenu = this.parentData.submenu;\n      } else {\n        this.parentData.submenu.focus(false);\n      }\n    }\n  }, {\n    key: \"updateAriaExpanded\",\n    value: function updateAriaExpanded(value) {\n      var _a;\n\n      if (this.item) {\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n      }\n    }\n  }, {\n    key: \"applyStyle\",\n    value: function applyStyle() {\n      _get(_getPrototypeOf(SubmenuMenuActionViewItem.prototype), \"applyStyle\", this).call(this);\n\n      if (!this.menuStyle) {\n        return;\n      }\n\n      var isSelected = this.element && this.element.classList.contains('focused');\n      var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n\n      if (this.submenuIndicator) {\n        this.submenuIndicator.style.color = fgColor ? \"\".concat(fgColor) : '';\n      }\n\n      if (this.parentData.submenu) {\n        this.parentData.submenu.style(this.menuStyle);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(SubmenuMenuActionViewItem.prototype), \"dispose\", this).call(this);\n\n      this.hideScheduler.dispose();\n\n      if (this.mysubmenu) {\n        this.mysubmenu.dispose();\n        this.mysubmenu = null;\n      }\n\n      if (this.submenuContainer) {\n        this.submenuContainer = undefined;\n      }\n    }\n  }]);\n\n  return SubmenuMenuActionViewItem;\n}(BaseMenuActionViewItem);\n\nvar MenuSeparatorActionViewItem = /*#__PURE__*/function (_ActionViewItem) {\n  _inherits(MenuSeparatorActionViewItem, _ActionViewItem);\n\n  var _super4 = _createSuper(MenuSeparatorActionViewItem);\n\n  function MenuSeparatorActionViewItem() {\n    _classCallCheck(this, MenuSeparatorActionViewItem);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(MenuSeparatorActionViewItem, [{\n    key: \"style\",\n    value: function style(_style3) {\n      if (this.label) {\n        this.label.style.borderBottomColor = _style3.separatorColor ? \"\".concat(_style3.separatorColor) : '';\n      }\n    }\n  }]);\n\n  return MenuSeparatorActionViewItem;\n}(ActionViewItem);\n\nexport function cleanMnemonic(label) {\n  var regex = MENU_MNEMONIC_REGEX;\n  var matches = regex.exec(label);\n\n  if (!matches) {\n    return label;\n  }\n\n  var mnemonicInText = !matches[1];\n  return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nvar MENU_WIDGET_CSS = \"\\n.monaco-menu {\\n\\tfont-size: 13px;\\n\\n}\\n\\n\".concat(formatRule(menuSelectionIcon), \"\\n\").concat(formatRule(menuSubmenuIcon), \"\\n\\n.monaco-menu .monaco-action-bar {\\n\\ttext-align: right;\\n\\toverflow: hidden;\\n\\twhite-space: nowrap;\\n}\\n\\n.monaco-menu .monaco-action-bar .actions-container {\\n\\tdisplay: flex;\\n\\tmargin: 0 auto;\\n\\tpadding: 0;\\n\\twidth: 100%;\\n\\tjustify-content: flex-end;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .actions-container {\\n\\tdisplay: inline-block;\\n}\\n\\n.monaco-menu .monaco-action-bar.reverse .actions-container {\\n\\tflex-direction: row-reverse;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item {\\n\\tcursor: pointer;\\n\\tdisplay: inline-block;\\n\\ttransition: transform 50ms ease;\\n\\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item.disabled {\\n\\tcursor: default;\\n}\\n\\n.monaco-menu .monaco-action-bar.animated .action-item.active {\\n\\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = \\u221A\\u03C6 */\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item .icon,\\n.monaco-menu .monaco-action-bar .action-item .codicon {\\n\\tdisplay: inline-block;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item .codicon {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-label {\\n\\tfont-size: 11px;\\n\\tmargin-right: 4px;\\n}\\n\\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\\n\\topacity: 0.4;\\n}\\n\\n/* Vertical actions */\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\ttext-align: left;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tdisplay: block;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tdisplay: block;\\n\\tborder-bottom: 1px solid #bbb;\\n\\tpadding-top: 1px;\\n\\tmargin-left: .8em;\\n\\tmargin-right: .8em;\\n}\\n\\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\\n\\tmargin-left: 6px;\\n}\\n\\n/* Action Items */\\n.monaco-menu .monaco-action-bar .action-item.select-container {\\n\\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\\n\\tflex: 1;\\n\\tmax-width: 170px;\\n\\tmin-width: 60px;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tmargin-right: 10px;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\tmargin-left: 0;\\n\\toverflow: visible;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .actions-container {\\n\\tdisplay: block;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tpadding: 0;\\n\\ttransform: none;\\n\\tdisplay: flex;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\\n\\ttransform: none;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\\n\\tflex: 1 1 auto;\\n\\tdisplay: flex;\\n\\theight: 2em;\\n\\talign-items: center;\\n\\tposition: relative;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label {\\n\\tflex: 1 1 auto;\\n\\ttext-decoration: none;\\n\\tpadding: 0 1em;\\n\\tbackground: none;\\n\\tfont-size: 12px;\\n\\tline-height: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .keybinding,\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\tdisplay: inline-block;\\n\\tflex: 2 1 auto;\\n\\tpadding: 0 1em;\\n\\ttext-align: right;\\n\\tfont-size: 12px;\\n\\tline-height: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\theight: 100%;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\\n\\tfont-size: 16px !important;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\\n\\tmargin-left: auto;\\n\\tmargin-right: -20px;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\\n\\topacity: 0.4;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\\n\\tdisplay: inline-block;\\n\\tbox-sizing: border-box;\\n\\tmargin: 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tposition: static;\\n\\toverflow: visible;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\\n\\tposition: absolute;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tpadding: 0.5em 0 0 0;\\n\\tmargin-bottom: 0.5em;\\n\\twidth: 100%;\\n\\theight: 0px !important;\\n\\tmargin-left: .8em !important;\\n\\tmargin-right: .8em !important;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\\n\\tpadding: 0.7em 1em 0.1em 1em;\\n\\tfont-weight: bold;\\n\\topacity: 1;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\\n\\tcolor: inherit;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\\n\\tposition: absolute;\\n\\tvisibility: hidden;\\n\\twidth: 1em;\\n\\theight: 100%;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\\n\\tvisibility: visible;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n}\\n\\n/* Context Menu */\\n\\n.context-view.monaco-menu-container {\\n\\toutline: 0;\\n\\tborder: none;\\n\\tanimation: fadeIn 0.083s linear;\\n\\t-webkit-app-region: no-drag;\\n}\\n\\n.context-view.monaco-menu-container :focus,\\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\\n\\toutline: 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-item {\\n\\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\\n}\\n\\n\\n/* High Contrast Theming */\\n:host-context(.hc-black) .context-view.monaco-menu-container {\\n\\tbox-shadow: none;\\n}\\n\\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\\n\\tbackground: none;\\n}\\n\\n/* Vertical Action Bar Styles */\\n\\n.monaco-menu .monaco-action-bar.vertical {\\n\\tpadding: .5em 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\\n\\theight: 1.8em;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\\n.monaco-menu .monaco-action-bar.vertical .keybinding {\\n\\tfont-size: inherit;\\n\\tpadding: 0 2em;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\\n\\tfont-size: inherit;\\n\\twidth: 2em;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tfont-size: inherit;\\n\\tpadding: 0.2em 0 0 0;\\n\\tmargin-bottom: 0.2em;\\n}\\n\\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\\n\\tmargin-left: 0;\\n\\tmargin-right: 0;\\n}\\n\\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\tfont-size: 60%;\\n\\tpadding: 0 1.8em;\\n}\\n\\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\\n\\theight: 100%;\\n\\tmask-size: 10px 10px;\\n\\t-webkit-mask-size: 10px 10px;\\n}\\n\\n.monaco-menu .action-item {\\n\\tcursor: default;\\n}\\n\\n/* Arrows */\\n.monaco-scrollable-element > .scrollbar > .scra {\\n\\tcursor: pointer;\\n\\tfont-size: 11px !important;\\n}\\n\\n.monaco-scrollable-element > .visible {\\n\\topacity: 1;\\n\\n\\t/* Background rule added for IE9 - to allow clicks on dom node */\\n\\tbackground:rgba(0,0,0,0);\\n\\n\\ttransition: opacity 100ms linear;\\n}\\n.monaco-scrollable-element > .invisible {\\n\\topacity: 0;\\n\\tpointer-events: none;\\n}\\n.monaco-scrollable-element > .invisible.fade {\\n\\ttransition: opacity 800ms linear;\\n}\\n\\n/* Scrollable Content Inset Shadow */\\n.monaco-scrollable-element > .shadow {\\n\\tposition: absolute;\\n\\tdisplay: none;\\n}\\n.monaco-scrollable-element > .shadow.top {\\n\\tdisplay: block;\\n\\ttop: 0;\\n\\tleft: 3px;\\n\\theight: 3px;\\n\\twidth: 100%;\\n\\tbox-shadow: #DDD 0 6px 6px -6px inset;\\n}\\n.monaco-scrollable-element > .shadow.left {\\n\\tdisplay: block;\\n\\ttop: 3px;\\n\\tleft: 0;\\n\\theight: 100%;\\n\\twidth: 3px;\\n\\tbox-shadow: #DDD 6px 0 6px -6px inset;\\n}\\n.monaco-scrollable-element > .shadow.top-left-corner {\\n\\tdisplay: block;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\theight: 3px;\\n\\twidth: 3px;\\n}\\n.monaco-scrollable-element > .shadow.top.left {\\n\\tbox-shadow: #DDD 6px 6px 6px -6px inset;\\n}\\n\\n/* ---------- Default Style ---------- */\\n\\n:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {\\n\\tbackground: rgba(100, 100, 100, .4);\\n}\\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {\\n\\tbackground: rgba(121, 121, 121, .4);\\n}\\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {\\n\\tbackground: rgba(111, 195, 223, .6);\\n}\\n\\n.monaco-scrollable-element > .scrollbar > .slider:hover {\\n\\tbackground: rgba(100, 100, 100, .7);\\n}\\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {\\n\\tbackground: rgba(111, 195, 223, .8);\\n}\\n\\n.monaco-scrollable-element > .scrollbar > .slider.active {\\n\\tbackground: rgba(0, 0, 0, .6);\\n}\\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {\\n\\tbackground: rgba(191, 191, 191, .4);\\n}\\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {\\n\\tbackground: rgba(111, 195, 223, 1);\\n}\\n\\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {\\n\\tbox-shadow: none;\\n}\\n\\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {\\n\\tbox-shadow: #000 6px 0 6px -6px inset;\\n}\\n\\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {\\n\\tbox-shadow: #000 6px 6px 6px -6px inset;\\n}\\n\\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top {\\n\\tbox-shadow: none;\\n}\\n\\n:host-context(.hc-black) .monaco-scrollable-element .shadow.left {\\n\\tbox-shadow: none;\\n}\\n\\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {\\n\\tbox-shadow: none;\\n}\\n\");","map":{"version":3,"sources":["/home/bar007/Desktop/projects/tio/client/node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"names":["nls","strings","SubmenuAction","Separator","EmptySubmenuAction","ActionBar","EventType","EventHelper","removeTabIndexAndUpdateFocus","isAncestor","addDisposableListener","append","$","clearNode","createStyleSheet","isInShadowDOM","getActiveElement","Dimension","StandardKeyboardEvent","RunOnceScheduler","DisposableStore","DomScrollableElement","layout","isLinux","isMacintosh","Codicon","registerCodicon","BaseActionViewItem","ActionViewItem","formatRule","isFirefox","StandardMouseEvent","stripIcons","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","menuSelectionIcon","check","menuSubmenuIcon","chevronRight","Direction","Menu","container","actions","options","classList","add","setAttribute","menuElement","document","createElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaLabel","triggerKeys","keys","keyDown","actionsList","tabIndex","menuDisposables","_register","initializeStyleSheet","KEY_DOWN","e","event","equals","preventDefault","enableMnemonics","key","toLocaleLowerCase","mnemonics","has","stop","get","length","SubmenuMenuActionViewItem","focusItemByElement","onClick","shift","push","set","focusedItem","viewItems","focusNext","focusPrevious","domNode","MOUSE_OUT","relatedTarget","undefined","updateFocus","stopPropagation","MOUSE_OVER","target","parentElement","contains","lastFocusedItem","setFocusedItem","parent","Map","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","verticalScrollbarSize","handleMouseWheel","useShadows","scrollElement","getDomNode","style","position","MOUSE_UP","maxHeight","Math","max","window","innerHeight","getBoundingClientRect","top","filter","a","_a","submenuIds","id","console","warn","icon","label","isMenu","appendChild","scanDomNode","item","MenuSeparatorActionViewItem","forEach","index","array","updatePositionInSet","styleSheet","textContent","MENU_WIDGET_CSS","globalStyleSheet","getContainer","fgColor","foregroundColor","bgColor","backgroundColor","border","borderColor","shadow","shadowColor","color","boxShadow","BaseMenuActionViewItem","element","i","children","elem","fromRight","setScrollPosition","scrollTop","round","menuActionViewItem","Object","assign","Set","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybinding","keybindingLabel","getLabel","onScroll","ctx","cssClass","getAction","matches","exec","runOnceToEnableMouseUp","mouseEvent","rightButton","setTimeout","CONTEXT_MENU","_action","ID","cssSelector","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","focus","pos","setSize","cleanLabel","cleanMnemonic","replace","escape","lastIndex","escMatch","replaceDoubleEscapes","str","ltrim","substr","rtrim","innerText","trim","title","tooltip","localize","comment","remove","split","enabled","checked","menuStyle","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","toString","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","dispose","submenuContainer","clear","windowDimensions","entry","ret","left","width","offset","size","height","selectFirstItem","computedStyles","getComputedStyle","paddingTop","parseFloat","zIndex","entryBox","entryBoxUpdated","viewBox","calculateSubmenuMenuLayout","innerWidth","lift","onDidCancel","value","borderBottomColor","separatorColor","regex","mnemonicInText"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as nls from '../../../../nls.js';\r\nimport * as strings from '../../../common/strings.js';\r\nimport { SubmenuAction, Separator, EmptySubmenuAction } from '../../../common/actions.js';\r\nimport { ActionBar } from '../actionbar/actionbar.js';\r\nimport { EventType, EventHelper, removeTabIndexAndUpdateFocus, isAncestor, addDisposableListener, append, $, clearNode, createStyleSheet, isInShadowDOM, getActiveElement, Dimension } from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { RunOnceScheduler } from '../../../common/async.js';\r\nimport { DisposableStore } from '../../../common/lifecycle.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { layout } from '../contextview/contextview.js';\r\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\r\nimport { Codicon, registerCodicon } from '../../../common/codicons.js';\r\nimport { BaseActionViewItem, ActionViewItem } from '../actionbar/actionViewItems.js';\r\nimport { formatRule } from '../codicons/codiconStyles.js';\r\nimport { isFirefox } from '../../browser.js';\r\nimport { StandardMouseEvent } from '../../mouseEvent.js';\r\nimport { stripIcons } from '../../../common/iconLabels.js';\r\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\r\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\r\nconst menuSelectionIcon = registerCodicon('menu-selection', Codicon.check);\r\nconst menuSubmenuIcon = registerCodicon('menu-submenu', Codicon.chevronRight);\r\nexport var Direction;\r\n(function (Direction) {\r\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\r\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\r\n})(Direction || (Direction = {}));\r\nexport class Menu extends ActionBar {\r\n    constructor(container, actions, options = {}) {\r\n        container.classList.add('monaco-menu-container');\r\n        container.setAttribute('role', 'presentation');\r\n        const menuElement = document.createElement('div');\r\n        menuElement.classList.add('monaco-menu');\r\n        menuElement.setAttribute('role', 'presentation');\r\n        super(menuElement, {\r\n            orientation: 2 /* VERTICAL */,\r\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\r\n            context: options.context,\r\n            actionRunner: options.actionRunner,\r\n            ariaLabel: options.ariaLabel,\r\n            triggerKeys: { keys: [3 /* Enter */, ...(isMacintosh || isLinux ? [10 /* Space */] : [])], keyDown: true }\r\n        });\r\n        this.menuElement = menuElement;\r\n        this.actionsList.setAttribute('role', 'menu');\r\n        this.actionsList.tabIndex = 0;\r\n        this.menuDisposables = this._register(new DisposableStore());\r\n        this.initializeStyleSheet(container);\r\n        addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            // Stop tab navigation of menus\r\n            if (event.equals(2 /* Tab */)) {\r\n                e.preventDefault();\r\n            }\r\n        });\r\n        if (options.enableMnemonics) {\r\n            this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\r\n                const key = e.key.toLocaleLowerCase();\r\n                if (this.mnemonics.has(key)) {\r\n                    EventHelper.stop(e, true);\r\n                    const actions = this.mnemonics.get(key);\r\n                    if (actions.length === 1) {\r\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\r\n                            this.focusItemByElement(actions[0].container);\r\n                        }\r\n                        actions[0].onClick(e);\r\n                    }\r\n                    if (actions.length > 1) {\r\n                        const action = actions.shift();\r\n                        if (action && action.container) {\r\n                            this.focusItemByElement(action.container);\r\n                            actions.push(action);\r\n                        }\r\n                        this.mnemonics.set(key, actions);\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        if (isLinux) {\r\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\r\n                const event = new StandardKeyboardEvent(e);\r\n                if (event.equals(14 /* Home */) || event.equals(11 /* PageUp */)) {\r\n                    this.focusedItem = this.viewItems.length - 1;\r\n                    this.focusNext();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n                else if (event.equals(13 /* End */) || event.equals(12 /* PageDown */)) {\r\n                    this.focusedItem = 0;\r\n                    this.focusPrevious();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n        }\r\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\r\n            let relatedTarget = e.relatedTarget;\r\n            if (!isAncestor(relatedTarget, this.domNode)) {\r\n                this.focusedItem = undefined;\r\n                this.updateFocus();\r\n                e.stopPropagation();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\r\n            let target = e.target;\r\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\r\n                return;\r\n            }\r\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\r\n                target = target.parentElement;\r\n            }\r\n            if (target.classList.contains('action-item')) {\r\n                const lastFocusedItem = this.focusedItem;\r\n                this.setFocusedItem(target);\r\n                if (lastFocusedItem !== this.focusedItem) {\r\n                    this.updateFocus();\r\n                }\r\n            }\r\n        }));\r\n        let parentData = {\r\n            parent: this\r\n        };\r\n        this.mnemonics = new Map();\r\n        // Scroll Logic\r\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: 2 /* Hidden */,\r\n            vertical: 3 /* Visible */,\r\n            verticalScrollbarSize: 7,\r\n            handleMouseWheel: true,\r\n            useShadows: true\r\n        }));\r\n        const scrollElement = this.scrollableElement.getDomNode();\r\n        scrollElement.style.position = '';\r\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\r\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\r\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\r\n            e.preventDefault();\r\n        }));\r\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\r\n        actions = actions.filter(a => {\r\n            var _a;\r\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\r\n                console.warn(`Found submenu cycle: ${a.id}`);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        this.push(actions, { icon: true, label: true, isMenu: true });\r\n        container.appendChild(this.scrollableElement.getDomNode());\r\n        this.scrollableElement.scanDomNode();\r\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\r\n            item.updatePositionInSet(index + 1, array.length);\r\n        });\r\n    }\r\n    initializeStyleSheet(container) {\r\n        if (isInShadowDOM(container)) {\r\n            this.styleSheet = createStyleSheet(container);\r\n            this.styleSheet.textContent = MENU_WIDGET_CSS;\r\n        }\r\n        else {\r\n            if (!Menu.globalStyleSheet) {\r\n                Menu.globalStyleSheet = createStyleSheet();\r\n                Menu.globalStyleSheet.textContent = MENU_WIDGET_CSS;\r\n            }\r\n            this.styleSheet = Menu.globalStyleSheet;\r\n        }\r\n    }\r\n    style(style) {\r\n        const container = this.getContainer();\r\n        const fgColor = style.foregroundColor ? `${style.foregroundColor}` : '';\r\n        const bgColor = style.backgroundColor ? `${style.backgroundColor}` : '';\r\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\r\n        const shadow = style.shadowColor ? `0 2px 4px ${style.shadowColor}` : '';\r\n        container.style.border = border;\r\n        this.domNode.style.color = fgColor;\r\n        this.domNode.style.backgroundColor = bgColor;\r\n        container.style.boxShadow = shadow;\r\n        if (this.viewItems) {\r\n            this.viewItems.forEach(item => {\r\n                if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\r\n                    item.style(style);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getContainer() {\r\n        return this.scrollableElement.getDomNode();\r\n    }\r\n    get onScroll() {\r\n        return this.scrollableElement.onScroll;\r\n    }\r\n    focusItemByElement(element) {\r\n        const lastFocusedItem = this.focusedItem;\r\n        this.setFocusedItem(element);\r\n        if (lastFocusedItem !== this.focusedItem) {\r\n            this.updateFocus();\r\n        }\r\n    }\r\n    setFocusedItem(element) {\r\n        for (let i = 0; i < this.actionsList.children.length; i++) {\r\n            let elem = this.actionsList.children[i];\r\n            if (element === elem) {\r\n                this.focusedItem = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    updateFocus(fromRight) {\r\n        super.updateFocus(fromRight, true);\r\n        if (typeof this.focusedItem !== 'undefined') {\r\n            // Workaround for #80047 caused by an issue in chromium\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\r\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\r\n            this.scrollableElement.setScrollPosition({\r\n                scrollTop: Math.round(this.menuElement.scrollTop)\r\n            });\r\n        }\r\n    }\r\n    doGetActionViewItem(action, options, parentData) {\r\n        if (action instanceof Separator) {\r\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true });\r\n        }\r\n        else if (action instanceof SubmenuAction) {\r\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), { submenuIds: new Set([...(options.submenuIds || []), action.id]) }));\r\n            if (options.enableMnemonics) {\r\n                const mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    let actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n        else {\r\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\r\n            if (options.getKeyBinding) {\r\n                const keybinding = options.getKeyBinding(action);\r\n                if (keybinding) {\r\n                    const keybindingLabel = keybinding.getLabel();\r\n                    if (keybindingLabel) {\r\n                        menuItemOptions.keybinding = keybindingLabel;\r\n                    }\r\n                }\r\n            }\r\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\r\n            if (options.enableMnemonics) {\r\n                const mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    let actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n    }\r\n}\r\nclass BaseMenuActionViewItem extends BaseActionViewItem {\r\n    constructor(ctx, action, options = {}) {\r\n        options.isMenu = true;\r\n        super(action, action, options);\r\n        this.options = options;\r\n        this.options.icon = options.icon !== undefined ? options.icon : false;\r\n        this.options.label = options.label !== undefined ? options.label : true;\r\n        this.cssClass = '';\r\n        // Set mnemonic\r\n        if (this.options.label && options.enableMnemonics) {\r\n            let label = this.getAction().label;\r\n            if (label) {\r\n                let matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\r\n                }\r\n            }\r\n        }\r\n        // Add mouse up listener later to avoid accidental clicks\r\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\r\n                // removed default prevention as it conflicts\r\n                // with BaseActionViewItem #101537\r\n                // add back if issues arise and link new issue\r\n                EventHelper.stop(e, true);\r\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\r\n                // > Writing to the clipboard\r\n                // > You can use the \"cut\" and \"copy\" commands without any special\r\n                // permission if you are using them in a short-lived event handler\r\n                // for a user action (for example, a click handler).\r\n                // => to get the Copy and Paste context menu actions working on Firefox,\r\n                // there should be no timeout here\r\n                if (isFirefox) {\r\n                    const mouseEvent = new StandardMouseEvent(e);\r\n                    // Allowing right click to trigger the event causes the issue described below,\r\n                    // but since the solution below does not work in FF, we must disable right click\r\n                    if (mouseEvent.rightButton) {\r\n                        return;\r\n                    }\r\n                    this.onClick(e);\r\n                }\r\n                // In all other cases, set timout to allow context menu cancellation to trigger\r\n                // otherwise the action will destroy the menu and a second context menu\r\n                // will still trigger for right click.\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.onClick(e);\r\n                    }, 0);\r\n                }\r\n            }));\r\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\r\n                EventHelper.stop(e, true);\r\n            }));\r\n        }, 100);\r\n        this._register(this.runOnceToEnableMouseUp);\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.container = container;\r\n        this.item = append(this.element, $('a.action-menu-item'));\r\n        if (this._action.id === Separator.ID) {\r\n            // A separator is a presentation item\r\n            this.item.setAttribute('role', 'presentation');\r\n        }\r\n        else {\r\n            this.item.setAttribute('role', 'menuitem');\r\n            if (this.mnemonic) {\r\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\r\n            }\r\n        }\r\n        this.check = append(this.item, $('span.menu-item-check' + menuSelectionIcon.cssSelector));\r\n        this.check.setAttribute('role', 'none');\r\n        this.label = append(this.item, $('span.action-label'));\r\n        if (this.options.label && this.options.keybinding) {\r\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\r\n        }\r\n        // Adds mouse up listener to actually run the action\r\n        this.runOnceToEnableMouseUp.schedule();\r\n        this.updateClass();\r\n        this.updateLabel();\r\n        this.updateTooltip();\r\n        this.updateEnabled();\r\n        this.updateChecked();\r\n    }\r\n    blur() {\r\n        super.blur();\r\n        this.applyStyle();\r\n    }\r\n    focus() {\r\n        super.focus();\r\n        if (this.item) {\r\n            this.item.focus();\r\n        }\r\n        this.applyStyle();\r\n    }\r\n    updatePositionInSet(pos, setSize) {\r\n        if (this.item) {\r\n            this.item.setAttribute('aria-posinset', `${pos}`);\r\n            this.item.setAttribute('aria-setsize', `${setSize}`);\r\n        }\r\n    }\r\n    updateLabel() {\r\n        if (!this.label) {\r\n            return;\r\n        }\r\n        if (this.options.label) {\r\n            clearNode(this.label);\r\n            let label = stripIcons(this.getAction().label);\r\n            if (label) {\r\n                const cleanLabel = cleanMnemonic(label);\r\n                if (!this.options.enableMnemonics) {\r\n                    label = cleanLabel;\r\n                }\r\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\r\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    label = strings.escape(label);\r\n                    // This is global, reset it\r\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\r\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    // We can't use negative lookbehind so if we match our negative and skip\r\n                    while (escMatch && escMatch[1]) {\r\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    }\r\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\r\n                    if (escMatch) {\r\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\r\n                    }\r\n                    else {\r\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\r\n                    }\r\n                    if (this.item) {\r\n                        this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\r\n                    }\r\n                }\r\n                else {\r\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    updateTooltip() {\r\n        let title = null;\r\n        if (this.getAction().tooltip) {\r\n            title = this.getAction().tooltip;\r\n        }\r\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\r\n            title = this.getAction().label;\r\n            if (this.options.keybinding) {\r\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\r\n            }\r\n        }\r\n        if (title && this.item) {\r\n            this.item.title = title;\r\n        }\r\n    }\r\n    updateClass() {\r\n        if (this.cssClass && this.item) {\r\n            this.item.classList.remove(...this.cssClass.split(' '));\r\n        }\r\n        if (this.options.icon && this.label) {\r\n            this.cssClass = this.getAction().class || '';\r\n            this.label.classList.add('icon');\r\n            if (this.cssClass) {\r\n                this.label.classList.add(...this.cssClass.split(' '));\r\n            }\r\n            this.updateEnabled();\r\n        }\r\n        else if (this.label) {\r\n            this.label.classList.remove('icon');\r\n        }\r\n    }\r\n    updateEnabled() {\r\n        if (this.getAction().enabled) {\r\n            if (this.element) {\r\n                this.element.classList.remove('disabled');\r\n            }\r\n            if (this.item) {\r\n                this.item.classList.remove('disabled');\r\n                this.item.tabIndex = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (this.element) {\r\n                this.element.classList.add('disabled');\r\n            }\r\n            if (this.item) {\r\n                this.item.classList.add('disabled');\r\n                removeTabIndexAndUpdateFocus(this.item);\r\n            }\r\n        }\r\n    }\r\n    updateChecked() {\r\n        if (!this.item) {\r\n            return;\r\n        }\r\n        if (this.getAction().checked) {\r\n            this.item.classList.add('checked');\r\n            this.item.setAttribute('role', 'menuitemcheckbox');\r\n            this.item.setAttribute('aria-checked', 'true');\r\n        }\r\n        else {\r\n            this.item.classList.remove('checked');\r\n            this.item.setAttribute('role', 'menuitem');\r\n            this.item.setAttribute('aria-checked', 'false');\r\n        }\r\n    }\r\n    getMnemonic() {\r\n        return this.mnemonic;\r\n    }\r\n    applyStyle() {\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        const isSelected = this.element && this.element.classList.contains('focused');\r\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\r\n        const border = isSelected && this.menuStyle.selectionBorderColor ? `thin solid ${this.menuStyle.selectionBorderColor}` : '';\r\n        if (this.item) {\r\n            this.item.style.color = fgColor ? fgColor.toString() : '';\r\n            this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\r\n        }\r\n        if (this.check) {\r\n            this.check.style.color = fgColor ? fgColor.toString() : '';\r\n        }\r\n        if (this.container) {\r\n            this.container.style.border = border;\r\n        }\r\n    }\r\n    style(style) {\r\n        this.menuStyle = style;\r\n        this.applyStyle();\r\n    }\r\n}\r\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\r\n    constructor(action, submenuActions, parentData, submenuOptions) {\r\n        super(action, action, submenuOptions);\r\n        this.submenuActions = submenuActions;\r\n        this.parentData = parentData;\r\n        this.submenuOptions = submenuOptions;\r\n        this.mysubmenu = null;\r\n        this.submenuDisposables = this._register(new DisposableStore());\r\n        this.mouseOver = false;\r\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\r\n        this.showScheduler = new RunOnceScheduler(() => {\r\n            if (this.mouseOver) {\r\n                this.cleanupExistingSubmenu(false);\r\n                this.createSubmenu(false);\r\n            }\r\n        }, 250);\r\n        this.hideScheduler = new RunOnceScheduler(() => {\r\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\r\n                this.parentData.parent.focus(false);\r\n                this.cleanupExistingSubmenu(true);\r\n            }\r\n        }, 750);\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (this.item) {\r\n            this.item.classList.add('monaco-submenu-item');\r\n            this.item.tabIndex = 0;\r\n            this.item.setAttribute('aria-haspopup', 'true');\r\n            this.updateAriaExpanded('false');\r\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + menuSubmenuIcon.cssSelector));\r\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\r\n        }\r\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\r\n            let event = new StandardKeyboardEvent(e);\r\n            if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                EventHelper.stop(e, true);\r\n                this.createSubmenu(true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\r\n            let event = new StandardKeyboardEvent(e);\r\n            if (getActiveElement() === this.item) {\r\n                if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\r\n            if (!this.mouseOver) {\r\n                this.mouseOver = true;\r\n                this.showScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\r\n            this.mouseOver = false;\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\r\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\r\n                this.hideScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(this.parentData.parent.onScroll(() => {\r\n            this.parentData.parent.focus(false);\r\n            this.cleanupExistingSubmenu(false);\r\n        }));\r\n    }\r\n    updateEnabled() {\r\n        // override on submenu entry\r\n        // native menus do not observe enablement on sumbenus\r\n        // we mimic that behavior\r\n    }\r\n    onClick(e) {\r\n        // stop clicking from trying to run an action\r\n        EventHelper.stop(e, true);\r\n        this.cleanupExistingSubmenu(false);\r\n        this.createSubmenu(true);\r\n    }\r\n    cleanupExistingSubmenu(force) {\r\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\r\n            // disposal may throw if the submenu has already been removed\r\n            try {\r\n                this.parentData.submenu.dispose();\r\n            }\r\n            catch (_a) { }\r\n            this.parentData.submenu = undefined;\r\n            this.updateAriaExpanded('false');\r\n            if (this.submenuContainer) {\r\n                this.submenuDisposables.clear();\r\n                this.submenuContainer = undefined;\r\n            }\r\n        }\r\n    }\r\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\r\n        const ret = { top: 0, left: 0 };\r\n        // Start with horizontal\r\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* Before */ : 1 /* After */, offset: entry.left, size: entry.width });\r\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\r\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\r\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\r\n                ret.left = entry.left + 10;\r\n            }\r\n            entry.top += 10;\r\n            entry.height = 0;\r\n        }\r\n        // Now that we have a horizontal position, try layout vertically\r\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* Before */, offset: entry.top, size: 0 });\r\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\r\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\r\n            ret.top += entry.height;\r\n        }\r\n        return ret;\r\n    }\r\n    createSubmenu(selectFirstItem = true) {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (!this.parentData.submenu) {\r\n            this.updateAriaExpanded('true');\r\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\r\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\r\n            // Set the top value of the menu container before construction\r\n            // This allows the menu constructor to calculate the proper max height\r\n            const computedStyles = getComputedStyle(this.parentData.parent.domNode);\r\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\r\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\r\n            this.submenuContainer.style.zIndex = '1';\r\n            this.submenuContainer.style.position = 'fixed';\r\n            this.submenuContainer.style.top = '0';\r\n            this.submenuContainer.style.left = '0';\r\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions);\r\n            if (this.menuStyle) {\r\n                this.parentData.submenu.style(this.menuStyle);\r\n            }\r\n            // layout submenu\r\n            const entryBox = this.element.getBoundingClientRect();\r\n            const entryBoxUpdated = {\r\n                top: entryBox.top - paddingTop,\r\n                left: entryBox.left,\r\n                height: entryBox.height + 2 * paddingTop,\r\n                width: entryBox.width\r\n            };\r\n            const viewBox = this.submenuContainer.getBoundingClientRect();\r\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\r\n            this.submenuContainer.style.left = `${left}px`;\r\n            this.submenuContainer.style.top = `${top}px`;\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\r\n                let event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                    this.parentData.parent.focus();\r\n                    this.cleanupExistingSubmenu(true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\r\n                let event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\r\n                this.parentData.parent.focus();\r\n                this.cleanupExistingSubmenu(true);\r\n            }));\r\n            this.parentData.submenu.focus(selectFirstItem);\r\n            this.mysubmenu = this.parentData.submenu;\r\n        }\r\n        else {\r\n            this.parentData.submenu.focus(false);\r\n        }\r\n    }\r\n    updateAriaExpanded(value) {\r\n        var _a;\r\n        if (this.item) {\r\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\r\n        }\r\n    }\r\n    applyStyle() {\r\n        super.applyStyle();\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        const isSelected = this.element && this.element.classList.contains('focused');\r\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        if (this.submenuIndicator) {\r\n            this.submenuIndicator.style.color = fgColor ? `${fgColor}` : '';\r\n        }\r\n        if (this.parentData.submenu) {\r\n            this.parentData.submenu.style(this.menuStyle);\r\n        }\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.hideScheduler.dispose();\r\n        if (this.mysubmenu) {\r\n            this.mysubmenu.dispose();\r\n            this.mysubmenu = null;\r\n        }\r\n        if (this.submenuContainer) {\r\n            this.submenuContainer = undefined;\r\n        }\r\n    }\r\n}\r\nclass MenuSeparatorActionViewItem extends ActionViewItem {\r\n    style(style) {\r\n        if (this.label) {\r\n            this.label.style.borderBottomColor = style.separatorColor ? `${style.separatorColor}` : '';\r\n        }\r\n    }\r\n}\r\nexport function cleanMnemonic(label) {\r\n    const regex = MENU_MNEMONIC_REGEX;\r\n    const matches = regex.exec(label);\r\n    if (!matches) {\r\n        return label;\r\n    }\r\n    const mnemonicInText = !matches[1];\r\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\r\n}\r\nlet MENU_WIDGET_CSS = `\n.monaco-menu {\n\tfont-size: 13px;\n\n}\n\n${formatRule(menuSelectionIcon)}\n${formatRule(menuSubmenuIcon)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\topacity: 0.4;\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid #bbb;\n\tpadding-top: 1px;\n\tmargin-left: .8em;\n\tmargin-right: .8em;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tpadding: 0.5em 0 0 0;\n\tmargin-bottom: 0.5em;\n\twidth: 100%;\n\theight: 0px !important;\n\tmargin-left: .8em !important;\n\tmargin-right: .8em !important;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\n}\n\n\n/* High Contrast Theming */\n:host-context(.hc-black) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .5em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 1.8em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tpadding: 0.2em 0 0 0;\n\tmargin-bottom: 0.2em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}\n\n/* Arrows */\n.monaco-scrollable-element > .scrollbar > .scra {\n\tcursor: pointer;\n\tfont-size: 11px !important;\n}\n\n.monaco-scrollable-element > .visible {\n\topacity: 1;\n\n\t/* Background rule added for IE9 - to allow clicks on dom node */\n\tbackground:rgba(0,0,0,0);\n\n\ttransition: opacity 100ms linear;\n}\n.monaco-scrollable-element > .invisible {\n\topacity: 0;\n\tpointer-events: none;\n}\n.monaco-scrollable-element > .invisible.fade {\n\ttransition: opacity 800ms linear;\n}\n\n/* Scrollable Content Inset Shadow */\n.monaco-scrollable-element > .shadow {\n\tposition: absolute;\n\tdisplay: none;\n}\n.monaco-scrollable-element > .shadow.top {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 3px;\n\theight: 3px;\n\twidth: 100%;\n\tbox-shadow: #DDD 0 6px 6px -6px inset;\n}\n.monaco-scrollable-element > .shadow.left {\n\tdisplay: block;\n\ttop: 3px;\n\tleft: 0;\n\theight: 100%;\n\twidth: 3px;\n\tbox-shadow: #DDD 6px 0 6px -6px inset;\n}\n.monaco-scrollable-element > .shadow.top-left-corner {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 0;\n\theight: 3px;\n\twidth: 3px;\n}\n.monaco-scrollable-element > .shadow.top.left {\n\tbox-shadow: #DDD 6px 6px 6px -6px inset;\n}\n\n/* ---------- Default Style ---------- */\n\n:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(100, 100, 100, .4);\n}\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(121, 121, 121, .4);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(111, 195, 223, .6);\n}\n\n.monaco-scrollable-element > .scrollbar > .slider:hover {\n\tbackground: rgba(100, 100, 100, .7);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {\n\tbackground: rgba(111, 195, 223, .8);\n}\n\n.monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(0, 0, 0, .6);\n}\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(191, 191, 191, .4);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(111, 195, 223, 1);\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {\n\tbox-shadow: none;\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {\n\tbox-shadow: #000 6px 0 6px -6px inset;\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {\n\tbox-shadow: #000 6px 6px 6px -6px inset;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.left {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {\n\tbox-shadow: none;\n}\n`;\r\n"]},"metadata":{},"sourceType":"module"}